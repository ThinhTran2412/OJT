import{e as gh,f as hh,g as xh,r as j,u as it,h as T0,i as ph,L as bh,j as C0,N as R0,k as yh,l as vh,R as Nh}from"./react-vendor-CPKm13W6.js";import{L as jh,A as u0,M as Kc,U as to,F as m0,S as wh,Z as Sh,a as Ah,T as Eh,B as Th,b as Ch,c as Rh,d as Dh,e as zh,I as Mh,f as Oh,g as D0,P as z0,h as no,i as M0,j as ro,k as Tr,C as is,l as rs,X as tl,m as el,n as Cr,o as qa,p as io,E as O0,q as B0,r as Bh,s as Uh,t as U0,u as ls,v as kh,w as Lh,G as k0,x as L0,D as co,y as Ks,z as Fs,H as $s,J as Ps,K as qt,N as Rr,O as ns,Q as Ar,R as _h,V as qh,W as Hh,Y as Vh}from"./utils-vendor-CbDHvLLn.js";import{S as an,I as Ih,_ as Yh,D as Gh,B as oo,R as Qh,F as _0,P as Jh,s as Fc,T as f0}from"./antd-vendor-zWjSqh6a.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const b of f)if(b.type==="childList")for(const v of b.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function u(f){const b={};return f.integrity&&(b.integrity=f.integrity),f.referrerPolicy&&(b.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?b.credentials="include":f.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function d(f){if(f.ep)return;f.ep=!0;const b=u(f);fetch(f.href,b)}})();var $c={exports:{}},$l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function Xh(){if(g0)return $l;g0=1;var c=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function u(d,f,b){var v=null;if(b!==void 0&&(v=""+b),f.key!==void 0&&(v=""+f.key),"key"in f){b={};for(var h in f)h!=="key"&&(b[h]=f[h])}else b=f;return f=b.ref,{$$typeof:c,type:d,key:v,ref:f!==void 0?f:null,props:b}}return $l.Fragment=i,$l.jsx=u,$l.jsxs=u,$l}var h0;function Zh(){return h0||(h0=1,$c.exports=Xh()),$c.exports}var a=Zh(),Pc={exports:{}},Pl={},Wc={exports:{}},eo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x0;function Kh(){return x0||(x0=1,(function(c){function i(x,F){var y=x.length;x.push(F);e:for(;0<y;){var S=y-1>>>1,q=x[S];if(0<f(q,F))x[S]=F,x[y]=q,y=S;else break e}}function u(x){return x.length===0?null:x[0]}function d(x){if(x.length===0)return null;var F=x[0],y=x.pop();if(y!==F){x[0]=y;e:for(var S=0,q=x.length,Q=q>>>1;S<Q;){var ne=2*(S+1)-1,se=x[ne],ce=ne+1,Ne=x[ce];if(0>f(se,y))ce<q&&0>f(Ne,se)?(x[S]=Ne,x[ce]=y,S=ce):(x[S]=se,x[ne]=y,S=ne);else if(ce<q&&0>f(Ne,y))x[S]=Ne,x[ce]=y,S=ce;else break e}}return F}function f(x,F){var y=x.sortIndex-F.sortIndex;return y!==0?y:x.id-F.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var b=performance;c.unstable_now=function(){return b.now()}}else{var v=Date,h=v.now();c.unstable_now=function(){return v.now()-h}}var w=[],C=[],M=1,g=null,E=3,p=!1,D=!1,z=!1,K=!1,J=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function H(x){for(var F=u(C);F!==null;){if(F.callback===null)d(C);else if(F.startTime<=x)d(C),F.sortIndex=F.expirationTime,i(w,F);else break;F=u(C)}}function ee(x){if(z=!1,H(x),!D)if(u(w)!==null)D=!0,_||(_=!0,W());else{var F=u(C);F!==null&&ie(ee,F.startTime-x)}}var _=!1,Z=-1,de=5,pe=-1;function k(){return K?!0:!(c.unstable_now()-pe<de)}function T(){if(K=!1,_){var x=c.unstable_now();pe=x;var F=!0;try{e:{D=!1,z&&(z=!1,$(Z),Z=-1),p=!0;var y=E;try{t:{for(H(x),g=u(w);g!==null&&!(g.expirationTime>x&&k());){var S=g.callback;if(typeof S=="function"){g.callback=null,E=g.priorityLevel;var q=S(g.expirationTime<=x);if(x=c.unstable_now(),typeof q=="function"){g.callback=q,H(x),F=!0;break t}g===u(w)&&d(w),H(x)}else d(w);g=u(w)}if(g!==null)F=!0;else{var Q=u(C);Q!==null&&ie(ee,Q.startTime-x),F=!1}}break e}finally{g=null,E=y,p=!1}F=void 0}}finally{F?W():_=!1}}}var W;if(typeof P=="function")W=function(){P(T)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ge=I.port2;I.port1.onmessage=T,W=function(){ge.postMessage(null)}}else W=function(){J(T,0)};function ie(x,F){Z=J(function(){x(c.unstable_now())},F)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(x){x.callback=null},c.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<x?Math.floor(1e3/x):5},c.unstable_getCurrentPriorityLevel=function(){return E},c.unstable_next=function(x){switch(E){case 1:case 2:case 3:var F=3;break;default:F=E}var y=E;E=F;try{return x()}finally{E=y}},c.unstable_requestPaint=function(){K=!0},c.unstable_runWithPriority=function(x,F){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var y=E;E=x;try{return F()}finally{E=y}},c.unstable_scheduleCallback=function(x,F,y){var S=c.unstable_now();switch(typeof y=="object"&&y!==null?(y=y.delay,y=typeof y=="number"&&0<y?S+y:S):y=S,x){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=y+q,x={id:M++,callback:F,priorityLevel:x,startTime:y,expirationTime:q,sortIndex:-1},y>S?(x.sortIndex=y,i(C,x),u(w)===null&&x===u(C)&&(z?($(Z),Z=-1):z=!0,ie(ee,y-S))):(x.sortIndex=q,i(w,x),D||p||(D=!0,_||(_=!0,W()))),x},c.unstable_shouldYield=k,c.unstable_wrapCallback=function(x){var F=E;return function(){var y=E;E=F;try{return x.apply(this,arguments)}finally{E=y}}}})(eo)),eo}var p0;function Fh(){return p0||(p0=1,Wc.exports=Kh()),Wc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function $h(){if(b0)return Pl;b0=1;var c=Fh(),i=gh(),u=hh();function d(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function b(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function v(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(b(e)!==e)throw Error(d(188))}function C(e){var t=e.alternate;if(!t){if(t=b(e),t===null)throw Error(d(188));return t!==e?null:e}for(var s=e,l=t;;){var n=s.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){s=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===s)return w(n),e;if(r===l)return w(n),t;r=r.sibling}throw Error(d(188))}if(s.return!==l.return)s=n,l=r;else{for(var o=!1,m=n.child;m;){if(m===s){o=!0,s=n,l=r;break}if(m===l){o=!0,l=n,s=r;break}m=m.sibling}if(!o){for(m=r.child;m;){if(m===s){o=!0,s=r,l=n;break}if(m===l){o=!0,l=r,s=n;break}m=m.sibling}if(!o)throw Error(d(189))}}if(s.alternate!==l)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:t}function M(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=M(e),t!==null)return t;e=e.sibling}return null}var g=Object.assign,E=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),P=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=T&&e[T]||e["@@iterator"],typeof e=="function"?e:null)}var I=Symbol.for("react.client.reference");function ge(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===I?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case z:return"Fragment";case J:return"Profiler";case K:return"StrictMode";case ee:return"Suspense";case _:return"SuspenseList";case pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case P:return e.displayName||"Context";case $:return(e._context.displayName||"Context")+".Consumer";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:ge(e.type)||"Memo";case de:t=e._payload,e=e._init;try{return ge(e(t))}catch{}}return null}var ie=Array.isArray,x=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,y={pending:!1,data:null,method:null,action:null},S=[],q=-1;function Q(e){return{current:e}}function ne(e){0>q||(e.current=S[q],S[q]=null,q--)}function se(e,t){q++,S[q]=e.current,e.current=t}var ce=Q(null),Ne=Q(null),X=Q(null),me=Q(null);function te(e,t){switch(se(X,t),se(Ne,e),se(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Bm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Bm(t),e=Um(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ne(ce),se(ce,e)}function Be(){ne(ce),ne(Ne),ne(X)}function re(e){e.memoizedState!==null&&se(me,e);var t=ce.current,s=Um(t,e.type);t!==s&&(se(Ne,e),se(ce,s))}function ut(e){Ne.current===e&&(ne(ce),ne(Ne)),me.current===e&&(ne(me),Xl._currentValue=y)}var Ht,sn;function Gt(e){if(Ht===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Ht=t&&t[1]||"",sn=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ht+e+sn}var cs=!1;function al(e,t){if(!e||cs)return"";cs=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var G=function(){throw Error()};if(Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(L){var U=L}Reflect.construct(e,[],G)}else{try{G.call()}catch(L){U=L}e.call(G.prototype)}}else{try{throw Error()}catch(L){U=L}(G=e())&&typeof G.catch=="function"&&G.catch(function(){})}}catch(L){if(L&&U&&typeof L.stack=="string")return[L.stack,U.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=l.DetermineComponentFrameRoot(),o=r[0],m=r[1];if(o&&m){var N=o.split(`
`),B=m.split(`
`);for(n=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;n<B.length&&!B[n].includes("DetermineComponentFrameRoot");)n++;if(l===N.length||n===B.length)for(l=N.length-1,n=B.length-1;1<=l&&0<=n&&N[l]!==B[n];)n--;for(;1<=l&&0<=n;l--,n--)if(N[l]!==B[n]){if(l!==1||n!==1)do if(l--,n--,0>n||N[l]!==B[n]){var V=`
`+N[l].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=l&&0<=n);break}}}finally{cs=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Gt(s):""}function Or(e,t){switch(e.tag){case 26:case 27:case 5:return Gt(e.type);case 16:return Gt("Lazy");case 13:return e.child!==t&&t!==null?Gt("Suspense Fallback"):Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return al(e.type,!1);case 11:return al(e.type.render,!1);case 1:return al(e.type,!0);case 31:return Gt("Activity");default:return""}}function ln(e){try{var t="",s=null;do t+=Or(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var sl=Object.prototype.hasOwnProperty,ll=c.unstable_scheduleCallback,nl=c.unstable_cancelCallback,Br=c.unstable_shouldYield,Ur=c.unstable_requestPaint,ot=c.unstable_now,kr=c.unstable_getCurrentPriorityLevel,nn=c.unstable_ImmediatePriority,le=c.unstable_UserBlockingPriority,ae=c.unstable_NormalPriority,he=c.unstable_LowPriority,ye=c.unstable_IdlePriority,we=c.log,ga=c.unstable_setDisableYieldValue,Kt=null,ct=null;function tt(e){if(typeof we=="function"&&ga(e),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(Kt,e)}catch{}}var mt=Math.clz32?Math.clz32:W0,$0=Math.log,P0=Math.LN2;function W0(e){return e>>>=0,e===0?32:31-($0(e)/P0|0)|0}var rn=256,cn=262144,on=4194304;function Ha(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function dn(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var n=0,r=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var m=l&134217727;return m!==0?(l=m&~r,l!==0?n=Ha(l):(o&=m,o!==0?n=Ha(o):s||(s=m&~e,s!==0&&(n=Ha(s))))):(m=l&~r,m!==0?n=Ha(m):o!==0?n=Ha(o):s||(s=l&~e,s!==0&&(n=Ha(s)))),n===0?0:t!==0&&t!==n&&(t&r)===0&&(r=n&-n,s=t&-t,r>=s||r===32&&(s&4194048)!==0)?t:n}function rl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function ef(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(){var e=on;return on<<=1,(on&62914560)===0&&(on=4194304),e}function Lr(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function il(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function tf(e,t,s,l,n,r){var o=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var m=e.entanglements,N=e.expirationTimes,B=e.hiddenUpdates;for(s=o&~s;0<s;){var V=31-mt(s),G=1<<V;m[V]=0,N[V]=-1;var U=B[V];if(U!==null)for(B[V]=null,V=0;V<U.length;V++){var L=U[V];L!==null&&(L.lane&=-536870913)}s&=~G}l!==0&&xo(e,l,0),r!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=r&~(o&~t))}function xo(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-mt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function po(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-mt(s),n=1<<l;n&t|e[l]&t&&(e[l]|=t),s&=~n}}function bo(e,t){var s=t&-t;return s=(s&42)!==0?1:_r(s),(s&(e.suspendedLanes|t))!==0?0:s}function _r(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function yo(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:l0(e.type))}function vo(e,t){var s=F.p;try{return F.p=e,t()}finally{F.p=s}}var ha=Math.random().toString(36).slice(2),at="__reactFiber$"+ha,ft="__reactProps$"+ha,os="__reactContainer$"+ha,Hr="__reactEvents$"+ha,af="__reactListeners$"+ha,sf="__reactHandles$"+ha,No="__reactResources$"+ha,cl="__reactMarker$"+ha;function Vr(e){delete e[at],delete e[ft],delete e[Hr],delete e[af],delete e[sf]}function ds(e){var t=e[at];if(t)return t;for(var s=e.parentNode;s;){if(t=s[os]||s[at]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Im(e);e!==null;){if(s=e[at])return s;e=Im(e)}return t}e=s,s=e.parentNode}return null}function us(e){if(e=e[at]||e[os]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function ol(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(d(33))}function ms(e){var t=e[No];return t||(t=e[No]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[cl]=!0}var jo=new Set,wo={};function Va(e,t){fs(e,t),fs(e+"Capture",t)}function fs(e,t){for(wo[e]=t,e=0;e<t.length;e++)jo.add(t[e])}var lf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),So={},Ao={};function nf(e){return sl.call(Ao,e)?!0:sl.call(So,e)?!1:lf.test(e)?Ao[e]=!0:(So[e]=!0,!1)}function un(e,t,s){if(nf(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function mn(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Ft(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function Rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Eo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rf(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var n=l.get,r=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ir(e){if(!e._valueTracker){var t=Eo(e)?"checked":"value";e._valueTracker=rf(e,t,""+e[t])}}function To(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=Eo(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function fn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cf=/[\n"\\]/g;function Dt(e){return e.replace(cf,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Yr(e,t,s,l,n,r,o,m){e.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?e.type=o:e.removeAttribute("type"),t!=null?o==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Rt(t)):e.value!==""+Rt(t)&&(e.value=""+Rt(t)):o!=="submit"&&o!=="reset"||e.removeAttribute("value"),t!=null?Gr(e,o,Rt(t)):s!=null?Gr(e,o,Rt(s)):l!=null&&e.removeAttribute("value"),n==null&&r!=null&&(e.defaultChecked=!!r),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Rt(m):e.removeAttribute("name")}function Co(e,t,s,l,n,r,o,m){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.type=r),t!=null||s!=null){if(!(r!=="submit"&&r!=="reset"||t!=null)){Ir(e);return}s=s!=null?""+Rt(s):"",t=t!=null?""+Rt(t):s,m||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=m?e.checked:!!l,e.defaultChecked=!!l,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.name=o),Ir(e)}function Gr(e,t,s){t==="number"&&fn(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function gs(e,t,s,l){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Rt(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Ro(e,t,s){if(t!=null&&(t=""+Rt(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Rt(s):""}function Do(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(d(92));if(ie(l)){if(1<l.length)throw Error(d(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=Rt(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),Ir(e)}function hs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var of=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zo(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||of.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Mo(e,t,s){if(t!=null&&typeof t!="object")throw Error(d(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&s[n]!==l&&zo(e,n,l)}else for(var r in t)t.hasOwnProperty(r)&&zo(e,r,t[r])}function Qr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),uf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gn(e){return uf.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function $t(){}var Jr=null;function Xr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xs=null,ps=null;function Oo(e){var t=us(e);if(t&&(e=t.stateNode)){var s=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(Yr(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Dt(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var n=l[ft]||null;if(!n)throw Error(d(90));Yr(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&To(l)}break e;case"textarea":Ro(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&gs(e,!!s.multiple,t,!1)}}}var Zr=!1;function Bo(e,t,s){if(Zr)return e(t,s);Zr=!0;try{var l=e(t);return l}finally{if(Zr=!1,(xs!==null||ps!==null)&&(tr(),xs&&(t=xs,e=ps,ps=xs=null,Oo(t),e)))for(t=0;t<e.length;t++)Oo(e[t])}}function dl(e,t){var s=e.stateNode;if(s===null)return null;var l=s[ft]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,t,typeof s));return s}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kr=!1;if(Pt)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Kr=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Kr=!1}var xa=null,Fr=null,hn=null;function Uo(){if(hn)return hn;var e,t=Fr,s=t.length,l,n="value"in xa?xa.value:xa.textContent,r=n.length;for(e=0;e<s&&t[e]===n[e];e++);var o=s-e;for(l=1;l<=o&&t[s-l]===n[r-l];l++);return hn=n.slice(e,1<l?1-l:void 0)}function xn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pn(){return!0}function ko(){return!1}function gt(e){function t(s,l,n,r,o){this._reactName=s,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(s=e[m],this[m]=s?s(r):r[m]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?pn:ko,this.isPropagationStopped=ko,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pn)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pn)},persist:function(){},isPersistent:pn}),t}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bn=gt(Ia),ml=g({},Ia,{view:0,detail:0}),mf=gt(ml),$r,Pr,fl,yn=g({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fl&&(fl&&e.type==="mousemove"?($r=e.screenX-fl.screenX,Pr=e.screenY-fl.screenY):Pr=$r=0,fl=e),$r)},movementY:function(e){return"movementY"in e?e.movementY:Pr}}),Lo=gt(yn),ff=g({},yn,{dataTransfer:0}),gf=gt(ff),hf=g({},ml,{relatedTarget:0}),Wr=gt(hf),xf=g({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),pf=gt(xf),bf=g({},Ia,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yf=gt(bf),vf=g({},Ia,{data:0}),_o=gt(vf),Nf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wf[e])?!!t[e]:!1}function ei(){return Sf}var Af=g({},ml,{key:function(e){if(e.key){var t=Nf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(e){return e.type==="keypress"?xn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ef=gt(Af),Tf=g({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qo=gt(Tf),Cf=g({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),Rf=gt(Cf),Df=g({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),zf=gt(Df),Mf=g({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Of=gt(Mf),Bf=g({},Ia,{newState:0,oldState:0}),Uf=gt(Bf),kf=[9,13,27,32],ti=Pt&&"CompositionEvent"in window,gl=null;Pt&&"documentMode"in document&&(gl=document.documentMode);var Lf=Pt&&"TextEvent"in window&&!gl,Ho=Pt&&(!ti||gl&&8<gl&&11>=gl),Vo=" ",Io=!1;function Yo(e,t){switch(e){case"keyup":return kf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Go(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bs=!1;function _f(e,t){switch(e){case"compositionend":return Go(t);case"keypress":return t.which!==32?null:(Io=!0,Vo);case"textInput":return e=t.data,e===Vo&&Io?null:e;default:return null}}function qf(e,t){if(bs)return e==="compositionend"||!ti&&Yo(e,t)?(e=Uo(),hn=Fr=xa=null,bs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ho&&t.locale!=="ko"?null:t.data;default:return null}}var Hf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hf[e.type]:t==="textarea"}function Jo(e,t,s,l){xs?ps?ps.push(l):ps=[l]:xs=l,t=cr(t,"onChange"),0<t.length&&(s=new bn("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var hl=null,xl=null;function Vf(e){Cm(e,0)}function vn(e){var t=ol(e);if(To(t))return e}function Xo(e,t){if(e==="change")return t}var Zo=!1;if(Pt){var ai;if(Pt){var si="oninput"in document;if(!si){var Ko=document.createElement("div");Ko.setAttribute("oninput","return;"),si=typeof Ko.oninput=="function"}ai=si}else ai=!1;Zo=ai&&(!document.documentMode||9<document.documentMode)}function Fo(){hl&&(hl.detachEvent("onpropertychange",$o),xl=hl=null)}function $o(e){if(e.propertyName==="value"&&vn(xl)){var t=[];Jo(t,xl,e,Xr(e)),Bo(Vf,t)}}function If(e,t,s){e==="focusin"?(Fo(),hl=t,xl=s,hl.attachEvent("onpropertychange",$o)):e==="focusout"&&Fo()}function Yf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vn(xl)}function Gf(e,t){if(e==="click")return vn(t)}function Qf(e,t){if(e==="input"||e==="change")return vn(t)}function Jf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vt=typeof Object.is=="function"?Object.is:Jf;function pl(e,t){if(vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var n=s[l];if(!sl.call(t,n)||!vt(e[n],t[n]))return!1}return!0}function Po(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wo(e,t){var s=Po(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Po(s)}}function ed(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ed(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function td(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=fn(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=fn(e.document)}return t}function li(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Xf=Pt&&"documentMode"in document&&11>=document.documentMode,ys=null,ni=null,bl=null,ri=!1;function ad(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ri||ys==null||ys!==fn(l)||(l=ys,"selectionStart"in l&&li(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),bl&&pl(bl,l)||(bl=l,l=cr(ni,"onSelect"),0<l.length&&(t=new bn("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=ys)))}function Ya(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var vs={animationend:Ya("Animation","AnimationEnd"),animationiteration:Ya("Animation","AnimationIteration"),animationstart:Ya("Animation","AnimationStart"),transitionrun:Ya("Transition","TransitionRun"),transitionstart:Ya("Transition","TransitionStart"),transitioncancel:Ya("Transition","TransitionCancel"),transitionend:Ya("Transition","TransitionEnd")},ii={},sd={};Pt&&(sd=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Ga(e){if(ii[e])return ii[e];if(!vs[e])return e;var t=vs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in sd)return ii[e]=t[s];return e}var ld=Ga("animationend"),nd=Ga("animationiteration"),rd=Ga("animationstart"),Zf=Ga("transitionrun"),Kf=Ga("transitionstart"),Ff=Ga("transitioncancel"),id=Ga("transitionend"),cd=new Map,ci="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ci.push("scrollEnd");function Vt(e,t){cd.set(e,t),Va(t,[e])}var Nn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},zt=[],Ns=0,oi=0;function jn(){for(var e=Ns,t=oi=Ns=0;t<e;){var s=zt[t];zt[t++]=null;var l=zt[t];zt[t++]=null;var n=zt[t];zt[t++]=null;var r=zt[t];if(zt[t++]=null,l!==null&&n!==null){var o=l.pending;o===null?n.next=n:(n.next=o.next,o.next=n),l.pending=n}r!==0&&od(s,n,r)}}function wn(e,t,s,l){zt[Ns++]=e,zt[Ns++]=t,zt[Ns++]=s,zt[Ns++]=l,oi|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function di(e,t,s,l){return wn(e,t,s,l),Sn(e)}function Qa(e,t){return wn(e,null,null,t),Sn(e)}function od(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var n=!1,r=e.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),r.tag===22&&(e=r.stateNode,e===null||e._visibility&1||(n=!0)),e=r,r=r.return;return e.tag===3?(r=e.stateNode,n&&t!==null&&(n=31-mt(s),e=r.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=s|536870912),r):null}function Sn(e){if(50<Hl)throw Hl=0,yc=null,Error(d(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var js={};function $f(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nt(e,t,s,l){return new $f(e,t,s,l)}function ui(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Wt(e,t){var s=e.alternate;return s===null?(s=Nt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function dd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function An(e,t,s,l,n,r){var o=0;if(l=e,typeof e=="function")ui(e)&&(o=1);else if(typeof e=="string")o=ah(e,s,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case pe:return e=Nt(31,s,t,n),e.elementType=pe,e.lanes=r,e;case z:return Ja(s.children,n,r,t);case K:o=8,n|=24;break;case J:return e=Nt(12,s,t,n|2),e.elementType=J,e.lanes=r,e;case ee:return e=Nt(13,s,t,n),e.elementType=ee,e.lanes=r,e;case _:return e=Nt(19,s,t,n),e.elementType=_,e.lanes=r,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case P:o=10;break e;case $:o=9;break e;case H:o=11;break e;case Z:o=14;break e;case de:o=16,l=null;break e}o=29,s=Error(d(130,e===null?"null":typeof e,"")),l=null}return t=Nt(o,s,t,n),t.elementType=e,t.type=l,t.lanes=r,t}function Ja(e,t,s,l){return e=Nt(7,e,l,t),e.lanes=s,e}function mi(e,t,s){return e=Nt(6,e,null,t),e.lanes=s,e}function ud(e){var t=Nt(18,null,null,0);return t.stateNode=e,t}function fi(e,t,s){return t=Nt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var md=new WeakMap;function Mt(e,t){if(typeof e=="object"&&e!==null){var s=md.get(e);return s!==void 0?s:(t={value:e,source:t,stack:ln(t)},md.set(e,t),t)}return{value:e,source:t,stack:ln(t)}}var ws=[],Ss=0,En=null,yl=0,Ot=[],Bt=0,pa=null,Qt=1,Jt="";function ea(e,t){ws[Ss++]=yl,ws[Ss++]=En,En=e,yl=t}function fd(e,t,s){Ot[Bt++]=Qt,Ot[Bt++]=Jt,Ot[Bt++]=pa,pa=e;var l=Qt;e=Jt;var n=32-mt(l)-1;l&=~(1<<n),s+=1;var r=32-mt(t)+n;if(30<r){var o=n-n%5;r=(l&(1<<o)-1).toString(32),l>>=o,n-=o,Qt=1<<32-mt(t)+n|s<<n|l,Jt=r+e}else Qt=1<<r|s<<n|l,Jt=e}function gi(e){e.return!==null&&(ea(e,1),fd(e,1,0))}function hi(e){for(;e===En;)En=ws[--Ss],ws[Ss]=null,yl=ws[--Ss],ws[Ss]=null;for(;e===pa;)pa=Ot[--Bt],Ot[Bt]=null,Jt=Ot[--Bt],Ot[Bt]=null,Qt=Ot[--Bt],Ot[Bt]=null}function gd(e,t){Ot[Bt++]=Qt,Ot[Bt++]=Jt,Ot[Bt++]=pa,Qt=t.id,Jt=t.overflow,pa=e}var st=null,qe=null,Ce=!1,ba=null,Ut=!1,xi=Error(d(519));function ya(e){var t=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vl(Mt(t,e)),xi}function hd(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[at]=e,t[ft]=l,s){case"dialog":Ae("cancel",t),Ae("close",t);break;case"iframe":case"object":case"embed":Ae("load",t);break;case"video":case"audio":for(s=0;s<Il.length;s++)Ae(Il[s],t);break;case"source":Ae("error",t);break;case"img":case"image":case"link":Ae("error",t),Ae("load",t);break;case"details":Ae("toggle",t);break;case"input":Ae("invalid",t),Co(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ae("invalid",t);break;case"textarea":Ae("invalid",t),Do(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Mm(t.textContent,s)?(l.popover!=null&&(Ae("beforetoggle",t),Ae("toggle",t)),l.onScroll!=null&&Ae("scroll",t),l.onScrollEnd!=null&&Ae("scrollend",t),l.onClick!=null&&(t.onclick=$t),t=!0):t=!1,t||ya(e,!0)}function xd(e){for(st=e.return;st;)switch(st.tag){case 5:case 31:case 13:Ut=!1;return;case 27:case 3:Ut=!0;return;default:st=st.return}}function As(e){if(e!==st)return!1;if(!Ce)return xd(e),Ce=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Bc(e.type,e.memoizedProps)),s=!s),s&&qe&&ya(e),xd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));qe=Vm(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));qe=Vm(e)}else t===27?(t=qe,Oa(e.type)?(e=qc,qc=null,qe=e):qe=t):qe=st?Lt(e.stateNode.nextSibling):null;return!0}function Xa(){qe=st=null,Ce=!1}function pi(){var e=ba;return e!==null&&(bt===null?bt=e:bt.push.apply(bt,e),ba=null),e}function vl(e){ba===null?ba=[e]:ba.push(e)}var bi=Q(null),Za=null,ta=null;function va(e,t,s){se(bi,t._currentValue),t._currentValue=s}function aa(e){e._currentValue=bi.current,ne(bi)}function yi(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function vi(e,t,s,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var r=n.dependencies;if(r!==null){var o=n.child;r=r.firstContext;e:for(;r!==null;){var m=r;r=n;for(var N=0;N<t.length;N++)if(m.context===t[N]){r.lanes|=s,m=r.alternate,m!==null&&(m.lanes|=s),yi(r.return,s,e),l||(o=null);break e}r=m.next}}else if(n.tag===18){if(o=n.return,o===null)throw Error(d(341));o.lanes|=s,r=o.alternate,r!==null&&(r.lanes|=s),yi(o,s,e),o=null}else o=n.child;if(o!==null)o.return=n;else for(o=n;o!==null;){if(o===e){o=null;break}if(n=o.sibling,n!==null){n.return=o.return,o=n;break}o=o.return}n=o}}function Es(e,t,s,l){e=null;for(var n=t,r=!1;n!==null;){if(!r){if((n.flags&524288)!==0)r=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var o=n.alternate;if(o===null)throw Error(d(387));if(o=o.memoizedProps,o!==null){var m=n.type;vt(n.pendingProps.value,o.value)||(e!==null?e.push(m):e=[m])}}else if(n===me.current){if(o=n.alternate,o===null)throw Error(d(387));o.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Xl):e=[Xl])}n=n.return}e!==null&&vi(t,e,s,l),t.flags|=262144}function Tn(e){for(e=e.firstContext;e!==null;){if(!vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ka(e){Za=e,ta=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function lt(e){return pd(Za,e)}function Cn(e,t){return Za===null&&Ka(e),pd(e,t)}function pd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ta===null){if(e===null)throw Error(d(308));ta=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ta=ta.next=t;return s}var Pf=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Wf=c.unstable_scheduleCallback,eg=c.unstable_NormalPriority,Ze={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ni(){return{controller:new Pf,data:new Map,refCount:0}}function Nl(e){e.refCount--,e.refCount===0&&Wf(eg,function(){e.controller.abort()})}var jl=null,ji=0,Ts=0,Cs=null;function tg(e,t){if(jl===null){var s=jl=[];ji=0,Ts=Ac(),Cs={status:"pending",value:void 0,then:function(l){s.push(l)}}}return ji++,t.then(bd,bd),t}function bd(){if(--ji===0&&jl!==null){Cs!==null&&(Cs.status="fulfilled");var e=jl;jl=null,Ts=0,Cs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ag(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(n){s.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<s.length;n++)(0,s[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<s.length;n++)(0,s[n])(void 0)}),l}var yd=x.S;x.S=function(e,t){am=ot(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&tg(e,t),yd!==null&&yd(e,t)};var Fa=Q(null);function wi(){var e=Fa.current;return e!==null?e:_e.pooledCache}function Rn(e,t){t===null?se(Fa,Fa.current):se(Fa,t.pool)}function vd(){var e=wi();return e===null?null:{parent:Ze._currentValue,pool:e}}var Rs=Error(d(460)),Si=Error(d(474)),Dn=Error(d(542)),zn={then:function(){}};function Nd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jd(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then($t,$t),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e;default:if(typeof t.status=="string")t.then($t,$t);else{if(e=_e,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Sd(e),e}throw Pa=t,Rs}}function $a(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Pa=s,Rs):s}}var Pa=null;function wd(){if(Pa===null)throw Error(d(459));var e=Pa;return Pa=null,e}function Sd(e){if(e===Rs||e===Dn)throw Error(d(483))}var Ds=null,wl=0;function Mn(e){var t=wl;return wl+=1,Ds===null&&(Ds=[]),jd(Ds,e,t)}function Sl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function On(e,t){throw t.$$typeof===E?Error(d(525)):(e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ad(e){function t(R,A){if(e){var O=R.deletions;O===null?(R.deletions=[A],R.flags|=16):O.push(A)}}function s(R,A){if(!e)return null;for(;A!==null;)t(R,A),A=A.sibling;return null}function l(R){for(var A=new Map;R!==null;)R.key!==null?A.set(R.key,R):A.set(R.index,R),R=R.sibling;return A}function n(R,A){return R=Wt(R,A),R.index=0,R.sibling=null,R}function r(R,A,O){return R.index=O,e?(O=R.alternate,O!==null?(O=O.index,O<A?(R.flags|=67108866,A):O):(R.flags|=67108866,A)):(R.flags|=1048576,A)}function o(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function m(R,A,O,Y){return A===null||A.tag!==6?(A=mi(O,R.mode,Y),A.return=R,A):(A=n(A,O),A.return=R,A)}function N(R,A,O,Y){var xe=O.type;return xe===z?V(R,A,O.props.children,Y,O.key):A!==null&&(A.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===de&&$a(xe)===A.type)?(A=n(A,O.props),Sl(A,O),A.return=R,A):(A=An(O.type,O.key,O.props,null,R.mode,Y),Sl(A,O),A.return=R,A)}function B(R,A,O,Y){return A===null||A.tag!==4||A.stateNode.containerInfo!==O.containerInfo||A.stateNode.implementation!==O.implementation?(A=fi(O,R.mode,Y),A.return=R,A):(A=n(A,O.children||[]),A.return=R,A)}function V(R,A,O,Y,xe){return A===null||A.tag!==7?(A=Ja(O,R.mode,Y,xe),A.return=R,A):(A=n(A,O),A.return=R,A)}function G(R,A,O){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=mi(""+A,R.mode,O),A.return=R,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case p:return O=An(A.type,A.key,A.props,null,R.mode,O),Sl(O,A),O.return=R,O;case D:return A=fi(A,R.mode,O),A.return=R,A;case de:return A=$a(A),G(R,A,O)}if(ie(A)||W(A))return A=Ja(A,R.mode,O,null),A.return=R,A;if(typeof A.then=="function")return G(R,Mn(A),O);if(A.$$typeof===P)return G(R,Cn(R,A),O);On(R,A)}return null}function U(R,A,O,Y){var xe=A!==null?A.key:null;if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return xe!==null?null:m(R,A,""+O,Y);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case p:return O.key===xe?N(R,A,O,Y):null;case D:return O.key===xe?B(R,A,O,Y):null;case de:return O=$a(O),U(R,A,O,Y)}if(ie(O)||W(O))return xe!==null?null:V(R,A,O,Y,null);if(typeof O.then=="function")return U(R,A,Mn(O),Y);if(O.$$typeof===P)return U(R,A,Cn(R,O),Y);On(R,O)}return null}function L(R,A,O,Y,xe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return R=R.get(O)||null,m(A,R,""+Y,xe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:return R=R.get(Y.key===null?O:Y.key)||null,N(A,R,Y,xe);case D:return R=R.get(Y.key===null?O:Y.key)||null,B(A,R,Y,xe);case de:return Y=$a(Y),L(R,A,O,Y,xe)}if(ie(Y)||W(Y))return R=R.get(O)||null,V(A,R,Y,xe,null);if(typeof Y.then=="function")return L(R,A,O,Mn(Y),xe);if(Y.$$typeof===P)return L(R,A,O,Cn(A,Y),xe);On(A,Y)}return null}function oe(R,A,O,Y){for(var xe=null,Re=null,ue=A,je=A=0,Te=null;ue!==null&&je<O.length;je++){ue.index>je?(Te=ue,ue=null):Te=ue.sibling;var De=U(R,ue,O[je],Y);if(De===null){ue===null&&(ue=Te);break}e&&ue&&De.alternate===null&&t(R,ue),A=r(De,A,je),Re===null?xe=De:Re.sibling=De,Re=De,ue=Te}if(je===O.length)return s(R,ue),Ce&&ea(R,je),xe;if(ue===null){for(;je<O.length;je++)ue=G(R,O[je],Y),ue!==null&&(A=r(ue,A,je),Re===null?xe=ue:Re.sibling=ue,Re=ue);return Ce&&ea(R,je),xe}for(ue=l(ue);je<O.length;je++)Te=L(ue,R,je,O[je],Y),Te!==null&&(e&&Te.alternate!==null&&ue.delete(Te.key===null?je:Te.key),A=r(Te,A,je),Re===null?xe=Te:Re.sibling=Te,Re=Te);return e&&ue.forEach(function(_a){return t(R,_a)}),Ce&&ea(R,je),xe}function be(R,A,O,Y){if(O==null)throw Error(d(151));for(var xe=null,Re=null,ue=A,je=A=0,Te=null,De=O.next();ue!==null&&!De.done;je++,De=O.next()){ue.index>je?(Te=ue,ue=null):Te=ue.sibling;var _a=U(R,ue,De.value,Y);if(_a===null){ue===null&&(ue=Te);break}e&&ue&&_a.alternate===null&&t(R,ue),A=r(_a,A,je),Re===null?xe=_a:Re.sibling=_a,Re=_a,ue=Te}if(De.done)return s(R,ue),Ce&&ea(R,je),xe;if(ue===null){for(;!De.done;je++,De=O.next())De=G(R,De.value,Y),De!==null&&(A=r(De,A,je),Re===null?xe=De:Re.sibling=De,Re=De);return Ce&&ea(R,je),xe}for(ue=l(ue);!De.done;je++,De=O.next())De=L(ue,R,je,De.value,Y),De!==null&&(e&&De.alternate!==null&&ue.delete(De.key===null?je:De.key),A=r(De,A,je),Re===null?xe=De:Re.sibling=De,Re=De);return e&&ue.forEach(function(fh){return t(R,fh)}),Ce&&ea(R,je),xe}function Le(R,A,O,Y){if(typeof O=="object"&&O!==null&&O.type===z&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case p:e:{for(var xe=O.key;A!==null;){if(A.key===xe){if(xe=O.type,xe===z){if(A.tag===7){s(R,A.sibling),Y=n(A,O.props.children),Y.return=R,R=Y;break e}}else if(A.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===de&&$a(xe)===A.type){s(R,A.sibling),Y=n(A,O.props),Sl(Y,O),Y.return=R,R=Y;break e}s(R,A);break}else t(R,A);A=A.sibling}O.type===z?(Y=Ja(O.props.children,R.mode,Y,O.key),Y.return=R,R=Y):(Y=An(O.type,O.key,O.props,null,R.mode,Y),Sl(Y,O),Y.return=R,R=Y)}return o(R);case D:e:{for(xe=O.key;A!==null;){if(A.key===xe)if(A.tag===4&&A.stateNode.containerInfo===O.containerInfo&&A.stateNode.implementation===O.implementation){s(R,A.sibling),Y=n(A,O.children||[]),Y.return=R,R=Y;break e}else{s(R,A);break}else t(R,A);A=A.sibling}Y=fi(O,R.mode,Y),Y.return=R,R=Y}return o(R);case de:return O=$a(O),Le(R,A,O,Y)}if(ie(O))return oe(R,A,O,Y);if(W(O)){if(xe=W(O),typeof xe!="function")throw Error(d(150));return O=xe.call(O),be(R,A,O,Y)}if(typeof O.then=="function")return Le(R,A,Mn(O),Y);if(O.$$typeof===P)return Le(R,A,Cn(R,O),Y);On(R,O)}return typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint"?(O=""+O,A!==null&&A.tag===6?(s(R,A.sibling),Y=n(A,O),Y.return=R,R=Y):(s(R,A),Y=mi(O,R.mode,Y),Y.return=R,R=Y),o(R)):s(R,A)}return function(R,A,O,Y){try{wl=0;var xe=Le(R,A,O,Y);return Ds=null,xe}catch(ue){if(ue===Rs||ue===Dn)throw ue;var Re=Nt(29,ue,null,R.mode);return Re.lanes=Y,Re.return=R,Re}finally{}}}var Wa=Ad(!0),Ed=Ad(!1),Na=!1;function Ai(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ei(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wa(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ze&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=Sn(e),od(e,null,s),t}return wn(e,l,t,s),Sn(e)}function Al(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,po(e,s)}}function Ti(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var n=null,r=null;if(s=s.firstBaseUpdate,s!==null){do{var o={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};r===null?n=r=o:r=r.next=o,s=s.next}while(s!==null);r===null?n=r=t:r=r.next=t}else n=r=t;s={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Ci=!1;function El(){if(Ci){var e=Cs;if(e!==null)throw e}}function Tl(e,t,s,l){Ci=!1;var n=e.updateQueue;Na=!1;var r=n.firstBaseUpdate,o=n.lastBaseUpdate,m=n.shared.pending;if(m!==null){n.shared.pending=null;var N=m,B=N.next;N.next=null,o===null?r=B:o.next=B,o=N;var V=e.alternate;V!==null&&(V=V.updateQueue,m=V.lastBaseUpdate,m!==o&&(m===null?V.firstBaseUpdate=B:m.next=B,V.lastBaseUpdate=N))}if(r!==null){var G=n.baseState;o=0,V=B=N=null,m=r;do{var U=m.lane&-536870913,L=U!==m.lane;if(L?(Ee&U)===U:(l&U)===U){U!==0&&U===Ts&&(Ci=!0),V!==null&&(V=V.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var oe=e,be=m;U=t;var Le=s;switch(be.tag){case 1:if(oe=be.payload,typeof oe=="function"){G=oe.call(Le,G,U);break e}G=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=be.payload,U=typeof oe=="function"?oe.call(Le,G,U):oe,U==null)break e;G=g({},G,U);break e;case 2:Na=!0}}U=m.callback,U!==null&&(e.flags|=64,L&&(e.flags|=8192),L=n.callbacks,L===null?n.callbacks=[U]:L.push(U))}else L={lane:U,tag:m.tag,payload:m.payload,callback:m.callback,next:null},V===null?(B=V=L,N=G):V=V.next=L,o|=U;if(m=m.next,m===null){if(m=n.shared.pending,m===null)break;L=m,m=L.next,L.next=null,n.lastBaseUpdate=L,n.shared.pending=null}}while(!0);V===null&&(N=G),n.baseState=N,n.firstBaseUpdate=B,n.lastBaseUpdate=V,r===null&&(n.shared.lanes=0),Ca|=o,e.lanes=o,e.memoizedState=G}}function Td(e,t){if(typeof e!="function")throw Error(d(191,e));e.call(t)}function Cd(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Td(s[e],t)}var zs=Q(null),Bn=Q(0);function Rd(e,t){e=ua,se(Bn,e),se(zs,t),ua=e|t.baseLanes}function Ri(){se(Bn,ua),se(zs,zs.current)}function Di(){ua=Bn.current,ne(zs),ne(Bn)}var jt=Q(null),kt=null;function Sa(e){var t=e.alternate;se(Qe,Qe.current&1),se(jt,e),kt===null&&(t===null||zs.current!==null||t.memoizedState!==null)&&(kt=e)}function zi(e){se(Qe,Qe.current),se(jt,e),kt===null&&(kt=e)}function Dd(e){e.tag===22?(se(Qe,Qe.current),se(jt,e),kt===null&&(kt=e)):Aa()}function Aa(){se(Qe,Qe.current),se(jt,jt.current)}function wt(e){ne(jt),kt===e&&(kt=null),ne(Qe)}var Qe=Q(0);function Un(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Lc(s)||_c(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sa=0,ve=null,Ue=null,Ke=null,kn=!1,Ms=!1,es=!1,Ln=0,Cl=0,Os=null,sg=0;function Ye(){throw Error(d(321))}function Mi(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!vt(e[s],t[s]))return!1;return!0}function Oi(e,t,s,l,n,r){return sa=r,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,x.H=e===null||e.memoizedState===null?fu:Zi,es=!1,r=s(l,n),es=!1,Ms&&(r=Md(t,s,l,n)),zd(e),r}function zd(e){x.H=zl;var t=Ue!==null&&Ue.next!==null;if(sa=0,Ke=Ue=ve=null,kn=!1,Cl=0,Os=null,t)throw Error(d(300));e===null||Fe||(e=e.dependencies,e!==null&&Tn(e)&&(Fe=!0))}function Md(e,t,s,l){ve=e;var n=0;do{if(Ms&&(Os=null),Cl=0,Ms=!1,25<=n)throw Error(d(301));if(n+=1,Ke=Ue=null,e.updateQueue!=null){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}x.H=gu,r=t(s,l)}while(Ms);return r}function lg(){var e=x.H,t=e.useState()[0];return t=typeof t.then=="function"?Rl(t):t,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(ve.flags|=1024),t}function Bi(){var e=Ln!==0;return Ln=0,e}function Ui(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function ki(e){if(kn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}kn=!1}sa=0,Ke=Ue=ve=null,Ms=!1,Cl=Ln=0,Os=null}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?ve.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function Je(){if(Ue===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ke===null?ve.memoizedState:Ke.next;if(t!==null)Ke=t,Ue=e;else{if(e===null)throw ve.alternate===null?Error(d(467)):Error(d(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ke===null?ve.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function _n(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(e){var t=Cl;return Cl+=1,Os===null&&(Os=[]),e=jd(Os,e,t),t=ve,(Ke===null?t.memoizedState:Ke.next)===null&&(t=t.alternate,x.H=t===null||t.memoizedState===null?fu:Zi),e}function qn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Rl(e);if(e.$$typeof===P)return lt(e)}throw Error(d(438,String(e)))}function Li(e){var t=null,s=ve.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=_n(),ve.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=k;return t.index++,s}function la(e,t){return typeof t=="function"?t(e):t}function Hn(e){var t=Je();return _i(t,Ue,e)}function _i(e,t,s){var l=e.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=s;var n=e.baseQueue,r=l.pending;if(r!==null){if(n!==null){var o=n.next;n.next=r.next,r.next=o}t.baseQueue=n=r,l.pending=null}if(r=e.baseState,n===null)e.memoizedState=r;else{t=n.next;var m=o=null,N=null,B=t,V=!1;do{var G=B.lane&-536870913;if(G!==B.lane?(Ee&G)===G:(sa&G)===G){var U=B.revertLane;if(U===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),G===Ts&&(V=!0);else if((sa&U)===U){B=B.next,U===Ts&&(V=!0);continue}else G={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(m=N=G,o=r):N=N.next=G,ve.lanes|=U,Ca|=U;G=B.action,es&&s(r,G),r=B.hasEagerState?B.eagerState:s(r,G)}else U={lane:G,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(m=N=U,o=r):N=N.next=U,ve.lanes|=G,Ca|=G;B=B.next}while(B!==null&&B!==t);if(N===null?o=r:N.next=m,!vt(r,e.memoizedState)&&(Fe=!0,V&&(s=Cs,s!==null)))throw s;e.memoizedState=r,e.baseState=o,e.baseQueue=N,l.lastRenderedState=r}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function qi(e){var t=Je(),s=t.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var l=s.dispatch,n=s.pending,r=t.memoizedState;if(n!==null){s.pending=null;var o=n=n.next;do r=e(r,o.action),o=o.next;while(o!==n);vt(r,t.memoizedState)||(Fe=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),s.lastRenderedState=r}return[r,l]}function Od(e,t,s){var l=ve,n=Je(),r=Ce;if(r){if(s===void 0)throw Error(d(407));s=s()}else s=t();var o=!vt((Ue||n).memoizedState,s);if(o&&(n.memoizedState=s,Fe=!0),n=n.queue,Ii(kd.bind(null,l,n,e),[e]),n.getSnapshot!==t||o||Ke!==null&&Ke.memoizedState.tag&1){if(l.flags|=2048,Bs(9,{destroy:void 0},Ud.bind(null,l,n,s,t),null),_e===null)throw Error(d(349));r||(sa&127)!==0||Bd(l,t,s)}return s}function Bd(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ve.updateQueue,t===null?(t=_n(),ve.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Ud(e,t,s,l){t.value=s,t.getSnapshot=l,Ld(t)&&_d(e)}function kd(e,t,s){return s(function(){Ld(t)&&_d(e)})}function Ld(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!vt(e,s)}catch{return!0}}function _d(e){var t=Qa(e,2);t!==null&&yt(t,e,2)}function Hi(e){var t=dt();if(typeof e=="function"){var s=e;if(e=s(),es){tt(!0);try{s()}finally{tt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t}function qd(e,t,s,l){return e.baseState=s,_i(e,Ue,typeof l=="function"?l:la)}function ng(e,t,s,l,n){if(Yn(e))throw Error(d(485));if(e=t.action,e!==null){var r={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};x.T!==null?s(!0):r.isTransition=!1,l(r),s=t.pending,s===null?(r.next=t.pending=r,Hd(t,r)):(r.next=s.next,t.pending=s.next=r)}}function Hd(e,t){var s=t.action,l=t.payload,n=e.state;if(t.isTransition){var r=x.T,o={};x.T=o;try{var m=s(n,l),N=x.S;N!==null&&N(o,m),Vd(e,t,m)}catch(B){Vi(e,t,B)}finally{r!==null&&o.types!==null&&(r.types=o.types),x.T=r}}else try{r=s(n,l),Vd(e,t,r)}catch(B){Vi(e,t,B)}}function Vd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Id(e,t,l)},function(l){return Vi(e,t,l)}):Id(e,t,s)}function Id(e,t,s){t.status="fulfilled",t.value=s,Yd(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Hd(e,s)))}function Vi(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Yd(t),t=t.next;while(t!==l)}e.action=null}function Yd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gd(e,t){return t}function Qd(e,t){if(Ce){var s=_e.formState;if(s!==null){e:{var l=ve;if(Ce){if(qe){t:{for(var n=qe,r=Ut;n.nodeType!==8;){if(!r){n=null;break t}if(n=Lt(n.nextSibling),n===null){n=null;break t}}r=n.data,n=r==="F!"||r==="F"?n:null}if(n){qe=Lt(n.nextSibling),l=n.data==="F!";break e}}ya(l)}l=!1}l&&(t=s[0])}}return s=dt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gd,lastRenderedState:t},s.queue=l,s=du.bind(null,ve,l),l.dispatch=s,l=Hi(!1),r=Xi.bind(null,ve,!1,l.queue),l=dt(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,s=ng.bind(null,ve,n,r,s),n.dispatch=s,l.memoizedState=e,[t,s,!1]}function Jd(e){var t=Je();return Xd(t,Ue,e)}function Xd(e,t,s){if(t=_i(e,t,Gd)[0],e=Hn(la)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Rl(t)}catch(o){throw o===Rs?Dn:o}else l=t;t=Je();var n=t.queue,r=n.dispatch;return s!==t.memoizedState&&(ve.flags|=2048,Bs(9,{destroy:void 0},rg.bind(null,n,s),null)),[l,r,e]}function rg(e,t){e.action=t}function Zd(e){var t=Je(),s=Ue;if(s!==null)return Xd(t,s,e);Je(),t=t.memoizedState,s=Je();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function Bs(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=ve.updateQueue,t===null&&(t=_n(),ve.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function Kd(){return Je().memoizedState}function Vn(e,t,s,l){var n=dt();ve.flags|=e,n.memoizedState=Bs(1|t,{destroy:void 0},s,l===void 0?null:l)}function In(e,t,s,l){var n=Je();l=l===void 0?null:l;var r=n.memoizedState.inst;Ue!==null&&l!==null&&Mi(l,Ue.memoizedState.deps)?n.memoizedState=Bs(t,r,s,l):(ve.flags|=e,n.memoizedState=Bs(1|t,r,s,l))}function Fd(e,t){Vn(8390656,8,e,t)}function Ii(e,t){In(2048,8,e,t)}function ig(e){ve.flags|=4;var t=ve.updateQueue;if(t===null)t=_n(),ve.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function $d(e){var t=Je().memoizedState;return ig({ref:t,nextImpl:e}),function(){if((ze&2)!==0)throw Error(d(440));return t.impl.apply(void 0,arguments)}}function Pd(e,t){return In(4,2,e,t)}function Wd(e,t){return In(4,4,e,t)}function eu(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tu(e,t,s){s=s!=null?s.concat([e]):null,In(4,4,eu.bind(null,t,e),s)}function Yi(){}function au(e,t){var s=Je();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&Mi(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function su(e,t){var s=Je();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&Mi(t,l[1]))return l[0];if(l=e(),es){tt(!0);try{e()}finally{tt(!1)}}return s.memoizedState=[l,t],l}function Gi(e,t,s){return s===void 0||(sa&1073741824)!==0&&(Ee&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=lm(),ve.lanes|=e,Ca|=e,s)}function lu(e,t,s,l){return vt(s,t)?s:zs.current!==null?(e=Gi(e,s,l),vt(e,t)||(Fe=!0),e):(sa&42)===0||(sa&1073741824)!==0&&(Ee&261930)===0?(Fe=!0,e.memoizedState=s):(e=lm(),ve.lanes|=e,Ca|=e,t)}function nu(e,t,s,l,n){var r=F.p;F.p=r!==0&&8>r?r:8;var o=x.T,m={};x.T=m,Xi(e,!1,t,s);try{var N=n(),B=x.S;if(B!==null&&B(m,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var V=ag(N,l);Dl(e,t,V,Et(e))}else Dl(e,t,l,Et(e))}catch(G){Dl(e,t,{then:function(){},status:"rejected",reason:G},Et())}finally{F.p=r,o!==null&&m.types!==null&&(o.types=m.types),x.T=o}}function cg(){}function Qi(e,t,s,l){if(e.tag!==5)throw Error(d(476));var n=ru(e).queue;nu(e,n,t,y,s===null?cg:function(){return iu(e),s(l)})}function ru(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:y},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function iu(e){var t=ru(e);t.next===null&&(t=e.alternate.memoizedState),Dl(e,t.next.queue,{},Et())}function Ji(){return lt(Xl)}function cu(){return Je().memoizedState}function ou(){return Je().memoizedState}function og(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Et();e=ja(s);var l=wa(t,e,s);l!==null&&(yt(l,t,s),Al(l,t,s)),t={cache:Ni()},e.payload=t;return}t=t.return}}function dg(e,t,s){var l=Et();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Yn(e)?uu(t,s):(s=di(e,t,s,l),s!==null&&(yt(s,e,l),mu(s,t,l)))}function du(e,t,s){var l=Et();Dl(e,t,s,l)}function Dl(e,t,s,l){var n={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Yn(e))uu(t,n);else{var r=e.alternate;if(e.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,m=r(o,s);if(n.hasEagerState=!0,n.eagerState=m,vt(m,o))return wn(e,t,n,0),_e===null&&jn(),!1}catch{}finally{}if(s=di(e,t,n,l),s!==null)return yt(s,e,l),mu(s,t,l),!0}return!1}function Xi(e,t,s,l){if(l={lane:2,revertLane:Ac(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yn(e)){if(t)throw Error(d(479))}else t=di(e,s,l,2),t!==null&&yt(t,e,2)}function Yn(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function uu(e,t){Ms=kn=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function mu(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,po(e,s)}}var zl={readContext:lt,use:qn,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useLayoutEffect:Ye,useInsertionEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useSyncExternalStore:Ye,useId:Ye,useHostTransitionStatus:Ye,useFormState:Ye,useActionState:Ye,useOptimistic:Ye,useMemoCache:Ye,useCacheRefresh:Ye};zl.useEffectEvent=Ye;var fu={readContext:lt,use:qn,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:lt,useEffect:Fd,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Vn(4194308,4,eu.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Vn(4194308,4,e,t)},useInsertionEffect:function(e,t){Vn(4,2,e,t)},useMemo:function(e,t){var s=dt();t=t===void 0?null:t;var l=e();if(es){tt(!0);try{e()}finally{tt(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=dt();if(s!==void 0){var n=s(t);if(es){tt(!0);try{s(t)}finally{tt(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=dg.bind(null,ve,e),[l.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:function(e){e=Hi(e);var t=e.queue,s=du.bind(null,ve,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:Yi,useDeferredValue:function(e,t){var s=dt();return Gi(s,e,t)},useTransition:function(){var e=Hi(!1);return e=nu.bind(null,ve,e.queue,!0,!1),dt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=ve,n=dt();if(Ce){if(s===void 0)throw Error(d(407));s=s()}else{if(s=t(),_e===null)throw Error(d(349));(Ee&127)!==0||Bd(l,t,s)}n.memoizedState=s;var r={value:s,getSnapshot:t};return n.queue=r,Fd(kd.bind(null,l,r,e),[e]),l.flags|=2048,Bs(9,{destroy:void 0},Ud.bind(null,l,r,s,t),null),s},useId:function(){var e=dt(),t=_e.identifierPrefix;if(Ce){var s=Jt,l=Qt;s=(l&~(1<<32-mt(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=Ln++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=sg++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ji,useFormState:Qd,useActionState:Qd,useOptimistic:function(e){var t=dt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Xi.bind(null,ve,!0,s),s.dispatch=t,[e,t]},useMemoCache:Li,useCacheRefresh:function(){return dt().memoizedState=og.bind(null,ve)},useEffectEvent:function(e){var t=dt(),s={impl:e};return t.memoizedState=s,function(){if((ze&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},Zi={readContext:lt,use:qn,useCallback:au,useContext:lt,useEffect:Ii,useImperativeHandle:tu,useInsertionEffect:Pd,useLayoutEffect:Wd,useMemo:su,useReducer:Hn,useRef:Kd,useState:function(){return Hn(la)},useDebugValue:Yi,useDeferredValue:function(e,t){var s=Je();return lu(s,Ue.memoizedState,e,t)},useTransition:function(){var e=Hn(la)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:Rl(e),t]},useSyncExternalStore:Od,useId:cu,useHostTransitionStatus:Ji,useFormState:Jd,useActionState:Jd,useOptimistic:function(e,t){var s=Je();return qd(s,Ue,e,t)},useMemoCache:Li,useCacheRefresh:ou};Zi.useEffectEvent=$d;var gu={readContext:lt,use:qn,useCallback:au,useContext:lt,useEffect:Ii,useImperativeHandle:tu,useInsertionEffect:Pd,useLayoutEffect:Wd,useMemo:su,useReducer:qi,useRef:Kd,useState:function(){return qi(la)},useDebugValue:Yi,useDeferredValue:function(e,t){var s=Je();return Ue===null?Gi(s,e,t):lu(s,Ue.memoizedState,e,t)},useTransition:function(){var e=qi(la)[0],t=Je().memoizedState;return[typeof e=="boolean"?e:Rl(e),t]},useSyncExternalStore:Od,useId:cu,useHostTransitionStatus:Ji,useFormState:Zd,useActionState:Zd,useOptimistic:function(e,t){var s=Je();return Ue!==null?qd(s,Ue,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Li,useCacheRefresh:ou};gu.useEffectEvent=$d;function Ki(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:g({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Fi={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Et(),n=ja(l);n.payload=t,s!=null&&(n.callback=s),t=wa(e,n,l),t!==null&&(yt(t,e,l),Al(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Et(),n=ja(l);n.tag=1,n.payload=t,s!=null&&(n.callback=s),t=wa(e,n,l),t!==null&&(yt(t,e,l),Al(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Et(),l=ja(s);l.tag=2,t!=null&&(l.callback=t),t=wa(e,l,s),t!==null&&(yt(t,e,s),Al(t,e,s))}};function hu(e,t,s,l,n,r,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,r,o):t.prototype&&t.prototype.isPureReactComponent?!pl(s,l)||!pl(n,r):!0}function xu(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Fi.enqueueReplaceState(t,t.state,null)}function ts(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=g({},s));for(var n in e)s[n]===void 0&&(s[n]=e[n])}return s}function pu(e){Nn(e)}function bu(e){console.error(e)}function yu(e){Nn(e)}function Gn(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function vu(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function $i(e,t,s){return s=ja(s),s.tag=3,s.payload={element:null},s.callback=function(){Gn(e,t)},s}function Nu(e){return e=ja(e),e.tag=3,e}function ju(e,t,s,l){var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var r=l.value;e.payload=function(){return n(r)},e.callback=function(){vu(t,s,l)}}var o=s.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(e.callback=function(){vu(t,s,l),typeof n!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var m=l.stack;this.componentDidCatch(l.value,{componentStack:m!==null?m:""})})}function ug(e,t,s,l,n){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Es(t,s,n,!0),s=jt.current,s!==null){switch(s.tag){case 31:case 13:return kt===null?ar():s.alternate===null&&Ge===0&&(Ge=3),s.flags&=-257,s.flags|=65536,s.lanes=n,l===zn?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),jc(e,l,n)),!1;case 22:return s.flags|=65536,l===zn?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),jc(e,l,n)),!1}throw Error(d(435,s.tag))}return jc(e,l,n),ar(),!1}if(Ce)return t=jt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==xi&&(e=Error(d(422),{cause:l}),vl(Mt(e,s)))):(l!==xi&&(t=Error(d(423),{cause:l}),vl(Mt(t,s))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=Mt(l,s),n=$i(e.stateNode,l,n),Ti(e,n),Ge!==4&&(Ge=2)),!1;var r=Error(d(520),{cause:l});if(r=Mt(r,s),ql===null?ql=[r]:ql.push(r),Ge!==4&&(Ge=2),t===null)return!0;l=Mt(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=n&-n,s.lanes|=e,e=$i(s.stateNode,l,e),Ti(s,e),!1;case 1:if(t=s.type,r=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Ra===null||!Ra.has(r))))return s.flags|=65536,n&=-n,s.lanes|=n,n=Nu(n),ju(n,e,s,l),Ti(s,n),!1}s=s.return}while(s!==null);return!1}var Pi=Error(d(461)),Fe=!1;function nt(e,t,s,l){t.child=e===null?Ed(t,null,s,l):Wa(t,e.child,s,l)}function wu(e,t,s,l,n){s=s.render;var r=t.ref;if("ref"in l){var o={};for(var m in l)m!=="ref"&&(o[m]=l[m])}else o=l;return Ka(t),l=Oi(e,t,s,o,r,n),m=Bi(),e!==null&&!Fe?(Ui(e,t,n),na(e,t,n)):(Ce&&m&&gi(t),t.flags|=1,nt(e,t,l,n),t.child)}function Su(e,t,s,l,n){if(e===null){var r=s.type;return typeof r=="function"&&!ui(r)&&r.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=r,Au(e,t,r,l,n)):(e=An(s.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(r=e.child,!rc(e,n)){var o=r.memoizedProps;if(s=s.compare,s=s!==null?s:pl,s(o,l)&&e.ref===t.ref)return na(e,t,n)}return t.flags|=1,e=Wt(r,l),e.ref=t.ref,e.return=t,t.child=e}function Au(e,t,s,l,n){if(e!==null){var r=e.memoizedProps;if(pl(r,l)&&e.ref===t.ref)if(Fe=!1,t.pendingProps=l=r,rc(e,n))(e.flags&131072)!==0&&(Fe=!0);else return t.lanes=e.lanes,na(e,t,n)}return Wi(e,t,s,l,n)}function Eu(e,t,s,l){var n=l.children,r=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(r=r!==null?r.baseLanes|s:s,e!==null){for(l=t.child=e.child,n=0;l!==null;)n=n|l.lanes|l.childLanes,l=l.sibling;l=n&~r}else l=0,t.child=null;return Tu(e,t,r,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Rn(t,r!==null?r.cachePool:null),r!==null?Rd(t,r):Ri(),Dd(t);else return l=t.lanes=536870912,Tu(e,t,r!==null?r.baseLanes|s:s,s,l)}else r!==null?(Rn(t,r.cachePool),Rd(t,r),Aa(),t.memoizedState=null):(e!==null&&Rn(t,null),Ri(),Aa());return nt(e,t,n,s),t.child}function Ml(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Tu(e,t,s,l,n){var r=wi();return r=r===null?null:{parent:Ze._currentValue,pool:r},t.memoizedState={baseLanes:s,cachePool:r},e!==null&&Rn(t,null),Ri(),Dd(t),e!==null&&Es(e,t,l,!0),t.childLanes=n,null}function Qn(e,t){return t=Xn({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Cu(e,t,s){return Wa(t,e.child,null,s),e=Qn(t,t.pendingProps),e.flags|=2,wt(t),t.memoizedState=null,e}function mg(e,t,s){var l=t.pendingProps,n=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ce){if(l.mode==="hidden")return e=Qn(t,l),t.lanes=536870912,Ml(null,e);if(zi(t),(e=qe)?(e=Hm(e,Ut),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pa!==null?{id:Qt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},s=ud(e),s.return=t,t.child=s,st=t,qe=null)):e=null,e===null)throw ya(t);return t.lanes=536870912,null}return Qn(t,l)}var r=e.memoizedState;if(r!==null){var o=r.dehydrated;if(zi(t),n)if(t.flags&256)t.flags&=-257,t=Cu(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(d(558));else if(Fe||Es(e,t,s,!1),n=(s&e.childLanes)!==0,Fe||n){if(l=_e,l!==null&&(o=bo(l,s),o!==0&&o!==r.retryLane))throw r.retryLane=o,Qa(e,o),yt(l,e,o),Pi;ar(),t=Cu(e,t,s)}else e=r.treeContext,qe=Lt(o.nextSibling),st=t,Ce=!0,ba=null,Ut=!1,e!==null&&gd(t,e),t=Qn(t,l),t.flags|=4096;return t}return e=Wt(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Jn(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Wi(e,t,s,l,n){return Ka(t),s=Oi(e,t,s,l,void 0,n),l=Bi(),e!==null&&!Fe?(Ui(e,t,n),na(e,t,n)):(Ce&&l&&gi(t),t.flags|=1,nt(e,t,s,n),t.child)}function Ru(e,t,s,l,n,r){return Ka(t),t.updateQueue=null,s=Md(t,l,s,n),zd(e),l=Bi(),e!==null&&!Fe?(Ui(e,t,r),na(e,t,r)):(Ce&&l&&gi(t),t.flags|=1,nt(e,t,s,r),t.child)}function Du(e,t,s,l,n){if(Ka(t),t.stateNode===null){var r=js,o=s.contextType;typeof o=="object"&&o!==null&&(r=lt(o)),r=new s(l,r),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Fi,t.stateNode=r,r._reactInternals=t,r=t.stateNode,r.props=l,r.state=t.memoizedState,r.refs={},Ai(t),o=s.contextType,r.context=typeof o=="object"&&o!==null?lt(o):js,r.state=t.memoizedState,o=s.getDerivedStateFromProps,typeof o=="function"&&(Ki(t,s,o,l),r.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&Fi.enqueueReplaceState(r,r.state,null),Tl(t,l,r,n),El(),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){r=t.stateNode;var m=t.memoizedProps,N=ts(s,m);r.props=N;var B=r.context,V=s.contextType;o=js,typeof V=="object"&&V!==null&&(o=lt(V));var G=s.getDerivedStateFromProps;V=typeof G=="function"||typeof r.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,V||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(m||B!==o)&&xu(t,r,l,o),Na=!1;var U=t.memoizedState;r.state=U,Tl(t,l,r,n),El(),B=t.memoizedState,m||U!==B||Na?(typeof G=="function"&&(Ki(t,s,G,l),B=t.memoizedState),(N=Na||hu(t,s,N,l,U,B,o))?(V||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(t.flags|=4194308)):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=B),r.props=l,r.state=B,r.context=o,l=N):(typeof r.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{r=t.stateNode,Ei(e,t),o=t.memoizedProps,V=ts(s,o),r.props=V,G=t.pendingProps,U=r.context,B=s.contextType,N=js,typeof B=="object"&&B!==null&&(N=lt(B)),m=s.getDerivedStateFromProps,(B=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==G||U!==N)&&xu(t,r,l,N),Na=!1,U=t.memoizedState,r.state=U,Tl(t,l,r,n),El();var L=t.memoizedState;o!==G||U!==L||Na||e!==null&&e.dependencies!==null&&Tn(e.dependencies)?(typeof m=="function"&&(Ki(t,s,m,l),L=t.memoizedState),(V=Na||hu(t,s,V,l,U,L,N)||e!==null&&e.dependencies!==null&&Tn(e.dependencies))?(B||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(l,L,N),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(l,L,N)),typeof r.componentDidUpdate=="function"&&(t.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=L),r.props=l,r.state=L,r.context=N,l=V):(typeof r.componentDidUpdate!="function"||o===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),l=!1)}return r=l,Jn(e,t),l=(t.flags&128)!==0,r||l?(r=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:r.render(),t.flags|=1,e!==null&&l?(t.child=Wa(t,e.child,null,n),t.child=Wa(t,null,s,n)):nt(e,t,s,n),t.memoizedState=r.state,e=t.child):e=na(e,t,n),e}function zu(e,t,s,l){return Xa(),t.flags|=256,nt(e,t,s,l),t.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tc(e){return{baseLanes:e,cachePool:vd()}}function ac(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=At),e}function Mu(e,t,s){var l=t.pendingProps,n=!1,r=(t.flags&128)!==0,o;if((o=r)||(o=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),o&&(n=!0,t.flags&=-129),o=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ce){if(n?Sa(t):Aa(),(e=qe)?(e=Hm(e,Ut),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:pa!==null?{id:Qt,overflow:Jt}:null,retryLane:536870912,hydrationErrors:null},s=ud(e),s.return=t,t.child=s,st=t,qe=null)):e=null,e===null)throw ya(t);return _c(e)?t.lanes=32:t.lanes=536870912,null}var m=l.children;return l=l.fallback,n?(Aa(),n=t.mode,m=Xn({mode:"hidden",children:m},n),l=Ja(l,n,s,null),m.return=t,l.return=t,m.sibling=l,t.child=m,l=t.child,l.memoizedState=tc(s),l.childLanes=ac(e,o,s),t.memoizedState=ec,Ml(null,l)):(Sa(t),sc(t,m))}var N=e.memoizedState;if(N!==null&&(m=N.dehydrated,m!==null)){if(r)t.flags&256?(Sa(t),t.flags&=-257,t=lc(e,t,s)):t.memoizedState!==null?(Aa(),t.child=e.child,t.flags|=128,t=null):(Aa(),m=l.fallback,n=t.mode,l=Xn({mode:"visible",children:l.children},n),m=Ja(m,n,s,null),m.flags|=2,l.return=t,m.return=t,l.sibling=m,t.child=l,Wa(t,e.child,null,s),l=t.child,l.memoizedState=tc(s),l.childLanes=ac(e,o,s),t.memoizedState=ec,t=Ml(null,l));else if(Sa(t),_c(m)){if(o=m.nextSibling&&m.nextSibling.dataset,o)var B=o.dgst;o=B,l=Error(d(419)),l.stack="",l.digest=o,vl({value:l,source:null,stack:null}),t=lc(e,t,s)}else if(Fe||Es(e,t,s,!1),o=(s&e.childLanes)!==0,Fe||o){if(o=_e,o!==null&&(l=bo(o,s),l!==0&&l!==N.retryLane))throw N.retryLane=l,Qa(e,l),yt(o,e,l),Pi;Lc(m)||ar(),t=lc(e,t,s)}else Lc(m)?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,qe=Lt(m.nextSibling),st=t,Ce=!0,ba=null,Ut=!1,e!==null&&gd(t,e),t=sc(t,l.children),t.flags|=4096);return t}return n?(Aa(),m=l.fallback,n=t.mode,N=e.child,B=N.sibling,l=Wt(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,B!==null?m=Wt(B,m):(m=Ja(m,n,s,null),m.flags|=2),m.return=t,l.return=t,l.sibling=m,t.child=l,Ml(null,l),l=t.child,m=e.child.memoizedState,m===null?m=tc(s):(n=m.cachePool,n!==null?(N=Ze._currentValue,n=n.parent!==N?{parent:N,pool:N}:n):n=vd(),m={baseLanes:m.baseLanes|s,cachePool:n}),l.memoizedState=m,l.childLanes=ac(e,o,s),t.memoizedState=ec,Ml(e.child,l)):(Sa(t),s=e.child,e=s.sibling,s=Wt(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(o=t.deletions,o===null?(t.deletions=[e],t.flags|=16):o.push(e)),t.child=s,t.memoizedState=null,s)}function sc(e,t){return t=Xn({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Xn(e,t){return e=Nt(22,e,null,t),e.lanes=0,e}function lc(e,t,s){return Wa(t,e.child,null,s),e=sc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ou(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),yi(e.return,t,s)}function nc(e,t,s,l,n,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:n,treeForkCount:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=l,o.tail=s,o.tailMode=n,o.treeForkCount=r)}function Bu(e,t,s){var l=t.pendingProps,n=l.revealOrder,r=l.tail;l=l.children;var o=Qe.current,m=(o&2)!==0;if(m?(o=o&1|2,t.flags|=128):o&=1,se(Qe,o),nt(e,t,l,s),l=Ce?yl:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ou(e,s,t);else if(e.tag===19)Ou(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&Un(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),nc(t,!1,n,s,r,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Un(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}nc(t,!0,s,null,r,l);break;case"together":nc(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function na(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ca|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Es(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,s=Wt(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Wt(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function rc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Tn(e)))}function fg(e,t,s){switch(t.tag){case 3:te(t,t.stateNode.containerInfo),va(t,Ze,e.memoizedState.cache),Xa();break;case 27:case 5:re(t);break;case 4:te(t,t.stateNode.containerInfo);break;case 10:va(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,zi(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Sa(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Mu(e,t,s):(Sa(t),e=na(e,t,s),e!==null?e.sibling:null);Sa(t);break;case 19:var n=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Es(e,t,s,!1),l=(s&t.childLanes)!==0),n){if(l)return Bu(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),se(Qe,Qe.current),l)break;return null;case 22:return t.lanes=0,Eu(e,t,s,t.pendingProps);case 24:va(t,Ze,e.memoizedState.cache)}return na(e,t,s)}function Uu(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Fe=!0;else{if(!rc(e,s)&&(t.flags&128)===0)return Fe=!1,fg(e,t,s);Fe=(e.flags&131072)!==0}else Fe=!1,Ce&&(t.flags&1048576)!==0&&fd(t,yl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=$a(t.elementType),t.type=e,typeof e=="function")ui(e)?(l=ts(e,l),t.tag=1,t=Du(null,t,e,l,s)):(t.tag=0,t=Wi(null,t,e,l,s));else{if(e!=null){var n=e.$$typeof;if(n===H){t.tag=11,t=wu(null,t,e,l,s);break e}else if(n===Z){t.tag=14,t=Su(null,t,e,l,s);break e}}throw t=ge(e)||e,Error(d(306,t,""))}}return t;case 0:return Wi(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,n=ts(l,t.pendingProps),Du(e,t,l,n,s);case 3:e:{if(te(t,t.stateNode.containerInfo),e===null)throw Error(d(387));l=t.pendingProps;var r=t.memoizedState;n=r.element,Ei(e,t),Tl(t,l,null,s);var o=t.memoizedState;if(l=o.cache,va(t,Ze,l),l!==r.cache&&vi(t,[Ze],s,!0),El(),l=o.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){t=zu(e,t,l,s);break e}else if(l!==n){n=Mt(Error(d(424)),t),vl(n),t=zu(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=Lt(e.firstChild),st=t,Ce=!0,ba=null,Ut=!0,s=Ed(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Xa(),l===n){t=na(e,t,s);break e}nt(e,t,l,s)}t=t.child}return t;case 26:return Jn(e,t),e===null?(s=Jm(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ce||(s=t.type,e=t.pendingProps,l=or(X.current).createElement(s),l[at]=t,l[ft]=e,rt(l,s,e),We(l),t.stateNode=l):t.memoizedState=Jm(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return re(t),e===null&&Ce&&(l=t.stateNode=Ym(t.type,t.pendingProps,X.current),st=t,Ut=!0,n=qe,Oa(t.type)?(qc=n,qe=Lt(l.firstChild)):qe=n),nt(e,t,t.pendingProps.children,s),Jn(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ce&&((n=l=qe)&&(l=Yg(l,t.type,t.pendingProps,Ut),l!==null?(t.stateNode=l,st=t,qe=Lt(l.firstChild),Ut=!1,n=!0):n=!1),n||ya(t)),re(t),n=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,l=r.children,Bc(n,r)?l=null:o!==null&&Bc(n,o)&&(t.flags|=32),t.memoizedState!==null&&(n=Oi(e,t,lg,null,null,s),Xl._currentValue=n),Jn(e,t),nt(e,t,l,s),t.child;case 6:return e===null&&Ce&&((e=s=qe)&&(s=Gg(s,t.pendingProps,Ut),s!==null?(t.stateNode=s,st=t,qe=null,e=!0):e=!1),e||ya(t)),null;case 13:return Mu(e,t,s);case 4:return te(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Wa(t,null,l,s):nt(e,t,l,s),t.child;case 11:return wu(e,t,t.type,t.pendingProps,s);case 7:return nt(e,t,t.pendingProps,s),t.child;case 8:return nt(e,t,t.pendingProps.children,s),t.child;case 12:return nt(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,va(t,t.type,l.value),nt(e,t,l.children,s),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,Ka(t),n=lt(n),l=l(n),t.flags|=1,nt(e,t,l,s),t.child;case 14:return Su(e,t,t.type,t.pendingProps,s);case 15:return Au(e,t,t.type,t.pendingProps,s);case 19:return Bu(e,t,s);case 31:return mg(e,t,s);case 22:return Eu(e,t,s,t.pendingProps);case 24:return Ka(t),l=lt(Ze),e===null?(n=wi(),n===null&&(n=_e,r=Ni(),n.pooledCache=r,r.refCount++,r!==null&&(n.pooledCacheLanes|=s),n=r),t.memoizedState={parent:l,cache:n},Ai(t),va(t,Ze,n)):((e.lanes&s)!==0&&(Ei(e,t),Tl(t,null,null,s),El()),n=e.memoizedState,r=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),va(t,Ze,l)):(l=r.cache,va(t,Ze,l),l!==n.cache&&vi(t,[Ze],s,!0))),nt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(d(156,t.tag))}function ra(e){e.flags|=4}function ic(e,t,s,l,n){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(n&335544128)===n)if(e.stateNode.complete)e.flags|=8192;else if(cm())e.flags|=8192;else throw Pa=zn,Si}else e.flags&=-16777217}function ku(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!$m(t))if(cm())e.flags|=8192;else throw Pa=zn,Si}function Zn(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ho():536870912,e.lanes|=t,_s|=t)}function Ol(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function He(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function gg(e,t,s){var l=t.pendingProps;switch(hi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(t),null;case 1:return He(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),aa(Ze),Be(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(As(t)?ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pi())),He(t),null;case 26:var n=t.type,r=t.memoizedState;return e===null?(ra(t),r!==null?(He(t),ku(t,r)):(He(t),ic(t,n,null,l,s))):r?r!==e.memoizedState?(ra(t),He(t),ku(t,r)):(He(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&ra(t),He(t),ic(t,n,e,l,s)),null;case 27:if(ut(t),s=X.current,n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ra(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return He(t),null}e=ce.current,As(t)?hd(t):(e=Ym(n,l,s),t.stateNode=e,ra(t))}return He(t),null;case 5:if(ut(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ra(t);else{if(!l){if(t.stateNode===null)throw Error(d(166));return He(t),null}if(r=ce.current,As(t))hd(t);else{var o=or(X.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof l.is=="string"?o.createElement("select",{is:l.is}):o.createElement("select"),l.multiple?r.multiple=!0:l.size&&(r.size=l.size);break;default:r=typeof l.is=="string"?o.createElement(n,{is:l.is}):o.createElement(n)}}r[at]=t,r[ft]=l;e:for(o=t.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=r;e:switch(rt(r,n,l),n){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ra(t)}}return He(t),ic(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ra(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(d(166));if(e=X.current,As(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,n=st,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[at]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Mm(e.nodeValue,s)),e||ya(t,!0)}else e=or(e).createTextNode(l),e[at]=t,t.stateNode=e}return He(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=As(t),s!==null){if(e===null){if(!l)throw Error(d(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[at]=t}else Xa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),e=!1}else s=pi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(wt(t),t):(wt(t),null);if((t.flags&128)!==0)throw Error(d(558))}return He(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=As(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(d(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(d(317));n[at]=t}else Xa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;He(t),n=!1}else n=pi(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(wt(t),t):(wt(t),null)}return wt(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==n&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Zn(t,t.updateQueue),He(t),null);case 4:return Be(),e===null&&Rc(t.stateNode.containerInfo),He(t),null;case 10:return aa(t.type),He(t),null;case 19:if(ne(Qe),l=t.memoizedState,l===null)return He(t),null;if(n=(t.flags&128)!==0,r=l.rendering,r===null)if(n)Ol(l,!1);else{if(Ge!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(r=Un(e),r!==null){for(t.flags|=128,Ol(l,!1),e=r.updateQueue,t.updateQueue=e,Zn(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)dd(s,e),s=s.sibling;return se(Qe,Qe.current&1|2),Ce&&ea(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&ot()>Wn&&(t.flags|=128,n=!0,Ol(l,!1),t.lanes=4194304)}else{if(!n)if(e=Un(r),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Zn(t,e),Ol(l,!0),l.tail===null&&l.tailMode==="hidden"&&!r.alternate&&!Ce)return He(t),null}else 2*ot()-l.renderingStartTime>Wn&&s!==536870912&&(t.flags|=128,n=!0,Ol(l,!1),t.lanes=4194304);l.isBackwards?(r.sibling=t.child,t.child=r):(e=l.last,e!==null?e.sibling=r:t.child=r,l.last=r)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=ot(),e.sibling=null,s=Qe.current,se(Qe,n?s&1|2:s&1),Ce&&ea(t,l.treeForkCount),e):(He(t),null);case 22:case 23:return wt(t),Di(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(He(t),t.subtreeFlags&6&&(t.flags|=8192)):He(t),s=t.updateQueue,s!==null&&Zn(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&ne(Fa),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),aa(Ze),He(t),null;case 25:return null;case 30:return null}throw Error(d(156,t.tag))}function hg(e,t){switch(hi(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aa(Ze),Be(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ut(t),null;case 31:if(t.memoizedState!==null){if(wt(t),t.alternate===null)throw Error(d(340));Xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));Xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ne(Qe),null;case 4:return Be(),null;case 10:return aa(t.type),null;case 22:case 23:return wt(t),Di(),e!==null&&ne(Fa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return aa(Ze),null;case 25:return null;default:return null}}function Lu(e,t){switch(hi(t),t.tag){case 3:aa(Ze),Be();break;case 26:case 27:case 5:ut(t);break;case 4:Be();break;case 31:t.memoizedState!==null&&wt(t);break;case 13:wt(t);break;case 19:ne(Qe);break;case 10:aa(t.type);break;case 22:case 23:wt(t),Di(),e!==null&&ne(Fa);break;case 24:aa(Ze)}}function Bl(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var n=l.next;s=n;do{if((s.tag&e)===e){l=void 0;var r=s.create,o=s.inst;l=r(),o.destroy=l}s=s.next}while(s!==n)}}catch(m){Oe(t,t.return,m)}}function Ea(e,t,s){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var r=n.next;l=r;do{if((l.tag&e)===e){var o=l.inst,m=o.destroy;if(m!==void 0){o.destroy=void 0,n=t;var N=s,B=m;try{B()}catch(V){Oe(n,N,V)}}}l=l.next}while(l!==r)}}catch(V){Oe(t,t.return,V)}}function _u(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Cd(t,s)}catch(l){Oe(e,e.return,l)}}}function qu(e,t,s){s.props=ts(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Oe(e,t,l)}}function Ul(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(n){Oe(e,t,n)}}function Xt(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(n){Oe(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(n){Oe(e,t,n)}else s.current=null}function Hu(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(n){Oe(e,e.return,n)}}function cc(e,t,s){try{var l=e.stateNode;Lg(l,e.type,s,t),l[ft]=t}catch(n){Oe(e,e.return,n)}}function Vu(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Oa(e.type)||e.tag===4}function oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Vu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Oa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dc(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=$t));else if(l!==4&&(l===27&&Oa(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(dc(e,t,s),e=e.sibling;e!==null;)dc(e,t,s),e=e.sibling}function Kn(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&Oa(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Kn(e,t,s),e=e.sibling;e!==null;)Kn(e,t,s),e=e.sibling}function Iu(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);rt(t,l,s),t[at]=e,t[ft]=s}catch(r){Oe(e,e.return,r)}}var ia=!1,$e=!1,uc=!1,Yu=typeof WeakSet=="function"?WeakSet:Set,et=null;function xg(e,t){if(e=e.containerInfo,Mc=xr,e=td(e),li(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{s.nodeType,r.nodeType}catch{s=null;break e}var o=0,m=-1,N=-1,B=0,V=0,G=e,U=null;t:for(;;){for(var L;G!==s||n!==0&&G.nodeType!==3||(m=o+n),G!==r||l!==0&&G.nodeType!==3||(N=o+l),G.nodeType===3&&(o+=G.nodeValue.length),(L=G.firstChild)!==null;)U=G,G=L;for(;;){if(G===e)break t;if(U===s&&++B===n&&(m=o),U===r&&++V===l&&(N=o),(L=G.nextSibling)!==null)break;G=U,U=G.parentNode}G=L}s=m===-1||N===-1?null:{start:m,end:N}}else s=null}s=s||{start:0,end:0}}else s=null;for(Oc={focusedElem:e,selectionRange:s},xr=!1,et=t;et!==null;)if(t=et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,et=e;else for(;et!==null;){switch(t=et,r=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)n=e[s],n.ref.impl=n.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&r!==null){e=void 0,s=t,n=r.memoizedProps,r=r.memoizedState,l=s.stateNode;try{var oe=ts(s.type,n);e=l.getSnapshotBeforeUpdate(oe,r),l.__reactInternalSnapshotBeforeUpdate=e}catch(be){Oe(s,s.return,be)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)kc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":kc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=t.sibling,e!==null){e.return=t.return,et=e;break}et=t.return}}function Gu(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:oa(e,s),l&4&&Bl(5,s);break;case 1:if(oa(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(o){Oe(s,s.return,o)}else{var n=ts(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Oe(s,s.return,o)}}l&64&&_u(s),l&512&&Ul(s,s.return);break;case 3:if(oa(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Cd(e,t)}catch(o){Oe(s,s.return,o)}}break;case 27:t===null&&l&4&&Iu(s);case 26:case 5:oa(e,s),t===null&&l&4&&Hu(s),l&512&&Ul(s,s.return);break;case 12:oa(e,s);break;case 31:oa(e,s),l&4&&Xu(e,s);break;case 13:oa(e,s),l&4&&Zu(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Ag.bind(null,s),Qg(e,s))));break;case 22:if(l=s.memoizedState!==null||ia,!l){t=t!==null&&t.memoizedState!==null||$e,n=ia;var r=$e;ia=l,($e=t)&&!r?da(e,s,(s.subtreeFlags&8772)!==0):oa(e,s),ia=n,$e=r}break;case 30:break;default:oa(e,s)}}function Qu(e){var t=e.alternate;t!==null&&(e.alternate=null,Qu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Vr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ve=null,ht=!1;function ca(e,t,s){for(s=s.child;s!==null;)Ju(e,t,s),s=s.sibling}function Ju(e,t,s){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Kt,s)}catch{}switch(s.tag){case 26:$e||Xt(s,t),ca(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:$e||Xt(s,t);var l=Ve,n=ht;Oa(s.type)&&(Ve=s.stateNode,ht=!1),ca(e,t,s),Gl(s.stateNode),Ve=l,ht=n;break;case 5:$e||Xt(s,t);case 6:if(l=Ve,n=ht,Ve=null,ca(e,t,s),Ve=l,ht=n,Ve!==null)if(ht)try{(Ve.nodeType===9?Ve.body:Ve.nodeName==="HTML"?Ve.ownerDocument.body:Ve).removeChild(s.stateNode)}catch(r){Oe(s,t,r)}else try{Ve.removeChild(s.stateNode)}catch(r){Oe(s,t,r)}break;case 18:Ve!==null&&(ht?(e=Ve,_m(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Js(e)):_m(Ve,s.stateNode));break;case 4:l=Ve,n=ht,Ve=s.stateNode.containerInfo,ht=!0,ca(e,t,s),Ve=l,ht=n;break;case 0:case 11:case 14:case 15:Ea(2,s,t),$e||Ea(4,s,t),ca(e,t,s);break;case 1:$e||(Xt(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&qu(s,t,l)),ca(e,t,s);break;case 21:ca(e,t,s);break;case 22:$e=(l=$e)||s.memoizedState!==null,ca(e,t,s),$e=l;break;default:ca(e,t,s)}}function Xu(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Js(e)}catch(s){Oe(t,t.return,s)}}}function Zu(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Js(e)}catch(s){Oe(t,t.return,s)}}function pg(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Yu),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Yu),t;default:throw Error(d(435,e.tag))}}function Fn(e,t){var s=pg(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var n=Eg.bind(null,e,l);l.then(n,n)}})}function xt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var n=s[l],r=e,o=t,m=o;e:for(;m!==null;){switch(m.tag){case 27:if(Oa(m.type)){Ve=m.stateNode,ht=!1;break e}break;case 5:Ve=m.stateNode,ht=!1;break e;case 3:case 4:Ve=m.stateNode.containerInfo,ht=!0;break e}m=m.return}if(Ve===null)throw Error(d(160));Ju(r,o,n),Ve=null,ht=!1,r=n.alternate,r!==null&&(r.return=null),n.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Ku(t,e),t=t.sibling}var It=null;function Ku(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),pt(e),l&4&&(Ea(3,e,e.return),Bl(3,e),Ea(5,e,e.return));break;case 1:xt(t,e),pt(e),l&512&&($e||s===null||Xt(s,s.return)),l&64&&ia&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var n=It;if(xt(t,e),pt(e),l&512&&($e||s===null||Xt(s,s.return)),l&4){var r=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":r=n.getElementsByTagName("title")[0],(!r||r[cl]||r[at]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=n.createElement(l),n.head.insertBefore(r,n.querySelector("head > title"))),rt(r,l,s),r[at]=e,We(r),l=r;break e;case"link":var o=Km("link","href",n).get(l+(s.href||""));if(o){for(var m=0;m<o.length;m++)if(r=o[m],r.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&r.getAttribute("rel")===(s.rel==null?null:s.rel)&&r.getAttribute("title")===(s.title==null?null:s.title)&&r.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){o.splice(m,1);break t}}r=n.createElement(l),rt(r,l,s),n.head.appendChild(r);break;case"meta":if(o=Km("meta","content",n).get(l+(s.content||""))){for(m=0;m<o.length;m++)if(r=o[m],r.getAttribute("content")===(s.content==null?null:""+s.content)&&r.getAttribute("name")===(s.name==null?null:s.name)&&r.getAttribute("property")===(s.property==null?null:s.property)&&r.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&r.getAttribute("charset")===(s.charSet==null?null:s.charSet)){o.splice(m,1);break t}}r=n.createElement(l),rt(r,l,s),n.head.appendChild(r);break;default:throw Error(d(468,l))}r[at]=e,We(r),l=r}e.stateNode=l}else Fm(n,e.type,e.stateNode);else e.stateNode=Zm(n,l,e.memoizedProps);else r!==l?(r===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):r.count--,l===null?Fm(n,e.type,e.stateNode):Zm(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&cc(e,e.memoizedProps,s.memoizedProps)}break;case 27:xt(t,e),pt(e),l&512&&($e||s===null||Xt(s,s.return)),s!==null&&l&4&&cc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(xt(t,e),pt(e),l&512&&($e||s===null||Xt(s,s.return)),e.flags&32){n=e.stateNode;try{hs(n,"")}catch(oe){Oe(e,e.return,oe)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,cc(e,n,s!==null?s.memoizedProps:n)),l&1024&&(uc=!0);break;case 6:if(xt(t,e),pt(e),l&4){if(e.stateNode===null)throw Error(d(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(oe){Oe(e,e.return,oe)}}break;case 3:if(mr=null,n=It,It=dr(t.containerInfo),xt(t,e),It=n,pt(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Js(t.containerInfo)}catch(oe){Oe(e,e.return,oe)}uc&&(uc=!1,Fu(e));break;case 4:l=It,It=dr(e.stateNode.containerInfo),xt(t,e),pt(e),It=l;break;case 12:xt(t,e),pt(e);break;case 31:xt(t,e),pt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fn(e,l)));break;case 13:xt(t,e),pt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pn=ot()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fn(e,l)));break;case 22:n=e.memoizedState!==null;var N=s!==null&&s.memoizedState!==null,B=ia,V=$e;if(ia=B||n,$e=V||N,xt(t,e),$e=V,ia=B,pt(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(s===null||N||ia||$e||as(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){N=s=t;try{if(r=N.stateNode,n)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{m=N.stateNode;var G=N.memoizedProps.style,U=G!=null&&G.hasOwnProperty("display")?G.display:null;m.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(oe){Oe(N,N.return,oe)}}}else if(t.tag===6){if(s===null){N=t;try{N.stateNode.nodeValue=n?"":N.memoizedProps}catch(oe){Oe(N,N.return,oe)}}}else if(t.tag===18){if(s===null){N=t;try{var L=N.stateNode;n?qm(L,!0):qm(N.stateNode,!1)}catch(oe){Oe(N,N.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Fn(e,s))));break;case 19:xt(t,e),pt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Fn(e,l)));break;case 30:break;case 21:break;default:xt(t,e),pt(e)}}function pt(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Vu(l)){s=l;break}l=l.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var n=s.stateNode,r=oc(e);Kn(e,r,n);break;case 5:var o=s.stateNode;s.flags&32&&(hs(o,""),s.flags&=-33);var m=oc(e);Kn(e,m,o);break;case 3:case 4:var N=s.stateNode.containerInfo,B=oc(e);dc(e,B,N);break;default:throw Error(d(161))}}catch(V){Oe(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fu(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Fu(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function oa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Gu(e,t.alternate,t),t=t.sibling}function as(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ea(4,t,t.return),as(t);break;case 1:Xt(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&qu(t,t.return,s),as(t);break;case 27:Gl(t.stateNode);case 26:case 5:Xt(t,t.return),as(t);break;case 22:t.memoizedState===null&&as(t);break;case 30:as(t);break;default:as(t)}e=e.sibling}}function da(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:da(n,r,s),Bl(4,r);break;case 1:if(da(n,r,s),l=r,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(B){Oe(l,l.return,B)}if(l=r,n=l.updateQueue,n!==null){var m=l.stateNode;try{var N=n.shared.hiddenCallbacks;if(N!==null)for(n.shared.hiddenCallbacks=null,n=0;n<N.length;n++)Td(N[n],m)}catch(B){Oe(l,l.return,B)}}s&&o&64&&_u(r),Ul(r,r.return);break;case 27:Iu(r);case 26:case 5:da(n,r,s),s&&l===null&&o&4&&Hu(r),Ul(r,r.return);break;case 12:da(n,r,s);break;case 31:da(n,r,s),s&&o&4&&Xu(n,r);break;case 13:da(n,r,s),s&&o&4&&Zu(n,r);break;case 22:r.memoizedState===null&&da(n,r,s),Ul(r,r.return);break;case 30:break;default:da(n,r,s)}t=t.sibling}}function mc(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Nl(s))}function fc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Nl(e))}function Yt(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$u(e,t,s,l),t=t.sibling}function $u(e,t,s,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Yt(e,t,s,l),n&2048&&Bl(9,t);break;case 1:Yt(e,t,s,l);break;case 3:Yt(e,t,s,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Nl(e)));break;case 12:if(n&2048){Yt(e,t,s,l),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,m=r.onPostCommit;typeof m=="function"&&m(o,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Oe(t,t.return,N)}}else Yt(e,t,s,l);break;case 31:Yt(e,t,s,l);break;case 13:Yt(e,t,s,l);break;case 23:break;case 22:r=t.stateNode,o=t.alternate,t.memoizedState!==null?r._visibility&2?Yt(e,t,s,l):kl(e,t):r._visibility&2?Yt(e,t,s,l):(r._visibility|=2,Us(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),n&2048&&mc(o,t);break;case 24:Yt(e,t,s,l),n&2048&&fc(t.alternate,t);break;default:Yt(e,t,s,l)}}function Us(e,t,s,l,n){for(n=n&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var r=e,o=t,m=s,N=l,B=o.flags;switch(o.tag){case 0:case 11:case 15:Us(r,o,m,N,n),Bl(8,o);break;case 23:break;case 22:var V=o.stateNode;o.memoizedState!==null?V._visibility&2?Us(r,o,m,N,n):kl(r,o):(V._visibility|=2,Us(r,o,m,N,n)),n&&B&2048&&mc(o.alternate,o);break;case 24:Us(r,o,m,N,n),n&&B&2048&&fc(o.alternate,o);break;default:Us(r,o,m,N,n)}t=t.sibling}}function kl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,n=l.flags;switch(l.tag){case 22:kl(s,l),n&2048&&mc(l.alternate,l);break;case 24:kl(s,l),n&2048&&fc(l.alternate,l);break;default:kl(s,l)}t=t.sibling}}var Ll=8192;function ks(e,t,s){if(e.subtreeFlags&Ll)for(e=e.child;e!==null;)Pu(e,t,s),e=e.sibling}function Pu(e,t,s){switch(e.tag){case 26:ks(e,t,s),e.flags&Ll&&e.memoizedState!==null&&sh(s,It,e.memoizedState,e.memoizedProps);break;case 5:ks(e,t,s);break;case 3:case 4:var l=It;It=dr(e.stateNode.containerInfo),ks(e,t,s),It=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Ll,Ll=16777216,ks(e,t,s),Ll=l):ks(e,t,s));break;default:ks(e,t,s)}}function Wu(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function _l(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];et=l,tm(l,e)}Wu(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)em(e),e=e.sibling}function em(e){switch(e.tag){case 0:case 11:case 15:_l(e),e.flags&2048&&Ea(9,e,e.return);break;case 3:_l(e);break;case 12:_l(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,$n(e)):_l(e);break;default:_l(e)}}function $n(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];et=l,tm(l,e)}Wu(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ea(8,t,t.return),$n(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,$n(t));break;default:$n(t)}e=e.sibling}}function tm(e,t){for(;et!==null;){var s=et;switch(s.tag){case 0:case 11:case 15:Ea(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Nl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,et=l;else e:for(s=e;et!==null;){l=et;var n=l.sibling,r=l.return;if(Qu(l),l===s){et=null;break e}if(n!==null){n.return=r,et=n;break e}et=r}}}var bg={getCacheForType:function(e){var t=lt(Ze),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return lt(Ze).controller.signal}},yg=typeof WeakMap=="function"?WeakMap:Map,ze=0,_e=null,Se=null,Ee=0,Me=0,St=null,Ta=!1,Ls=!1,gc=!1,ua=0,Ge=0,Ca=0,ss=0,hc=0,At=0,_s=0,ql=null,bt=null,xc=!1,Pn=0,am=0,Wn=1/0,er=null,Ra=null,Pe=0,Da=null,qs=null,ma=0,pc=0,bc=null,sm=null,Hl=0,yc=null;function Et(){return(ze&2)!==0&&Ee!==0?Ee&-Ee:x.T!==null?Ac():yo()}function lm(){if(At===0)if((Ee&536870912)===0||Ce){var e=cn;cn<<=1,(cn&3932160)===0&&(cn=262144),At=e}else At=536870912;return e=jt.current,e!==null&&(e.flags|=32),At}function yt(e,t,s){(e===_e&&(Me===2||Me===9)||e.cancelPendingCommit!==null)&&(Hs(e,0),za(e,Ee,At,!1)),il(e,s),((ze&2)===0||e!==_e)&&(e===_e&&((ze&2)===0&&(ss|=s),Ge===4&&za(e,Ee,At,!1)),Zt(e))}function nm(e,t,s){if((ze&6)!==0)throw Error(d(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||rl(e,t),n=l?jg(e,t):Nc(e,t,!0),r=l;do{if(n===0){Ls&&!l&&za(e,t,0,!1);break}else{if(s=e.current.alternate,r&&!vg(s)){n=Nc(e,t,!1),r=!1;continue}if(n===2){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=e.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){t=o;e:{var m=e;n=ql;var N=m.current.memoizedState.isDehydrated;if(N&&(Hs(m,o).flags|=256),o=Nc(m,o,!1),o!==2){if(gc&&!N){m.errorRecoveryDisabledLanes|=r,ss|=r,n=4;break e}r=bt,bt=n,r!==null&&(bt===null?bt=r:bt.push.apply(bt,r))}n=o}if(r=!1,n!==2)continue}}if(n===1){Hs(e,0),za(e,t,0,!0);break}e:{switch(l=e,r=n,r){case 0:case 1:throw Error(d(345));case 4:if((t&4194048)!==t)break;case 6:za(l,t,At,!Ta);break e;case 2:bt=null;break;case 3:case 5:break;default:throw Error(d(329))}if((t&62914560)===t&&(n=Pn+300-ot(),10<n)){if(za(l,t,At,!Ta),dn(l,0,!0)!==0)break e;ma=t,l.timeoutHandle=km(rm.bind(null,l,s,bt,er,xc,t,At,ss,_s,Ta,r,"Throttled",-0,0),n);break e}rm(l,s,bt,er,xc,t,At,ss,_s,Ta,r,null,-0,0)}}break}while(!0);Zt(e)}function rm(e,t,s,l,n,r,o,m,N,B,V,G,U,L){if(e.timeoutHandle=-1,G=t.subtreeFlags,G&8192||(G&16785408)===16785408){G={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$t},Pu(t,r,G);var oe=(r&62914560)===r?Pn-ot():(r&4194048)===r?am-ot():0;if(oe=lh(G,oe),oe!==null){ma=r,e.cancelPendingCommit=oe(gm.bind(null,e,t,r,s,l,n,o,m,N,V,G,null,U,L)),za(e,r,o,!B);return}}gm(e,t,r,s,l,n,o,m,N)}function vg(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var n=s[l],r=n.getSnapshot;n=n.value;try{if(!vt(r(),n))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function za(e,t,s,l){t&=~hc,t&=~ss,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var r=31-mt(n),o=1<<r;l[r]=-1,n&=~o}s!==0&&xo(e,s,t)}function tr(){return(ze&6)===0?(Vl(0),!1):!0}function vc(){if(Se!==null){if(Me===0)var e=Se.return;else e=Se,ta=Za=null,ki(e),Ds=null,wl=0,e=Se;for(;e!==null;)Lu(e.alternate,e),e=e.return;Se=null}}function Hs(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Hg(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),ma=0,vc(),_e=e,Se=s=Wt(e.current,null),Ee=t,Me=0,St=null,Ta=!1,Ls=rl(e,t),gc=!1,_s=At=hc=ss=Ca=Ge=0,bt=ql=null,xc=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-mt(l),r=1<<n;t|=e[n],l&=~r}return ua=t,jn(),s}function im(e,t){ve=null,x.H=zl,t===Rs||t===Dn?(t=wd(),Me=3):t===Si?(t=wd(),Me=4):Me=t===Pi?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,St=t,Se===null&&(Ge=1,Gn(e,Mt(t,e.current)))}function cm(){var e=jt.current;return e===null?!0:(Ee&4194048)===Ee?kt===null:(Ee&62914560)===Ee||(Ee&536870912)!==0?e===kt:!1}function om(){var e=x.H;return x.H=zl,e===null?zl:e}function dm(){var e=x.A;return x.A=bg,e}function ar(){Ge=4,Ta||(Ee&4194048)!==Ee&&jt.current!==null||(Ls=!0),(Ca&134217727)===0&&(ss&134217727)===0||_e===null||za(_e,Ee,At,!1)}function Nc(e,t,s){var l=ze;ze|=2;var n=om(),r=dm();(_e!==e||Ee!==t)&&(er=null,Hs(e,t)),t=!1;var o=Ge;e:do try{if(Me!==0&&Se!==null){var m=Se,N=St;switch(Me){case 8:vc(),o=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(t=!0);var B=Me;if(Me=0,St=null,Vs(e,m,N,B),s&&Ls){o=0;break e}break;default:B=Me,Me=0,St=null,Vs(e,m,N,B)}}Ng(),o=Ge;break}catch(V){im(e,V)}while(!0);return t&&e.shellSuspendCounter++,ta=Za=null,ze=l,x.H=n,x.A=r,Se===null&&(_e=null,Ee=0,jn()),o}function Ng(){for(;Se!==null;)um(Se)}function jg(e,t){var s=ze;ze|=2;var l=om(),n=dm();_e!==e||Ee!==t?(er=null,Wn=ot()+500,Hs(e,t)):Ls=rl(e,t);e:do try{if(Me!==0&&Se!==null){t=Se;var r=St;t:switch(Me){case 1:Me=0,St=null,Vs(e,t,r,1);break;case 2:case 9:if(Nd(r)){Me=0,St=null,mm(t);break}t=function(){Me!==2&&Me!==9||_e!==e||(Me=7),Zt(e)},r.then(t,t);break e;case 3:Me=7;break e;case 4:Me=5;break e;case 7:Nd(r)?(Me=0,St=null,mm(t)):(Me=0,St=null,Vs(e,t,r,7));break;case 5:var o=null;switch(Se.tag){case 26:o=Se.memoizedState;case 5:case 27:var m=Se;if(o?$m(o):m.stateNode.complete){Me=0,St=null;var N=m.sibling;if(N!==null)Se=N;else{var B=m.return;B!==null?(Se=B,sr(B)):Se=null}break t}}Me=0,St=null,Vs(e,t,r,5);break;case 6:Me=0,St=null,Vs(e,t,r,6);break;case 8:vc(),Ge=6;break e;default:throw Error(d(462))}}wg();break}catch(V){im(e,V)}while(!0);return ta=Za=null,x.H=l,x.A=n,ze=s,Se!==null?0:(_e=null,Ee=0,jn(),Ge)}function wg(){for(;Se!==null&&!Br();)um(Se)}function um(e){var t=Uu(e.alternate,e,ua);e.memoizedProps=e.pendingProps,t===null?sr(e):Se=t}function mm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Ru(s,t,t.pendingProps,t.type,void 0,Ee);break;case 11:t=Ru(s,t,t.pendingProps,t.type.render,t.ref,Ee);break;case 5:ki(t);default:Lu(s,t),t=Se=dd(t,ua),t=Uu(s,t,ua)}e.memoizedProps=e.pendingProps,t===null?sr(e):Se=t}function Vs(e,t,s,l){ta=Za=null,ki(t),Ds=null,wl=0;var n=t.return;try{if(ug(e,n,t,s,Ee)){Ge=1,Gn(e,Mt(s,e.current)),Se=null;return}}catch(r){if(n!==null)throw Se=n,r;Ge=1,Gn(e,Mt(s,e.current)),Se=null;return}t.flags&32768?(Ce||l===1?e=!0:Ls||(Ee&536870912)!==0?e=!1:(Ta=e=!0,(l===2||l===9||l===3||l===6)&&(l=jt.current,l!==null&&l.tag===13&&(l.flags|=16384))),fm(t,e)):sr(t)}function sr(e){var t=e;do{if((t.flags&32768)!==0){fm(t,Ta);return}e=t.return;var s=gg(t.alternate,t,ua);if(s!==null){Se=s;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ge===0&&(Ge=5)}function fm(e,t){do{var s=hg(e.alternate,e);if(s!==null){s.flags&=32767,Se=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=s}while(e!==null);Ge=6,Se=null}function gm(e,t,s,l,n,r,o,m,N){e.cancelPendingCommit=null;do lr();while(Pe!==0);if((ze&6)!==0)throw Error(d(327));if(t!==null){if(t===e.current)throw Error(d(177));if(r=t.lanes|t.childLanes,r|=oi,tf(e,s,r,o,m,N),e===_e&&(Se=_e=null,Ee=0),qs=t,Da=e,ma=s,pc=r,bc=n,sm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Tg(ae,function(){return ym(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=x.T,x.T=null,n=F.p,F.p=2,o=ze,ze|=4;try{xg(e,t,s)}finally{ze=o,F.p=n,x.T=l}}Pe=1,hm(),xm(),pm()}}function hm(){if(Pe===1){Pe=0;var e=Da,t=qs,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=x.T,x.T=null;var l=F.p;F.p=2;var n=ze;ze|=4;try{Ku(t,e);var r=Oc,o=td(e.containerInfo),m=r.focusedElem,N=r.selectionRange;if(o!==m&&m&&m.ownerDocument&&ed(m.ownerDocument.documentElement,m)){if(N!==null&&li(m)){var B=N.start,V=N.end;if(V===void 0&&(V=B),"selectionStart"in m)m.selectionStart=B,m.selectionEnd=Math.min(V,m.value.length);else{var G=m.ownerDocument||document,U=G&&G.defaultView||window;if(U.getSelection){var L=U.getSelection(),oe=m.textContent.length,be=Math.min(N.start,oe),Le=N.end===void 0?be:Math.min(N.end,oe);!L.extend&&be>Le&&(o=Le,Le=be,be=o);var R=Wo(m,be),A=Wo(m,Le);if(R&&A&&(L.rangeCount!==1||L.anchorNode!==R.node||L.anchorOffset!==R.offset||L.focusNode!==A.node||L.focusOffset!==A.offset)){var O=G.createRange();O.setStart(R.node,R.offset),L.removeAllRanges(),be>Le?(L.addRange(O),L.extend(A.node,A.offset)):(O.setEnd(A.node,A.offset),L.addRange(O))}}}}for(G=[],L=m;L=L.parentNode;)L.nodeType===1&&G.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<G.length;m++){var Y=G[m];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}xr=!!Mc,Oc=Mc=null}finally{ze=n,F.p=l,x.T=s}}e.current=t,Pe=2}}function xm(){if(Pe===2){Pe=0;var e=Da,t=qs,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=x.T,x.T=null;var l=F.p;F.p=2;var n=ze;ze|=4;try{Gu(e,t.alternate,t)}finally{ze=n,F.p=l,x.T=s}}Pe=3}}function pm(){if(Pe===4||Pe===3){Pe=0,Ur();var e=Da,t=qs,s=ma,l=sm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,qs=Da=null,bm(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Ra=null),qr(s),t=t.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Kt,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=x.T,n=F.p,F.p=2,x.T=null;try{for(var r=e.onRecoverableError,o=0;o<l.length;o++){var m=l[o];r(m.value,{componentStack:m.stack})}}finally{x.T=t,F.p=n}}(ma&3)!==0&&lr(),Zt(e),n=e.pendingLanes,(s&261930)!==0&&(n&42)!==0?e===yc?Hl++:(Hl=0,yc=e):Hl=0,Vl(0)}}function bm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Nl(t)))}function lr(){return hm(),xm(),pm(),ym()}function ym(){if(Pe!==5)return!1;var e=Da,t=pc;pc=0;var s=qr(ma),l=x.T,n=F.p;try{F.p=32>s?32:s,x.T=null,s=bc,bc=null;var r=Da,o=ma;if(Pe=0,qs=Da=null,ma=0,(ze&6)!==0)throw Error(d(331));var m=ze;if(ze|=4,em(r.current),$u(r,r.current,o,s),ze=m,Vl(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Kt,r)}catch{}return!0}finally{F.p=n,x.T=l,bm(e,t)}}function vm(e,t,s){t=Mt(s,t),t=$i(e.stateNode,t,2),e=wa(e,t,2),e!==null&&(il(e,2),Zt(e))}function Oe(e,t,s){if(e.tag===3)vm(e,e,s);else for(;t!==null;){if(t.tag===3){vm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ra===null||!Ra.has(l))){e=Mt(s,e),s=Nu(2),l=wa(t,s,2),l!==null&&(ju(s,l,t,e),il(l,2),Zt(l));break}}t=t.return}}function jc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new yg;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(s)||(gc=!0,n.add(s),e=Sg.bind(null,e,t,s),t.then(e,e))}function Sg(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,_e===e&&(Ee&s)===s&&(Ge===4||Ge===3&&(Ee&62914560)===Ee&&300>ot()-Pn?(ze&2)===0&&Hs(e,0):hc|=s,_s===Ee&&(_s=0)),Zt(e)}function Nm(e,t){t===0&&(t=ho()),e=Qa(e,t),e!==null&&(il(e,t),Zt(e))}function Ag(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Nm(e,s)}function Eg(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(t),Nm(e,s)}function Tg(e,t){return ll(e,t)}var nr=null,Is=null,wc=!1,rr=!1,Sc=!1,Ma=0;function Zt(e){e!==Is&&e.next===null&&(Is===null?nr=Is=e:Is=Is.next=e),rr=!0,wc||(wc=!0,Rg())}function Vl(e,t){if(!Sc&&rr){Sc=!0;do for(var s=!1,l=nr;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var r=0;else{var o=l.suspendedLanes,m=l.pingedLanes;r=(1<<31-mt(42|e)+1)-1,r&=n&~(o&~m),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(s=!0,Am(l,r))}else r=Ee,r=dn(l,l===_e?r:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(r&3)===0||rl(l,r)||(s=!0,Am(l,r));l=l.next}while(s);Sc=!1}}function Cg(){jm()}function jm(){rr=wc=!1;var e=0;Ma!==0&&qg()&&(e=Ma);for(var t=ot(),s=null,l=nr;l!==null;){var n=l.next,r=wm(l,t);r===0?(l.next=null,s===null?nr=n:s.next=n,n===null&&(Is=s)):(s=l,(e!==0||(r&3)!==0)&&(rr=!0)),l=n}Pe!==0&&Pe!==5||Vl(e),Ma!==0&&(Ma=0)}function wm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes&-62914561;0<r;){var o=31-mt(r),m=1<<o,N=n[o];N===-1?((m&s)===0||(m&l)!==0)&&(n[o]=ef(m,t)):N<=t&&(e.expiredLanes|=m),r&=~m}if(t=_e,s=Ee,s=dn(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(Me===2||Me===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&nl(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||rl(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&nl(l),qr(s)){case 2:case 8:s=le;break;case 32:s=ae;break;case 268435456:s=ye;break;default:s=ae}return l=Sm.bind(null,e),s=ll(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&nl(l),e.callbackPriority=2,e.callbackNode=null,2}function Sm(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(lr()&&e.callbackNode!==s)return null;var l=Ee;return l=dn(e,e===_e?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(nm(e,l,t),wm(e,ot()),e.callbackNode!=null&&e.callbackNode===s?Sm.bind(null,e):null)}function Am(e,t){if(lr())return null;nm(e,t,!0)}function Rg(){Vg(function(){(ze&6)!==0?ll(nn,Cg):jm()})}function Ac(){if(Ma===0){var e=Ts;e===0&&(e=rn,rn<<=1,(rn&261888)===0&&(rn=256)),Ma=e}return Ma}function Em(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:gn(""+e)}function Tm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Dg(e,t,s,l,n){if(t==="submit"&&s&&s.stateNode===n){var r=Em((n[ft]||null).action),o=l.submitter;o&&(t=(t=o[ft]||null)?Em(t.formAction):o.getAttribute("formAction"),t!==null&&(r=t,o=null));var m=new bn("action","action",null,l,n);e.push({event:m,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ma!==0){var N=o?Tm(n,o):new FormData(n);Qi(s,{pending:!0,data:N,method:n.method,action:r},null,N)}}else typeof r=="function"&&(m.preventDefault(),N=o?Tm(n,o):new FormData(n),Qi(s,{pending:!0,data:N,method:n.method,action:r},r,N))},currentTarget:n}]})}}for(var Ec=0;Ec<ci.length;Ec++){var Tc=ci[Ec],zg=Tc.toLowerCase(),Mg=Tc[0].toUpperCase()+Tc.slice(1);Vt(zg,"on"+Mg)}Vt(ld,"onAnimationEnd"),Vt(nd,"onAnimationIteration"),Vt(rd,"onAnimationStart"),Vt("dblclick","onDoubleClick"),Vt("focusin","onFocus"),Vt("focusout","onBlur"),Vt(Zf,"onTransitionRun"),Vt(Kf,"onTransitionStart"),Vt(Ff,"onTransitionCancel"),Vt(id,"onTransitionEnd"),fs("onMouseEnter",["mouseout","mouseover"]),fs("onMouseLeave",["mouseout","mouseover"]),fs("onPointerEnter",["pointerout","pointerover"]),fs("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Og=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Il));function Cm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],n=l.event;l=l.listeners;e:{var r=void 0;if(t)for(var o=l.length-1;0<=o;o--){var m=l[o],N=m.instance,B=m.currentTarget;if(m=m.listener,N!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=B;try{r(n)}catch(V){Nn(V)}n.currentTarget=null,r=N}else for(o=0;o<l.length;o++){if(m=l[o],N=m.instance,B=m.currentTarget,m=m.listener,N!==r&&n.isPropagationStopped())break e;r=m,n.currentTarget=B;try{r(n)}catch(V){Nn(V)}n.currentTarget=null,r=N}}}}function Ae(e,t){var s=t[Hr];s===void 0&&(s=t[Hr]=new Set);var l=e+"__bubble";s.has(l)||(Rm(t,e,2,!1),s.add(l))}function Cc(e,t,s){var l=0;t&&(l|=4),Rm(s,e,l,t)}var ir="_reactListening"+Math.random().toString(36).slice(2);function Rc(e){if(!e[ir]){e[ir]=!0,jo.forEach(function(s){s!=="selectionchange"&&(Og.has(s)||Cc(s,!1,e),Cc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ir]||(t[ir]=!0,Cc("selectionchange",!1,t))}}function Rm(e,t,s,l){switch(l0(t)){case 2:var n=ih;break;case 8:n=ch;break;default:n=Gc}s=n.bind(null,t,s,e),n=void 0,!Kr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function Dc(e,t,s,l,n){var r=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var o=l.tag;if(o===3||o===4){var m=l.stateNode.containerInfo;if(m===n)break;if(o===4)for(o=l.return;o!==null;){var N=o.tag;if((N===3||N===4)&&o.stateNode.containerInfo===n)return;o=o.return}for(;m!==null;){if(o=ds(m),o===null)return;if(N=o.tag,N===5||N===6||N===26||N===27){l=r=o;continue e}m=m.parentNode}}l=l.return}Bo(function(){var B=r,V=Xr(s),G=[];e:{var U=cd.get(e);if(U!==void 0){var L=bn,oe=e;switch(e){case"keypress":if(xn(s)===0)break e;case"keydown":case"keyup":L=Ef;break;case"focusin":oe="focus",L=Wr;break;case"focusout":oe="blur",L=Wr;break;case"beforeblur":case"afterblur":L=Wr;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=Lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=Rf;break;case ld:case nd:case rd:L=pf;break;case id:L=zf;break;case"scroll":case"scrollend":L=mf;break;case"wheel":L=Of;break;case"copy":case"cut":case"paste":L=yf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=qo;break;case"toggle":case"beforetoggle":L=Uf}var be=(t&4)!==0,Le=!be&&(e==="scroll"||e==="scrollend"),R=be?U!==null?U+"Capture":null:U;be=[];for(var A=B,O;A!==null;){var Y=A;if(O=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||O===null||R===null||(Y=dl(A,R),Y!=null&&be.push(Yl(A,Y,O))),Le)break;A=A.return}0<be.length&&(U=new L(U,oe,null,s,V),G.push({event:U,listeners:be}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",U&&s!==Jr&&(oe=s.relatedTarget||s.fromElement)&&(ds(oe)||oe[os]))break e;if((L||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,L?(oe=s.relatedTarget||s.toElement,L=B,oe=oe?ds(oe):null,oe!==null&&(Le=b(oe),be=oe.tag,oe!==Le||be!==5&&be!==27&&be!==6)&&(oe=null)):(L=null,oe=B),L!==oe)){if(be=Lo,Y="onMouseLeave",R="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(be=qo,Y="onPointerLeave",R="onPointerEnter",A="pointer"),Le=L==null?U:ol(L),O=oe==null?U:ol(oe),U=new be(Y,A+"leave",L,s,V),U.target=Le,U.relatedTarget=O,Y=null,ds(V)===B&&(be=new be(R,A+"enter",oe,s,V),be.target=O,be.relatedTarget=Le,Y=be),Le=Y,L&&oe)t:{for(be=Bg,R=L,A=oe,O=0,Y=R;Y;Y=be(Y))O++;Y=0;for(var xe=A;xe;xe=be(xe))Y++;for(;0<O-Y;)R=be(R),O--;for(;0<Y-O;)A=be(A),Y--;for(;O--;){if(R===A||A!==null&&R===A.alternate){be=R;break t}R=be(R),A=be(A)}be=null}else be=null;L!==null&&Dm(G,U,L,be,!1),oe!==null&&Le!==null&&Dm(G,Le,oe,be,!0)}}e:{if(U=B?ol(B):window,L=U.nodeName&&U.nodeName.toLowerCase(),L==="select"||L==="input"&&U.type==="file")var Re=Xo;else if(Qo(U))if(Zo)Re=Qf;else{Re=Yf;var ue=If}else L=U.nodeName,!L||L.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?B&&Qr(B.elementType)&&(Re=Xo):Re=Gf;if(Re&&(Re=Re(e,B))){Jo(G,Re,s,V);break e}ue&&ue(e,U,B),e==="focusout"&&B&&U.type==="number"&&B.memoizedProps.value!=null&&Gr(U,"number",U.value)}switch(ue=B?ol(B):window,e){case"focusin":(Qo(ue)||ue.contentEditable==="true")&&(ys=ue,ni=B,bl=null);break;case"focusout":bl=ni=ys=null;break;case"mousedown":ri=!0;break;case"contextmenu":case"mouseup":case"dragend":ri=!1,ad(G,s,V);break;case"selectionchange":if(Xf)break;case"keydown":case"keyup":ad(G,s,V)}var je;if(ti)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else bs?Yo(e,s)&&(Te="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Te="onCompositionStart");Te&&(Ho&&s.locale!=="ko"&&(bs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&bs&&(je=Uo()):(xa=V,Fr="value"in xa?xa.value:xa.textContent,bs=!0)),ue=cr(B,Te),0<ue.length&&(Te=new _o(Te,e,null,s,V),G.push({event:Te,listeners:ue}),je?Te.data=je:(je=Go(s),je!==null&&(Te.data=je)))),(je=Lf?_f(e,s):qf(e,s))&&(Te=cr(B,"onBeforeInput"),0<Te.length&&(ue=new _o("onBeforeInput","beforeinput",null,s,V),G.push({event:ue,listeners:Te}),ue.data=je)),Dg(G,e,B,s,V)}Cm(G,t)})}function Yl(e,t,s){return{instance:e,listener:t,currentTarget:s}}function cr(e,t){for(var s=t+"Capture",l=[];e!==null;){var n=e,r=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||r===null||(n=dl(e,s),n!=null&&l.unshift(Yl(e,n,r)),n=dl(e,t),n!=null&&l.push(Yl(e,n,r))),e.tag===3)return l;e=e.return}return[]}function Bg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dm(e,t,s,l,n){for(var r=t._reactName,o=[];s!==null&&s!==l;){var m=s,N=m.alternate,B=m.stateNode;if(m=m.tag,N!==null&&N===l)break;m!==5&&m!==26&&m!==27||B===null||(N=B,n?(B=dl(s,r),B!=null&&o.unshift(Yl(s,B,N))):n||(B=dl(s,r),B!=null&&o.push(Yl(s,B,N)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Ug=/\r\n?/g,kg=/\u0000|\uFFFD/g;function zm(e){return(typeof e=="string"?e:""+e).replace(Ug,`
`).replace(kg,"")}function Mm(e,t){return t=zm(t),zm(e)===t}function ke(e,t,s,l,n,r){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||hs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&hs(e,""+l);break;case"className":mn(e,"class",l);break;case"tabIndex":mn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":mn(e,s,l);break;case"style":Mo(e,l,r);break;case"data":if(t!=="object"){mn(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=gn(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(s==="formAction"?(t!=="input"&&ke(e,t,"name",n.name,n,null),ke(e,t,"formEncType",n.formEncType,n,null),ke(e,t,"formMethod",n.formMethod,n,null),ke(e,t,"formTarget",n.formTarget,n,null)):(ke(e,t,"encType",n.encType,n,null),ke(e,t,"method",n.method,n,null),ke(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=gn(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=$t);break;case"onScroll":l!=null&&Ae("scroll",e);break;case"onScrollEnd":l!=null&&Ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=gn(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Ae("beforetoggle",e),Ae("toggle",e),un(e,"popover",l);break;case"xlinkActuate":Ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":un(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=df.get(s)||s,un(e,s,l))}}function zc(e,t,s,l,n,r){switch(s){case"style":Mo(e,l,r);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(s=l.__html,s!=null){if(n.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof l=="string"?hs(e,l):(typeof l=="number"||typeof l=="bigint")&&hs(e,""+l);break;case"onScroll":l!=null&&Ae("scroll",e);break;case"onScrollEnd":l!=null&&Ae("scrollend",e);break;case"onClick":l!=null&&(e.onclick=$t);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(n=s.endsWith("Capture"),t=s.slice(2,n?s.length-7:void 0),r=e[ft]||null,r=r!=null?r[s]:null,typeof r=="function"&&e.removeEventListener(t,r,n),typeof l=="function")){typeof r!="function"&&r!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,n);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):un(e,s,l)}}}function rt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ae("error",e),Ae("load",e);var l=!1,n=!1,r;for(r in s)if(s.hasOwnProperty(r)){var o=s[r];if(o!=null)switch(r){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:ke(e,t,r,o,s,null)}}n&&ke(e,t,"srcSet",s.srcSet,s,null),l&&ke(e,t,"src",s.src,s,null);return;case"input":Ae("invalid",e);var m=r=o=n=null,N=null,B=null;for(l in s)if(s.hasOwnProperty(l)){var V=s[l];if(V!=null)switch(l){case"name":n=V;break;case"type":o=V;break;case"checked":N=V;break;case"defaultChecked":B=V;break;case"value":r=V;break;case"defaultValue":m=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(d(137,t));break;default:ke(e,t,l,V,s,null)}}Co(e,r,m,N,B,o,n,!1);return;case"select":Ae("invalid",e),l=o=r=null;for(n in s)if(s.hasOwnProperty(n)&&(m=s[n],m!=null))switch(n){case"value":r=m;break;case"defaultValue":o=m;break;case"multiple":l=m;default:ke(e,t,n,m,s,null)}t=r,s=o,e.multiple=!!l,t!=null?gs(e,!!l,t,!1):s!=null&&gs(e,!!l,s,!0);return;case"textarea":Ae("invalid",e),r=n=l=null;for(o in s)if(s.hasOwnProperty(o)&&(m=s[o],m!=null))switch(o){case"value":l=m;break;case"defaultValue":n=m;break;case"children":r=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(d(91));break;default:ke(e,t,o,m,s,null)}Do(e,l,n,r);return;case"option":for(N in s)if(s.hasOwnProperty(N)&&(l=s[N],l!=null))switch(N){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:ke(e,t,N,l,s,null)}return;case"dialog":Ae("beforetoggle",e),Ae("toggle",e),Ae("cancel",e),Ae("close",e);break;case"iframe":case"object":Ae("load",e);break;case"video":case"audio":for(l=0;l<Il.length;l++)Ae(Il[l],e);break;case"image":Ae("error",e),Ae("load",e);break;case"details":Ae("toggle",e);break;case"embed":case"source":case"link":Ae("error",e),Ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in s)if(s.hasOwnProperty(B)&&(l=s[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,t));default:ke(e,t,B,l,s,null)}return;default:if(Qr(t)){for(V in s)s.hasOwnProperty(V)&&(l=s[V],l!==void 0&&zc(e,t,V,l,s,void 0));return}}for(m in s)s.hasOwnProperty(m)&&(l=s[m],l!=null&&ke(e,t,m,l,s,null))}function Lg(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,r=null,o=null,m=null,N=null,B=null,V=null;for(L in s){var G=s[L];if(s.hasOwnProperty(L)&&G!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":N=G;default:l.hasOwnProperty(L)||ke(e,t,L,null,l,G)}}for(var U in l){var L=l[U];if(G=s[U],l.hasOwnProperty(U)&&(L!=null||G!=null))switch(U){case"type":r=L;break;case"name":n=L;break;case"checked":B=L;break;case"defaultChecked":V=L;break;case"value":o=L;break;case"defaultValue":m=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(d(137,t));break;default:L!==G&&ke(e,t,U,L,l,G)}}Yr(e,o,m,N,B,V,r,n);return;case"select":L=o=m=U=null;for(r in s)if(N=s[r],s.hasOwnProperty(r)&&N!=null)switch(r){case"value":break;case"multiple":L=N;default:l.hasOwnProperty(r)||ke(e,t,r,null,l,N)}for(n in l)if(r=l[n],N=s[n],l.hasOwnProperty(n)&&(r!=null||N!=null))switch(n){case"value":U=r;break;case"defaultValue":m=r;break;case"multiple":o=r;default:r!==N&&ke(e,t,n,r,l,N)}t=m,s=o,l=L,U!=null?gs(e,!!s,U,!1):!!l!=!!s&&(t!=null?gs(e,!!s,t,!0):gs(e,!!s,s?[]:"",!1));return;case"textarea":L=U=null;for(m in s)if(n=s[m],s.hasOwnProperty(m)&&n!=null&&!l.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:ke(e,t,m,null,l,n)}for(o in l)if(n=l[o],r=s[o],l.hasOwnProperty(o)&&(n!=null||r!=null))switch(o){case"value":U=n;break;case"defaultValue":L=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(d(91));break;default:n!==r&&ke(e,t,o,n,l,r)}Ro(e,U,L);return;case"option":for(var oe in s)if(U=s[oe],s.hasOwnProperty(oe)&&U!=null&&!l.hasOwnProperty(oe))switch(oe){case"selected":e.selected=!1;break;default:ke(e,t,oe,null,l,U)}for(N in l)if(U=l[N],L=s[N],l.hasOwnProperty(N)&&U!==L&&(U!=null||L!=null))switch(N){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:ke(e,t,N,U,l,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in s)U=s[be],s.hasOwnProperty(be)&&U!=null&&!l.hasOwnProperty(be)&&ke(e,t,be,null,l,U);for(B in l)if(U=l[B],L=s[B],l.hasOwnProperty(B)&&U!==L&&(U!=null||L!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(d(137,t));break;default:ke(e,t,B,U,l,L)}return;default:if(Qr(t)){for(var Le in s)U=s[Le],s.hasOwnProperty(Le)&&U!==void 0&&!l.hasOwnProperty(Le)&&zc(e,t,Le,void 0,l,U);for(V in l)U=l[V],L=s[V],!l.hasOwnProperty(V)||U===L||U===void 0&&L===void 0||zc(e,t,V,U,l,L);return}}for(var R in s)U=s[R],s.hasOwnProperty(R)&&U!=null&&!l.hasOwnProperty(R)&&ke(e,t,R,null,l,U);for(G in l)U=l[G],L=s[G],!l.hasOwnProperty(G)||U===L||U==null&&L==null||ke(e,t,G,U,l,L)}function Om(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _g(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var n=s[l],r=n.transferSize,o=n.initiatorType,m=n.duration;if(r&&m&&Om(o)){for(o=0,m=n.responseEnd,l+=1;l<s.length;l++){var N=s[l],B=N.startTime;if(B>m)break;var V=N.transferSize,G=N.initiatorType;V&&Om(G)&&(N=N.responseEnd,o+=V*(N<m?1:(m-B)/(N-B)))}if(--l,t+=8*(r+o)/(n.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Mc=null,Oc=null;function or(e){return e.nodeType===9?e:e.ownerDocument}function Bm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Um(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Bc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uc=null;function qg(){var e=window.event;return e&&e.type==="popstate"?e===Uc?!1:(Uc=e,!0):(Uc=null,!1)}var km=typeof setTimeout=="function"?setTimeout:void 0,Hg=typeof clearTimeout=="function"?clearTimeout:void 0,Lm=typeof Promise=="function"?Promise:void 0,Vg=typeof queueMicrotask=="function"?queueMicrotask:typeof Lm<"u"?function(e){return Lm.resolve(null).then(e).catch(Ig)}:km;function Ig(e){setTimeout(function(){throw e})}function Oa(e){return e==="head"}function _m(e,t){var s=t,l=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(n),Js(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")Gl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Gl(s);for(var r=s.firstChild;r;){var o=r.nextSibling,m=r.nodeName;r[cl]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&r.rel.toLowerCase()==="stylesheet"||s.removeChild(r),r=o}}else s==="body"&&Gl(e.ownerDocument.body);s=n}while(s);Js(t)}function qm(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function kc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":kc(s),Vr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Yg(e,t,s,l){for(;e.nodeType===1;){var n=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[cl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(r=e.getAttribute("rel"),r==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(r!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(r=e.getAttribute("src"),(r!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var r=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===r)return e}else return e;if(e=Lt(e.nextSibling),e===null)break}return null}function Gg(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Lt(e.nextSibling),e===null))return null;return e}function Hm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Lt(e.nextSibling),e===null))return null;return e}function Lc(e){return e.data==="$?"||e.data==="$~"}function _c(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qg(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qc=null;function Vm(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Lt(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Im(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Ym(e,t,s){switch(t=or(s),e){case"html":if(e=t.documentElement,!e)throw Error(d(452));return e;case"head":if(e=t.head,!e)throw Error(d(453));return e;case"body":if(e=t.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Gl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Vr(e)}var _t=new Map,Gm=new Set;function dr(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fa=F.d;F.d={f:Jg,r:Xg,D:Zg,C:Kg,L:Fg,m:$g,X:Wg,S:Pg,M:eh};function Jg(){var e=fa.f(),t=tr();return e||t}function Xg(e){var t=us(e);t!==null&&t.tag===5&&t.type==="form"?iu(t):fa.r(e)}var Ys=typeof document>"u"?null:document;function Qm(e,t,s){var l=Ys;if(l&&typeof t=="string"&&t){var n=Dt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof s=="string"&&(n+='[crossorigin="'+s+'"]'),Gm.has(n)||(Gm.add(n),e={rel:e,crossOrigin:s,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),rt(t,"link",e),We(t),l.head.appendChild(t)))}}function Zg(e){fa.D(e),Qm("dns-prefetch",e,null)}function Kg(e,t){fa.C(e,t),Qm("preconnect",e,t)}function Fg(e,t,s){fa.L(e,t,s);var l=Ys;if(l&&e&&t){var n='link[rel="preload"][as="'+Dt(t)+'"]';t==="image"&&s&&s.imageSrcSet?(n+='[imagesrcset="'+Dt(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(n+='[imagesizes="'+Dt(s.imageSizes)+'"]')):n+='[href="'+Dt(e)+'"]';var r=n;switch(t){case"style":r=Gs(e);break;case"script":r=Qs(e)}_t.has(r)||(e=g({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),_t.set(r,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(Ql(r))||t==="script"&&l.querySelector(Jl(r))||(t=l.createElement("link"),rt(t,"link",e),We(t),l.head.appendChild(t)))}}function $g(e,t){fa.m(e,t);var s=Ys;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+Dt(l)+'"][href="'+Dt(e)+'"]',r=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Qs(e)}if(!_t.has(r)&&(e=g({rel:"modulepreload",href:e},t),_t.set(r,e),s.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Jl(r)))return}l=s.createElement("link"),rt(l,"link",e),We(l),s.head.appendChild(l)}}}function Pg(e,t,s){fa.S(e,t,s);var l=Ys;if(l&&e){var n=ms(l).hoistableStyles,r=Gs(e);t=t||"default";var o=n.get(r);if(!o){var m={loading:0,preload:null};if(o=l.querySelector(Ql(r)))m.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":t},s),(s=_t.get(r))&&Hc(e,s);var N=o=l.createElement("link");We(N),rt(N,"link",e),N._p=new Promise(function(B,V){N.onload=B,N.onerror=V}),N.addEventListener("load",function(){m.loading|=1}),N.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ur(o,t,l)}o={type:"stylesheet",instance:o,count:1,state:m},n.set(r,o)}}}function Wg(e,t){fa.X(e,t);var s=Ys;if(s&&e){var l=ms(s).hoistableScripts,n=Qs(e),r=l.get(n);r||(r=s.querySelector(Jl(n)),r||(e=g({src:e,async:!0},t),(t=_t.get(n))&&Vc(e,t),r=s.createElement("script"),We(r),rt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function eh(e,t){fa.M(e,t);var s=Ys;if(s&&e){var l=ms(s).hoistableScripts,n=Qs(e),r=l.get(n);r||(r=s.querySelector(Jl(n)),r||(e=g({src:e,async:!0,type:"module"},t),(t=_t.get(n))&&Vc(e,t),r=s.createElement("script"),We(r),rt(r,"link",e),s.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},l.set(n,r))}}function Jm(e,t,s,l){var n=(n=X.current)?dr(n):null;if(!n)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=Gs(s.href),s=ms(n).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Gs(s.href);var r=ms(n).hoistableStyles,o=r.get(e);if(o||(n=n.ownerDocument||n,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(e,o),(r=n.querySelector(Ql(e)))&&!r._p&&(o.instance=r,o.state.loading=5),_t.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},_t.set(e,s),r||th(n,e,s,o.state))),t&&l===null)throw Error(d(528,""));return o}if(t&&l!==null)throw Error(d(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Qs(s),s=ms(n).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Gs(e){return'href="'+Dt(e)+'"'}function Ql(e){return'link[rel="stylesheet"]['+e+"]"}function Xm(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function th(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),rt(t,"link",s),We(t),e.head.appendChild(t))}function Qs(e){return'[src="'+Dt(e)+'"]'}function Jl(e){return"script[async]"+e}function Zm(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Dt(s.href)+'"]');if(l)return t.instance=l,We(l),l;var n=g({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),We(l),rt(l,"style",n),ur(l,s.precedence,e),t.instance=l;case"stylesheet":n=Gs(s.href);var r=e.querySelector(Ql(n));if(r)return t.state.loading|=4,t.instance=r,We(r),r;l=Xm(s),(n=_t.get(n))&&Hc(l,n),r=(e.ownerDocument||e).createElement("link"),We(r);var o=r;return o._p=new Promise(function(m,N){o.onload=m,o.onerror=N}),rt(r,"link",l),t.state.loading|=4,ur(r,s.precedence,e),t.instance=r;case"script":return r=Qs(s.src),(n=e.querySelector(Jl(r)))?(t.instance=n,We(n),n):(l=s,(n=_t.get(r))&&(l=g({},s),Vc(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),We(n),rt(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(d(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ur(l,s.precedence,e));return t.instance}function ur(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,r=n,o=0;o<l.length;o++){var m=l[o];if(m.dataset.precedence===t)r=m;else if(r!==n)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Hc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Vc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var mr=null;function Km(e,t,s){if(mr===null){var l=new Map,n=mr=new Map;n.set(s,l)}else n=mr,l=n.get(s),l||(l=new Map,n.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),n=0;n<s.length;n++){var r=s[n];if(!(r[cl]||r[at]||e==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(t)||"";o=e+o;var m=l.get(o);m?m.push(r):l.set(o,[r])}}return l}function Fm(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function ah(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function $m(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function sh(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var n=Gs(l.href),r=t.querySelector(Ql(n));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=fr.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=r,We(r);return}r=t.ownerDocument||t,l=Xm(l),(n=_t.get(n))&&Hc(l,n),r=r.createElement("link"),We(r);var o=r;o._p=new Promise(function(m,N){o.onload=m,o.onerror=N}),rt(r,"link",l),s.instance=r}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=fr.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Ic=0;function lh(e,t){return e.stylesheets&&e.count===0&&hr(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend){var r=e.unsuspend;e.unsuspend=null,r()}},6e4+t);0<e.imgBytes&&Ic===0&&(Ic=62500*_g());var n=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&hr(e,e.stylesheets),e.unsuspend)){var r=e.unsuspend;e.unsuspend=null,r()}},(e.imgBytes>Ic?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(n)}}:null}function fr(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gr=null;function hr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gr=new Map,t.forEach(nh,e),gr=null,fr.call(e))}function nh(e,t){if(!(t.state.loading&4)){var s=gr.get(e);if(s)var l=s.get(null);else{s=new Map,gr.set(e,s);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<n.length;r++){var o=n[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(s.set(o.dataset.precedence,o),l=o)}l&&s.set(null,l)}n=t.instance,o=n.getAttribute("data-precedence"),r=s.get(o)||l,r===l&&s.set(null,n),s.set(o,n),this.count++,l=fr.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),r?r.parentNode.insertBefore(n,r.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Xl={$$typeof:P,Provider:null,Consumer:null,_currentValue:y,_currentValue2:y,_threadCount:0};function rh(e,t,s,l,n,r,o,m,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Pm(e,t,s,l,n,r,o,m,N,B,V,G){return e=new rh(e,t,s,o,N,B,V,G,m),t=1,r===!0&&(t|=24),r=Nt(3,null,null,t),e.current=r,r.stateNode=e,t=Ni(),t.refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:l,isDehydrated:s,cache:t},Ai(r),e}function Wm(e){return e?(e=js,e):js}function e0(e,t,s,l,n,r){n=Wm(n),l.context===null?l.context=n:l.pendingContext=n,l=ja(t),l.payload={element:s},r=r===void 0?null:r,r!==null&&(l.callback=r),s=wa(e,l,t),s!==null&&(yt(s,e,t),Al(s,e,t))}function t0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Yc(e,t){t0(e,t),(e=e.alternate)&&t0(e,t)}function a0(e){if(e.tag===13||e.tag===31){var t=Qa(e,67108864);t!==null&&yt(t,e,67108864),Yc(e,67108864)}}function s0(e){if(e.tag===13||e.tag===31){var t=Et();t=_r(t);var s=Qa(e,t);s!==null&&yt(s,e,t),Yc(e,t)}}var xr=!0;function ih(e,t,s,l){var n=x.T;x.T=null;var r=F.p;try{F.p=2,Gc(e,t,s,l)}finally{F.p=r,x.T=n}}function ch(e,t,s,l){var n=x.T;x.T=null;var r=F.p;try{F.p=8,Gc(e,t,s,l)}finally{F.p=r,x.T=n}}function Gc(e,t,s,l){if(xr){var n=Qc(l);if(n===null)Dc(e,t,l,pr,s),n0(e,l);else if(dh(n,e,t,s,l))l.stopPropagation();else if(n0(e,l),t&4&&-1<oh.indexOf(e)){for(;n!==null;){var r=us(n);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=Ha(r.pendingLanes);if(o!==0){var m=r;for(m.pendingLanes|=2,m.entangledLanes|=2;o;){var N=1<<31-mt(o);m.entanglements[1]|=N,o&=~N}Zt(r),(ze&6)===0&&(Wn=ot()+500,Vl(0))}}break;case 31:case 13:m=Qa(r,2),m!==null&&yt(m,r,2),tr(),Yc(r,2)}if(r=Qc(l),r===null&&Dc(e,t,l,pr,s),r===n)break;n=r}n!==null&&l.stopPropagation()}else Dc(e,t,l,null,s)}}function Qc(e){return e=Xr(e),Jc(e)}var pr=null;function Jc(e){if(pr=null,e=ds(e),e!==null){var t=b(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=v(t),e!==null)return e;e=null}else if(s===31){if(e=h(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return pr=e,null}function l0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kr()){case nn:return 2;case le:return 8;case ae:case he:return 32;case ye:return 268435456;default:return 32}default:return 32}}var Xc=!1,Ba=null,Ua=null,ka=null,Zl=new Map,Kl=new Map,La=[],oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(e,t){switch(e){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":Zl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(t.pointerId)}}function Fl(e,t,s,l,n,r){return e===null||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},t!==null&&(t=us(t),t!==null&&a0(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function dh(e,t,s,l,n){switch(t){case"focusin":return Ba=Fl(Ba,e,t,s,l,n),!0;case"dragenter":return Ua=Fl(Ua,e,t,s,l,n),!0;case"mouseover":return ka=Fl(ka,e,t,s,l,n),!0;case"pointerover":var r=n.pointerId;return Zl.set(r,Fl(Zl.get(r)||null,e,t,s,l,n)),!0;case"gotpointercapture":return r=n.pointerId,Kl.set(r,Fl(Kl.get(r)||null,e,t,s,l,n)),!0}return!1}function r0(e){var t=ds(e.target);if(t!==null){var s=b(t);if(s!==null){if(t=s.tag,t===13){if(t=v(s),t!==null){e.blockedOn=t,vo(e.priority,function(){s0(s)});return}}else if(t===31){if(t=h(s),t!==null){e.blockedOn=t,vo(e.priority,function(){s0(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function br(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Qc(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Jr=l,s.target.dispatchEvent(l),Jr=null}else return t=us(s),t!==null&&a0(t),e.blockedOn=s,!1;t.shift()}return!0}function i0(e,t,s){br(e)&&s.delete(t)}function uh(){Xc=!1,Ba!==null&&br(Ba)&&(Ba=null),Ua!==null&&br(Ua)&&(Ua=null),ka!==null&&br(ka)&&(ka=null),Zl.forEach(i0),Kl.forEach(i0)}function yr(e,t){e.blockedOn===t&&(e.blockedOn=null,Xc||(Xc=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,uh)))}var vr=null;function c0(e){vr!==e&&(vr=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){vr===e&&(vr=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(Jc(l||s)===null)continue;break}var r=us(s);r!==null&&(e.splice(t,3),t-=3,Qi(r,{pending:!0,data:n,method:s.method,action:l},l,n))}}))}function Js(e){function t(N){return yr(N,e)}Ba!==null&&yr(Ba,e),Ua!==null&&yr(Ua,e),ka!==null&&yr(ka,e),Zl.forEach(t),Kl.forEach(t);for(var s=0;s<La.length;s++){var l=La[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<La.length&&(s=La[0],s.blockedOn===null);)r0(s),s.blockedOn===null&&La.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var n=s[l],r=s[l+1],o=n[ft]||null;if(typeof r=="function")o||c0(s);else if(o){var m=null;if(r&&r.hasAttribute("formAction")){if(n=r,o=r[ft]||null)m=o.formAction;else if(Jc(n)!==null)continue}else m=o.action;typeof m=="function"?s[l+1]=m:(s.splice(l,3),l-=3),c0(s)}}}function o0(){function e(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return n=o})},focusReset:"manual",scroll:"manual"})}function t(){n!==null&&(n(),n=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,n=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),n!==null&&(n(),n=null)}}}function Zc(e){this._internalRoot=e}Nr.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(d(409));var s=t.current,l=Et();e0(s,l,e,t,null,null)},Nr.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;e0(e.current,2,null,e,null,null),tr(),t[os]=null}};function Nr(e){this._internalRoot=e}Nr.prototype.unstable_scheduleHydration=function(e){if(e){var t=yo();e={blockedOn:null,target:e,priority:t};for(var s=0;s<La.length&&t!==0&&t<La[s].priority;s++);La.splice(s,0,e),s===0&&r0(e)}};var d0=i.version;if(d0!=="19.2.0")throw Error(d(527,d0,"19.2.0"));F.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=C(t),e=e!==null?M(e):null,e=e===null?null:e.stateNode,e};var mh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jr.isDisabled&&jr.supportsFiber)try{Kt=jr.inject(mh),ct=jr}catch{}}return Pl.createRoot=function(e,t){if(!f(e))throw Error(d(299));var s=!1,l="",n=pu,r=bu,o=yu;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(r=t.onCaughtError),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Pm(e,1,!1,null,null,s,l,null,n,r,o,o0),e[os]=t.current,Rc(e),new Zc(t)},Pl.hydrateRoot=function(e,t,s){if(!f(e))throw Error(d(299));var l=!1,n="",r=pu,o=bu,m=yu,N=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(r=s.onUncaughtError),s.onCaughtError!==void 0&&(o=s.onCaughtError),s.onRecoverableError!==void 0&&(m=s.onRecoverableError),s.formState!==void 0&&(N=s.formState)),t=Pm(e,1,!0,t,s??null,l,n,N,r,o,m,o0),t.context=Wm(null),s=t.current,l=Et(),l=_r(l),n=ja(l),n.callback=null,wa(s,n,l),s=l,t.current.lanes=s,il(t,s),Zt(t),e[os]=t.current,Rc(e),new Nr(t)},Pl.version="19.2.0",Pl}var y0;function Ph(){if(y0)return Pc.exports;y0=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(i){console.error(i)}}return c(),Pc.exports=$h(),Pc.exports}var Wh=Ph();const ex=xh(Wh),tx="/assets/hero-COSEZBIn.png",Dr="/assets/logo-DGwTIxs2.png",ax="/assets/laboratory_equipment-BPQ1M4zA.png",sx="/assets/laboratory_room-BWfPMhDA.png",lx="/assets/team-bgcDLm39.png",nx="/assets/user1-CoKNmuxX.png",rx="/assets/user2-BFQ_Ltms.png",ix="/assets/user3-DMkBIEHB.png";function cx(){const[c,i]=j.useState({}),[u,d]=j.useState(0),[f,b]=j.useState(!1),v=j.useRef({}),h=j.useRef(null);j.useEffect(()=>{const g=()=>{const E=window.scrollY;d(E),b(E>50)};return window.addEventListener("scroll",g,{passive:!0}),()=>window.removeEventListener("scroll",g)},[]),j.useEffect(()=>{const g={threshold:.1,rootMargin:"0px 0px -100px 0px"},E=new IntersectionObserver(p=>{p.forEach(D=>{D.isIntersecting&&i(z=>({...z,[D.target.id]:!0}))})},g);return Object.values(v.current).forEach(p=>{p&&E.observe(p)}),()=>{Object.values(v.current).forEach(p=>{p&&E.unobserve(p)})}},[]);const w=[{icon:m0,title:"Accuracy of Results",description:"99% accuracy rate with advanced analytical technology",value:"99%",number:"01"},{icon:Kc,title:"Technological Innovation",description:"Cutting-edge equipment and state-of-the-art facilities",value:"Tech",number:"02"},{icon:wh,title:"Safety & Security",description:"Strict compliance with international safety standards",value:"100%",number:"03"},{icon:Sh,title:"Fast Results",description:"Optimized processes deliver results within 24 hours",value:"24h",number:"04"},{icon:to,title:"Professional Team",description:"Team of experienced and certified laboratory experts",value:"500+",number:"05"},{icon:Ah,title:"International Certification",description:"ISO certified and internationally recognized standards",value:"ISO",number:"06"}],C=[{icon:Eh,title:"Blood Testing",description:"Comprehensive blood testing with high accuracy",stats:"1000+"},{icon:Th,title:"Biochemical Analysis",description:"Analysis of important biochemical indicators",stats:"500+"},{icon:Ch,title:"Immunology Testing",description:"In-depth immunology testing",stats:"800+"},{icon:Rh,title:"Research & Development",description:"Research and development of new methods",stats:"200+"}],M=Array.from({length:30},(g,E)=>({id:E,size:Math.random()*4+2,left:Math.random()*100,top:Math.random()*100,delay:Math.random()*5,duration:Math.random()*3+5}));return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pastel-blue-lighter via-pastel-blue-light to-white overflow-hidden relative",children:[a.jsxs("div",{className:"fixed inset-0 z-0 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 animate-gradient",style:{background:"linear-gradient(-45deg, #99EBFF, #33D6FF, #00CCFF, #99EBFF)",backgroundSize:"400% 400%"}}),a.jsx("div",{className:"absolute inset-0",children:M.map(g=>a.jsx("div",{className:"absolute rounded-full bg-pastel-blue/30 animate-particle",style:{width:`${g.size}px`,height:`${g.size}px`,left:`${g.left}%`,top:`${g.top}%`,animationDelay:`${g.delay}s`,animationDuration:`${g.duration}s`}},g.id))}),a.jsx("div",{className:"absolute top-20 left-10 w-96 h-96 bg-pastel-blue/20 rounded-full blur-3xl animate-blob"}),a.jsx("div",{className:"absolute top-40 right-10 w-96 h-96 bg-pastel-blue-light/20 rounded-full blur-3xl animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute -bottom-8 left-1/2 w-96 h-96 bg-pastel-blue/15 rounded-full blur-3xl animate-blob animation-delay-4000"}),a.jsx("div",{className:"absolute bottom-20 right-1/4 w-72 h-72 bg-pastel-blue-dark/10 rounded-full blur-3xl animate-blob animation-delay-3000"})]}),a.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${f?"glass-enhanced shadow-lg py-3":"bg-transparent py-6"}`,children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:Dr,alt:"Lab Management",className:"w-10 h-10 object-contain"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Lab Management"})]}),a.jsxs("nav",{className:"hidden md:flex items-center gap-2",children:[a.jsxs("a",{href:"#features",className:`relative px-4 py-2 text-base font-medium transition-all duration-300 rounded-lg group backdrop-blur-sm ${f?"text-gray-900":"text-white/90"}`,children:[a.jsx("span",{className:"relative z-10 transition-colors duration-300 group-hover:text-gray-700",children:"Features"}),a.jsx("span",{className:"absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-md"})]}),a.jsxs("a",{href:"#services",className:`relative px-4 py-2 text-base font-medium transition-all duration-300 rounded-lg group backdrop-blur-sm ${f?"text-gray-900":"text-white/90"}`,children:[a.jsx("span",{className:"relative z-10 transition-colors duration-300 group-hover:text-gray-700",children:"Services"}),a.jsx("span",{className:"absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-md"})]}),a.jsxs("a",{href:"#stats",className:`relative px-4 py-2 text-base font-medium transition-all duration-300 rounded-lg group backdrop-blur-sm ${f?"text-gray-900":"text-white/90"}`,children:[a.jsx("span",{className:"relative z-10 transition-colors duration-300 group-hover:text-gray-700",children:"About"}),a.jsx("span",{className:"absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-md"})]}),a.jsxs("a",{href:"#cta",className:`relative px-4 py-2 text-base font-medium transition-all duration-300 rounded-lg group backdrop-blur-sm ${f?"text-gray-900":"text-white/90"}`,children:[a.jsx("span",{className:"relative z-10 transition-colors duration-300 group-hover:text-gray-700",children:"Contact"}),a.jsx("span",{className:"absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 shadow-md"})]})]}),a.jsxs("a",{href:"/login",className:"group relative flex items-center gap-2 px-6 py-2.5 text-gray-700 rounded-xl font-medium transition-all duration-300 border border-transparent hover:bg-white hover:shadow-lg hover:scale-105 hover:border-dashed hover:border-black focus:border-dashed focus:!border-black focus:bg-white focus:text-black outline-none",children:[a.jsx(jh,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-300"}),a.jsx("span",{children:"Login"})]})]})})}),a.jsx("section",{ref:h,className:"relative min-h-screen flex items-center justify-center overflow-hidden z-10 pt-20",children:a.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{className:"space-y-8 animate-slide-in-left",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 glass-enhanced rounded-full border border-pastel-blue/30 hover-glow animate-scale-in",children:[a.jsx("div",{className:"flex -space-x-2",children:[nx,rx,ix].map((g,E)=>a.jsx("img",{src:g,alt:`Client ${E+1}`,className:"w-8 h-8 rounded-full border-2 border-white shadow-md animate-scale-in object-cover",style:{animationDelay:`${E*.1}s`},onError:p=>{p.target.style.display="none";const D=document.createElement("div");D.className="w-8 h-8 rounded-full bg-pastel-blue border-2 border-white shadow-md",p.target.parentNode.appendChild(D)}},E))}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"+10K Clients"})]}),a.jsxs("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold leading-tight",children:[a.jsx("span",{className:"text-gradient-animate inline-block py-1 rounded-lg bg-white/20 backdrop-blur-sm",children:"Next-Gen"}),a.jsx("br",{}),a.jsx("span",{className:"text-gray-900",children:"Laboratory"}),a.jsx("br",{}),a.jsx("span",{className:"text-blue-700",children:"Solutions"})]}),a.jsx("p",{className:"text-xl text-gray-800 max-w-xl leading-relaxed animate-fade-in-delay",children:"Advanced laboratory services with AI-powered precision and comprehensive analytical solutions for modern healthcare."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 animate-fade-in-delay-2",children:[a.jsxs("button",{className:"group relative px-8 py-4 bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-xl font-semibold text-lg shadow-2xl hover:shadow-3xl transition-all duration-300 transform hover:scale-105 border-2 border-gray-700 hover:border-gray-600 overflow-hidden",children:[a.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["See Dashboard",a.jsx(u0,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pastel-blue/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),a.jsxs("button",{className:"group relative px-8 py-4 bg-white text-gray-900 rounded-xl font-semibold text-lg border-2 border-gray-200 hover:border-gray-300 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 overflow-hidden",children:[a.jsx("span",{className:"relative z-10",children:"Learn More"}),a.jsx("div",{className:"absolute inset-0 bg-gray-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})]})]}),a.jsxs("div",{className:"relative animate-slide-in-right",children:[a.jsxs("div",{className:"relative w-full aspect-square md:aspect-[4/3] rounded-3xl overflow-hidden shadow-2xl transform hover:scale-105 transition-all duration-700 group",children:[a.jsx("img",{src:tx,alt:"Modern Laboratory",className:"w-full h-full object-cover transform hover:scale-110 transition-transform duration-700",onError:g=>{g.target.style.display="none",g.target.nextElementSibling.style.display="block"}}),a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-pastel-blue via-pastel-blue-light to-pastel-blue-lighter hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:a.jsx(Kc,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 text-white/20"})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent"})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-700"})]}),a.jsx("div",{className:"absolute -bottom-6 -left-6 bg-white/95 backdrop-blur-md p-5 rounded-2xl shadow-2xl transform hover:scale-110 transition-all duration-300 border-2 border-pastel-blue/30 animate-scale-in",style:{animationDelay:"0.8s"},children:a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-black text-gray-900",children:"99.9%"}),a.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Accuracy Rate"})]})})}),a.jsx("div",{className:"absolute -top-6 -right-6 bg-white/95 backdrop-blur-md p-5 rounded-2xl shadow-2xl transform hover:scale-110 transition-all duration-300 border-2 border-pastel-blue/30 animate-scale-in",style:{animationDelay:"1s"},children:a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-black text-gray-900",children:"24/7"}),a.jsx("div",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Support"})]})})})]})]})})}),a.jsxs("section",{id:"gallery",ref:g=>v.current.gallery=g,className:"relative py-24 px-4 sm:px-6 lg:px-8 bg-white z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-[0.03]",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300CCFF' fill-opacity='0.4'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),a.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[a.jsxs("div",{className:`text-center mb-16 transition-all duration-1000 ${c.gallery?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Our Facilities"}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"State-of-the-art equipment and professional team"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`group relative overflow-hidden rounded-2xl aspect-[4/3] hover:shadow-xl transition-all duration-500 transform hover:scale-105 ${c.gallery?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[a.jsx("img",{src:ax,alt:"Advanced Laboratory Equipment",className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700",onError:g=>{g.target.style.display="none",g.target.nextElementSibling.style.display="block"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pastel-blue-light to-pastel-blue hidden",children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(Kc,{className:"w-24 h-24 text-white/50"})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/70 via-black/40 to-transparent",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:"Advanced Equipment"}),a.jsx("p",{className:"text-white/90 text-sm",children:"Modern laboratory instruments"})]})]}),a.jsxs("div",{className:`group relative overflow-hidden rounded-2xl aspect-[4/3] hover:shadow-xl transition-all duration-500 transform hover:scale-105 ${c.gallery?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:"100ms"},children:[a.jsx("img",{src:lx,alt:"Expert Laboratory Team",className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700",onError:g=>{g.target.style.display="none",g.target.nextElementSibling.style.display="block"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pastel-blue to-pastel-blue-dark hidden",children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(to,{className:"w-24 h-24 text-white/50"})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/70 via-black/40 to-transparent",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:"Expert Team"}),a.jsx("p",{className:"text-white/90 text-sm",children:"Certified professionals"})]})]}),a.jsxs("div",{className:`group relative overflow-hidden rounded-2xl aspect-[4/3] hover:shadow-xl transition-all duration-500 transform hover:scale-105 ${c.gallery?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:"200ms"},children:[a.jsx("img",{src:sx,alt:"Modern Laboratory Room",className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700",onError:g=>{g.target.style.display="none",g.target.nextElementSibling.style.display="block"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pastel-blue-dark to-pastel-blue-darker hidden",children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(m0,{className:"w-24 h-24 text-white/50"})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/70 via-black/40 to-transparent",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:"Modern Laboratory"}),a.jsx("p",{className:"text-white/90 text-sm",children:"Clean and sterile environment"})]})]})]})]})]}),a.jsx("section",{id:"features",ref:g=>v.current.features=g,className:"relative py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-900 to-gray-800 z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:`text-center mb-16 transition-all duration-1000 ${c.features?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:"Our Primary Features"}),a.jsx("p",{className:"text-lg text-white/90 max-w-2xl mx-auto",children:"Advanced technology and professional processes for modern laboratory solutions"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map((g,E)=>{const p=g.icon;return a.jsxs("div",{className:`group relative p-6 bg-white/95 backdrop-blur-md rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 ${c.features?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:`${E*100}ms`},children:[a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"inline-flex p-3 bg-pastel-blue/10 rounded-xl",children:a.jsx(p,{className:"w-6 h-6 text-pastel-blue-dark"})})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3 leading-tight",children:g.title}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:g.description})]},E)})})]})}),a.jsxs("section",{id:"services",ref:g=>v.current.services=g,className:"relative py-24 px-4 sm:px-6 lg:px-8 bg-white z-10 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-[0.03]",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300CCFF' fill-opacity='0.4'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-pastel-blue-lighter/10 via-transparent to-transparent pointer-events-none"}),a.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[a.jsxs("div",{className:`text-center mb-16 transition-all duration-1000 ${c.services?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"Professional Services"}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Diverse range of testing and analysis services"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((g,E)=>{const p=g.icon,D=["bg-white/95","bg-white/90","bg-white/95","bg-white/90"];return a.jsxs("div",{className:`group relative p-6 ${D[E%D.length]} backdrop-blur-md rounded-3xl shadow-xl hover:shadow-2xl transition-all duration-500 transform hover:scale-105 hover:-translate-y-4 border-2 border-pastel-blue/50 hover:border-pastel-blue/70 overflow-hidden ${c.services?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,style:{transitionDelay:`${E*100}ms`},children:[a.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-pastel-blue/25 to-transparent rounded-bl-full opacity-60 group-hover:opacity-80 transition-opacity"}),a.jsxs("div",{className:"flex items-start justify-between mb-5 relative z-10",children:[a.jsx("div",{className:"p-4 bg-gray-100 rounded-2xl border-2 border-gray-200 group-hover:bg-gray-200 group-hover:border-gray-300 transition-all duration-300 group-hover:rotate-12 transform shadow-xl",children:a.jsx(p,{className:"w-6 h-6 text-gray-900"})}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-3xl font-black bg-gradient-to-r from-pastel-blue-dark via-blue-600 to-pastel-blue-dark bg-clip-text text-transparent group-hover:scale-110 transform duration-300 leading-none",children:g.stats}),a.jsx("div",{className:"text-xs font-medium text-gray-500 mt-1",children:"Tests"})]})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3 group-hover:text-blue-700 transition-colors leading-tight",children:g.title}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-5 min-h-[3rem]",children:g.description}),a.jsx("div",{className:"pt-4 border-t-2 border-pastel-blue/30",children:a.jsxs("a",{href:"#",className:"text-xs font-semibold text-pastel-blue-dark hover:text-blue-600 transition-colors inline-flex items-center gap-2 group/link",children:[a.jsx("span",{children:"View details"}),a.jsx(u0,{className:"w-3.5 h-3.5 group-hover/link:translate-x-1 transition-transform"})]})})]},E)})})]})]}),a.jsxs("section",{id:"cta",ref:g=>v.current.cta=g,className:"relative py-24 px-4 sm:px-6 lg:px-8 overflow-hidden bg-white z-10",children:[a.jsx("div",{className:"absolute inset-0 opacity-[0.03]",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300CCFF' fill-opacity='0.4'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),a.jsxs("div",{className:`max-w-4xl mx-auto text-center relative z-10 transition-all duration-1000 ${c.cta?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[a.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-6",children:"Ready to Get Started?"}),a.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Contact us today for the best consultation and support"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{className:"group relative px-8 py-4 bg-gradient-to-br from-gray-900 to-gray-800 text-white rounded-xl font-semibold text-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 shadow-lg overflow-hidden",children:[a.jsx("span",{className:"relative z-10",children:"Contact Now"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pastel-blue/20 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),a.jsx("button",{className:"px-8 py-4 bg-white text-gray-900 border-2 border-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 hover:border-gray-400 transition-all duration-300 transform hover:scale-110 shadow-lg hover:shadow-xl",children:"View More Services"})]})]})]}),a.jsx("footer",{className:"relative bg-gradient-to-br from-gray-900 to-gray-800 text-white z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:Dr,alt:"Lab Management",className:"w-10 h-10 object-contain"}),a.jsx("span",{className:"text-xl font-bold",children:"Lab Management"})]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Advanced laboratory solutions with cutting-edge technology and professional expertise."}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-pastel-blue transition-colors",children:a.jsx(Dh,{className:"w-5 h-5"})}),a.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-pastel-blue transition-colors",children:a.jsx(zh,{className:"w-5 h-5"})}),a.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-pastel-blue transition-colors",children:a.jsx(Mh,{className:"w-5 h-5"})}),a.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-pastel-blue transition-colors",children:a.jsx(Oh,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#features",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Features"})}),a.jsx("li",{children:a.jsx("a",{href:"#services",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Services"})}),a.jsx("li",{children:a.jsx("a",{href:"#gallery",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Gallery"})}),a.jsx("li",{children:a.jsx("a",{href:"#stats",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"About Us"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Services"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Blood Testing"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Biochemical Analysis"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Immunology Testing"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"text-gray-400 hover:text-pastel-blue transition-colors",children:"Research & Development"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(D0,{className:"w-5 h-5 text-pastel-blue mt-0.5"}),a.jsx("span",{className:"text-gray-400 text-sm",children:"123 Laboratory St, Science City, SC 12345"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(z0,{className:"w-5 h-5 text-pastel-blue"}),a.jsx("span",{className:"text-gray-400 text-sm",children:"+1 (555) 123-4567"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(no,{className:"w-5 h-5 text-pastel-blue"}),a.jsx("span",{className:"text-gray-400 text-sm",children:"info@labsystem.com"})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8 text-center text-gray-400 text-sm",children:a.jsx("p",{children:" 2024 Lab Management. All rights reserved."})})]})})]})}const fe=M0.create({baseURL:void 0,headers:{"Content-Type":"application/json"},timeout:15e3,withCredentials:!1});fe.interceptors.request.use(c=>{const i=localStorage.getItem("accessToken");return i&&(c.headers.Authorization=`Bearer ${i}`),c},c=>Promise.reject(c));fe.interceptors.response.use(c=>c,async c=>{const i=c.response?.status,u=c.config;if(i===404&&u?.url?.includes("/ai-review/"))return Promise.reject(c);if(i===401&&u&&!u._retry&&!window.location.pathname.includes("/login")&&!u?.url?.includes("/Auth/refresh")){u._retry=!0;try{const d=localStorage.getItem("refreshToken");if(!d)throw new Error("Missing refresh token");const b=await M0.create({baseURL:fe.defaults.baseURL,headers:{"Content-Type":"application/json"},timeout:15e3,withCredentials:!1}).post("/Auth/refresh",{refreshToken:d});if(b.status===200){const{accessToken:v,refreshToken:h}=b.data||{};if(!v||!h)throw new Error("Invalid refresh response");return localStorage.setItem("accessToken",v),localStorage.setItem("refreshToken",h),u.headers=u.headers||{},u.headers.Authorization=`Bearer ${v}`,fe(u)}}catch{}try{localStorage.clear(),sessionStorage.clear()}catch{}return window.location.href="/login",Promise.reject(c)}return Promise.reject(c)});const Ct=ro(c=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,role:null,login:(i,u,d,f=null)=>c({user:i,accessToken:u,refreshToken:d,isAuthenticated:!0,role:f||i?.roleId||i?.role||null}),logout:()=>{try{localStorage.clear(),sessionStorage.clear()}catch{}c({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,role:null})},initializeAuth:()=>{const i=localStorage.getItem("accessToken"),u=localStorage.getItem("refreshToken"),d=localStorage.getItem("user");if(i&&u){const f=d?JSON.parse(d):null;c({accessToken:i,refreshToken:u,isAuthenticated:!0,user:f,role:f?.roleId||f?.role||null})}}}));function ox(){const[c,i]=j.useState({email:"",password:""}),[u,d]=j.useState(!1),[f,b]=j.useState(!1),[v,h]=j.useState({}),[w,C]=j.useState(""),[M,g]=j.useState(""),E=it(),{login:p,isAuthenticated:D,initializeAuth:z}=Ct();j.useEffect(()=>{z(),D&&E("/dashboard",{replace:!0})},[D,E,z]);const K=H=>{const{name:ee,value:_}=H.target;i(Z=>({...Z,[ee]:_})),v[ee]&&h(Z=>({...Z,[ee]:""})),w&&(C(""),g(""))},J=()=>{const H={};return c.email?/\S+@\S+\.\S+/.test(c.email)||(H.email="Invalid email format. Please enter a valid email address."):H.email="Email cannot be blank",c.password||(H.password="Password cannot be left blank."),h(H),Object.keys(H).length===0},$=async H=>{if(H.preventDefault(),!!J()){b(!0),h({}),C(""),g("");try{const ee=await fe.post("/Auth/login",c);if(console.log("Login response:",ee.data),console.log("Response structure:",{hasUser:!!ee.data.user,hasRoleId:!!ee.data.roleId,hasUserId:!!ee.data.userId,fullData:ee.data}),ee.status===200){const{accessToken:_,refreshToken:Z}=ee.data;if(!_||!Z){C("Invalid response from server"),g("general");return}localStorage.setItem("accessToken",_),localStorage.setItem("refreshToken",Z);const de=ee.data||null;localStorage.setItem("user",JSON.stringify(de)),p(de,_,Z,de?.roleId),E("/dashboard")}}catch(ee){console.error("Login error:",ee);const _=ee.response?.status,Z=ee.response?.data;console.log("Response status:",_),console.log("Response data:",Z),_===401?(C(Z.detail||"Invalid credentials"),g("unauthorized")):_===429?(C(Z.detail||"Account is locked"),g("locked")):(C("Login failed. Please try again."),g("general"))}finally{b(!1)}}},P=()=>{console.log("Google login clicked")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-5",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),a.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-200 rounded-full opacity-20 animate-pulse"}),a.jsx("div",{className:"absolute top-40 right-20 w-16 h-16 bg-blue-300 rounded-full opacity-30 animate-bounce"}),a.jsx("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-blue-400 rounded-full opacity-25 animate-pulse"}),a.jsxs("div",{className:"absolute top-6 left-6 flex items-center space-x-4",children:[a.jsx("img",{src:Dr,alt:"Logo",className:"w-20 h-20 object-contain"}),a.jsx("div",{className:"p-2",children:a.jsx("span",{className:"text-blue-800 text-2xl font-bold",children:"Laboratory Management"})})]}),a.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:a.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-8 w-full max-w-md border border-white/20 animate-slide-up",children:[a.jsxs("div",{className:"text-center mb-8 animate-fade-in-delay",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg animate-pulse",children:a.jsxs("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}),a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})]})}),a.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Sign in to Laboratory Management System"})]}),w&&a.jsx("div",{className:`mb-4 p-4 border rounded-xl text-sm animate-shake ${M==="locked"?"bg-gradient-to-r from-red-50 to-red-100 border-red-300 text-red-800 shadow-lg":"bg-gradient-to-r from-red-50 to-red-100 border-red-200 text-red-600 shadow-md"}`,children:a.jsxs("div",{className:"flex items-center",children:[M==="locked"&&a.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3 animate-pulse",children:a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:w}),M==="unauthorized"&&a.jsx("p",{className:"text-xs mt-1 text-red-500",children:"Please check your credentials and try again."}),M==="locked"&&a.jsx("p",{className:"text-xs mt-1 text-red-500",children:"Your account has been temporarily locked due to multiple failed login attempts."})]})]})}),a.jsxs("form",{onSubmit:$,className:"space-y-6 animate-fade-in-delay-2",noValidate:!0,children:[a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700 group-focus-within:text-blue-600 transition-colors duration-200",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),v.email&&a.jsx("span",{className:"text-xs text-red-600 animate-fade-in",children:v.email})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-5 h-5 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),a.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:K,className:`w-full pl-10 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 focus:bg-white ${v.email?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-blue-400 focus:border-blue-500"}`,placeholder:"Enter your email"})]})]}),a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700 group-focus-within:text-blue-600 transition-colors duration-200",children:["Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),v.password&&a.jsx("span",{className:"text-xs text-red-600 animate-fade-in",children:v.password})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-5 h-5 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),a.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:c.password,onChange:K,className:`w-full pl-10 pr-20 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 focus:bg-white ${v.password?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-blue-400 focus:border-blue-500"}`,placeholder:"Enter your password"}),a.jsxs("button",{type:"button",onClick:()=>d(!u),className:"absolute right-0 top-0 h-full px-4 flex items-center border-l border-gray-300 hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 rounded-r-xl group",children:[a.jsx("svg",{className:"w-4 h-4 text-gray-500 group-hover:text-blue-600 mr-2 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),a.jsx("span",{className:"text-sm text-gray-500 group-hover:text-blue-600 transition-colors duration-200",children:u?"Hide":"Show"})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm animate-fade-in-delay-3",children:[a.jsx("a",{href:"/forgot-password",className:"text-blue-600 hover:text-blue-800 hover:underline transition-all duration-200 hover:scale-105 transform",children:"Forgot password?"}),a.jsxs("span",{className:"text-gray-600",children:["Don't have an account?"," ",a.jsx("a",{href:"/register",className:"text-blue-600 hover:text-blue-800 hover:underline transition-all duration-200 hover:scale-105 transform font-medium",children:"Register"})]})]}),a.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg active:scale-[0.98] shadow-md animate-fade-in-delay-4",children:f?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Logging in..."]}):a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Sign In"]})}),a.jsxs("div",{className:"relative animate-fade-in-delay-5",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"Or continue with"})})]}),a.jsx("button",{type:"button",onClick:P,className:"w-full bg-white border border-gray-300 text-gray-700 py-3 px-4 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-sm animate-fade-in-delay-6",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})]})]})})]})}function dx(){const[c,i]=j.useState({email:"",password:"",fullName:"",identifyNumber:""}),[u,d]=j.useState(!1),[f,b]=j.useState(!1),[v,h]=j.useState({}),[w,C]=j.useState(""),[M,g]=j.useState(""),E=it(),p=K=>{const{name:J,value:$}=K.target;i(P=>({...P,[J]:$})),v[J]&&h(P=>({...P,[J]:""})),w&&M!=="success"&&(C(""),g(""))},D=()=>{const K={};return c.email?/\S+@\S+\.\S+/.test(c.email)||(K.email="Invalid email. Please enter in correct format."):K.email="Email cannot be blank",c.password?c.password.length<8?K.password="Password must be at least 8 characters.":/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])/.test(c.password)||(K.password="Password must contain uppercase, lowercase, numbers and special characters."):K.password="Password cannot be left blank.",c.fullName?/^[a-zA-Z-\s]+$/.test(c.fullName)?c.fullName.length>100&&(K.fullName="Full name cannot exceed 100 characters."):K.fullName="Full name cannot contain numbers or special characters.":K.fullName="Full Name cannot be blank",c.identifyNumber?/^\d{9}$|^\d{12}$/.test(c.identifyNumber)||(K.identifyNumber="Identify Number must have 9 or 12 digits."):K.identifyNumber="Identify Number cannot be blank",h(K),Object.keys(K).length===0},z=async K=>{if(K.preventDefault(),!!D()){b(!0),C(""),g("");try{(await fe.post("/Registers/registers",{email:c.email,password:c.password,fullName:c.fullName,identifyNumber:c.identifyNumber})).status===201&&(i({email:"",password:"",fullName:"",identifyNumber:""}),C("Registration successful! Please login with your credentials."),g("success"),setTimeout(()=>{E("/login",{state:{message:"Registration successful! Please login with your credentials.",type:"success"}})},2e3))}catch(J){console.error("Registration error:",J);const $=J.response?.status,P=J.response?.data;console.log("Response status:",$),console.log("Response data:",P),$===400?(C(P.detail||"Invalid registration data"),g("validation")):$===409?(C(P.detail||"Email already exists"),g("conflict")):(C("Registration failed. Please try again."),g("general"))}finally{b(!1)}}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-5",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),a.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-200 rounded-full opacity-20 animate-pulse"}),a.jsx("div",{className:"absolute top-40 right-20 w-16 h-16 bg-blue-300 rounded-full opacity-30 animate-bounce"}),a.jsx("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-blue-400 rounded-full opacity-25 animate-pulse"}),a.jsx("div",{className:"absolute top-6 left-6 animate-fade-in",children:a.jsxs("div",{className:"flex items-center space-x-2 group cursor-pointer",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),a.jsx("span",{className:"text-xl font-bold text-blue-800 group-hover:text-blue-900 transition-colors duration-300",children:"Register Page"})]})}),a.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:a.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-6 w-full max-w-lg border border-white/20 animate-slide-up",children:[a.jsxs("div",{className:"text-center mb-6 animate-fade-in-delay",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-700 rounded-full mx-auto mb-3 flex items-center justify-center shadow-lg animate-pulse",children:a.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})})}),a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-green-800 bg-clip-text text-transparent mb-1",children:"Create Account"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Join Laboratory Management System"})]}),w&&a.jsx("div",{className:`mb-4 p-4 border rounded-xl text-sm animate-shake ${M==="conflict"?"bg-gradient-to-r from-red-50 to-red-100 border-red-300 text-red-800 shadow-lg":"bg-gradient-to-r from-red-50 to-red-100 border-red-200 text-red-600 shadow-md"}`,children:a.jsxs("div",{className:"flex items-center",children:[M==="success"&&a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),M==="conflict"&&a.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3 animate-pulse",children:a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:w}),M==="conflict"&&a.jsx("p",{className:"text-xs mt-1 text-red-500",children:"Please use a different email address."}),M==="success"&&a.jsx("p",{className:"text-xs mt-1 text-green-500",children:"Redirecting to login page..."})]})]})}),a.jsxs("form",{onSubmit:z,className:"space-y-4 animate-fade-in-delay-2",noValidate:!0,children:[a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700 group-focus-within:text-blue-600 transition-colors duration-200",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),v.email&&a.jsx("span",{className:"text-xs text-red-600 animate-fade-in",children:v.email})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),a.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:p,className:`w-full pl-9 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 focus:bg-white ${v.email?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-blue-400 focus:border-blue-500"}`,placeholder:"Enter your email"})]})]}),a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700 group-focus-within:text-blue-600 transition-colors duration-200",children:["Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),v.password&&a.jsx("span",{className:"text-xs text-red-600 animate-fade-in",children:v.password})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),a.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:c.password,onChange:p,className:`w-full pl-9 pr-16 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 focus:bg-white ${v.password?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-blue-400 focus:border-blue-500"}`,placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-0 top-0 h-full px-3 flex items-center border-l border-gray-300 hover:bg-blue-50 hover:border-blue-300 transition-all duration-200 rounded-r-lg group",children:a.jsx("svg",{className:"w-4 h-4 text-gray-500 group-hover:text-blue-600 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:u?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})})})]})]}),a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("label",{htmlFor:"fullName",className:"text-sm font-medium text-gray-700 group-focus-within:text-blue-600 transition-colors duration-200",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),v.fullName&&a.jsx("span",{className:"text-xs text-red-600 animate-fade-in",children:v.fullName})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsx("input",{type:"text",id:"fullName",name:"fullName",value:c.fullName,onChange:p,className:`w-full pl-9 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 focus:bg-white ${v.fullName?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-blue-400 focus:border-blue-500"}`,placeholder:"Enter your full name"})]})]}),a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("label",{htmlFor:"identifyNumber",className:"text-sm font-medium text-gray-700 group-focus-within:text-blue-600 transition-colors duration-200",children:["Identify Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),v.identifyNumber&&a.jsx("span",{className:"text-xs text-red-600 animate-fade-in",children:v.identifyNumber})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"w-4 h-4 text-gray-400 group-focus-within:text-blue-500 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})})}),a.jsx("input",{type:"text",id:"identifyNumber",name:"identifyNumber",value:c.identifyNumber,onChange:p,className:`w-full pl-9 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 bg-gray-50 focus:bg-white ${v.identifyNumber?"border-red-300 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-blue-400 focus:border-blue-500"}`,placeholder:"Enter your Identify Number (9 or 12 digits)",maxLength:"12"})]})]}),a.jsx("div",{className:"flex justify-center items-center text-sm animate-fade-in-delay-3",children:a.jsxs("span",{className:"text-gray-600",children:["Already have an account?"," ",a.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-800 hover:underline transition-all duration-200 hover:scale-105 transform font-medium",children:"Login"})]})}),a.jsxs("div",{className:"flex space-x-3 animate-fade-in-delay-4",children:[a.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white py-2.5 px-4 rounded-lg font-semibold hover:from-green-700 hover:to-green-800 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-[1.02] hover:shadow-lg active:scale-[0.98] shadow-md",children:f?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create Account"]})}),a.jsx("button",{type:"button",onClick:()=>E("/login"),className:"flex-1 bg-white text-gray-700 py-2.5 px-4 rounded-lg font-semibold border border-gray-300 hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]})})]})]})]})})]})}const q0=()=>{const{isAuthenticated:c,role:i}=Ct();return{isAuthenticated:c,role:i,checkRole:f=>!c||!i?!1:i===f,checkAnyRole:f=>!c||!i?!1:f.includes(i)}},v0="/assets/user_icon-CF-LHGuW.png",ux="/assets/dashboard_icon-B1xW_t8G.png",mx="/assets/create_user_icon-CLt_SE5N.png",fx="/assets/role_management_icon-C6908uqw.png",gx="/assets/create_role_icon-BdR9KGYN.png",hx="/assets/event_logs_icon-DeVp0e2g.png",xx="/assets/user_management_icon-CWnDDMX0.png",H0="/assets/patient_management-Dk3n3j29.png",px="/assets/logout_icon-3o2ak3cM.png",bx=c=>{try{const u=c.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),d=decodeURIComponent(atob(u).split("").map(f=>"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(d)}catch(i){return console.error("Error decoding JWT:",i),null}};function yx({sidebarOpen:c,setSidebarOpen:i}){const u=it(),d=T0(),{user:f,logout:b,accessToken:v,refreshToken:h}=Ct(),{role:w}=q0(),[C,M]=j.useState(!1),[g,E]=j.useState(!1),p=v&&typeof v=="string"&&v.includes(".")?bx(v):null,D=p?.email||p?.Email||null,z=localStorage.getItem("user"),K=z?JSON.parse(z):null,J=z?JSON.parse(z):null,$=D||f?.email||K?.email||"No email",P=p?.roleId||p?.RoleId||J?.roleId||J?.RoleId||f?.roleId||f?.RoleId||null,H=P===1||P==="1",ee=p?.privilege||p?.privileges||p?.Privilege||p?.Privileges||[],_=J?.privileges||[];let Z=ee&&ee.length>0?ee:_;typeof Z=="string"&&(Z=[Z]),Array.isArray(Z)||(Z=[]);const de=()=>M(!0),pe=async()=>{try{E(!0);const I=h||localStorage.getItem("refreshToken");I&&await fe.post("/Auth/logout",{refreshToken:I})}catch{console.warn("Logout API failed, continuing local logout...")}finally{E(!1),M(!1),b(),u("/login")}},T=[{id:"dashboard",label:"Dashboard",icon:ux,path:"/dashboard",requiredPrivilege:null},{id:"profile",label:"Profile",icon:v0,path:"/profile",requiredPrivilege:null},{id:"patient-management",label:"Patient Management",icon:H0,path:"/patients",requiredPrivilege:"VIEW_USER"},{id:"user-management",label:"User Management",icon:xx,path:"/users",requiredPrivilege:"VIEW_USER"},{id:"create-user",label:"Create User",icon:mx,path:"/create-user",requiredPrivilege:"CREATE_USER"},{id:"medical-records",label:"Medical Records",isLucideIcon:!0,icon:Tr,path:"/medical-records",requiredPrivilege:"VIEW_USER"},{id:"test-orders",label:"Test Orders",isLucideIcon:!0,icon:is,path:"/test-orders",requiredPrivilege:"VIEW_TEST_ORDER"},{id:"role-management",label:"Role Management",icon:fx,path:"/role-management",requiredPrivilege:"VIEW_ROLE"},{id:"create-role",label:"Create Role",icon:gx,path:"/role-management/create",requiredPrivilege:"CREATE_ROLE"},{id:"event-logs",label:"Event Logs",icon:hx,path:"/event-logs",requiredPrivilege:"VIEW_EVENT_LOGS"}].filter(I=>I.showOnlyForUsers&&H?!1:I.requiredPrivilege?Z.includes(I.requiredPrivilege):!0),W=I=>d.pathname===I;return a.jsxs("div",{className:`${c?"w-64":"w-0"} bg-blue-900 transition-all duration-300 flex flex-col overflow-hidden fixed left-0 top-0 h-screen z-40`,children:[a.jsx("div",{className:`p-6 border-b border-blue-800 ${c?"block":"hidden"}`,children:a.jsxs("div",{className:"text-white",children:[a.jsx("div",{className:"w-full rounded-lg bg-white/15 border border-white/30 p-2.5 shadow-sm",children:a.jsxs("div",{className:"flex items-center min-w-0",children:[a.jsx("div",{className:"flex items-center justify-center w-7 h-7 rounded-md bg-white/20 text-white mr-2.5 flex-shrink-0",children:a.jsx("img",{src:v0,alt:"user",className:"w-4 h-4 filter brightness-0 invert"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("div",{className:"text-[10px] uppercase tracking-wider text-blue-100",children:"Signed in"}),a.jsx("div",{className:"mt-0.5 text-white text-base font-semibold leading-tight truncate",title:$,children:$})]})]})}),w&&a.jsxs("div",{className:"text-xs text-blue-300 mt-2",children:["Role: ",w]})]})}),a.jsx("nav",{className:`flex-1 p-4 ${c?"block":"hidden"}`,children:a.jsx("ul",{className:"space-y-2",children:T.map(I=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>u(I.path),className:`w-full flex items-center px-4 py-3 text-left rounded-lg transition-all duration-200 ${W(I.path)?"bg-blue-800 text-white":"text-blue-200 hover:bg-blue-800 hover:text-white"}`,children:[I.isLucideIcon?a.jsx(I.icon,{className:"w-5 h-5 mr-3"}):a.jsx("img",{src:I.icon,alt:I.label,className:"w-5 h-5 mr-3 filter brightness-0 invert"}),a.jsx("span",{className:c?"block":"hidden",children:I.label})]})},I.id))})}),a.jsx("div",{className:`p-4 border-t border-blue-800 ${c?"block":"hidden"}`,children:a.jsxs("button",{onClick:de,className:"w-full flex items-center justify-center px-4 py-3 rounded-xl text-left text-white bg-gradient-to-r from-blue-600 to-indigo-600 shadow-sm hover:shadow-md hover:from-blue-500 hover:to-indigo-500 active:scale-[0.99] transition-all duration-200",children:[a.jsx("img",{src:px,alt:"logout",className:"w-5 h-5 mr-3 filter brightness-0 invert"}),a.jsx("span",{className:c?"block":"hidden",children:"Logout"})]})}),C&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>!g&&M(!1)}),a.jsx("div",{className:"relative z-10 w-full max-w-md mx-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"px-6 py-5",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-red-100 text-red-600 mr-3",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sign out"})]}),a.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Are you sure you want to log out? You will need to sign in again to access your dashboard."})]}),a.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>M(!1),disabled:g,className:"px-4 py-2 rounded-lg text-sm font-medium text-gray-700 bg-white border border-gray-200 hover:bg-gray-100 transition-colors duration-150 disabled:opacity-60 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{type:"button",onClick:pe,disabled:g,className:"px-4 py-2 rounded-lg text-sm font-medium text-white bg-red-600 hover:bg-red-500 transition-colors duration-150 disabled:opacity-70 disabled:cursor-not-allowed",children:g?"Logging out...":"Log out"})]})]})})]})]})}function vx({sidebarOpen:c,setSidebarOpen:i}){const{user:u}=Ct(),{role:d}=q0();return a.jsx("header",{className:`bg-white shadow-sm border-b border-gray-200 fixed top-0 right-0 z-30 ${c?"left-64":"left-0"}`,children:a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>i(!c),className:"p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:a.jsx("svg",{className:`w-6 h-6 transition-transform duration-300 ${c?"rotate-90":"rotate-0"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded flex items-center justify-center",children:a.jsx("img",{src:Dr,alt:"Logo",className:"w-10 h-10 object-contain"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Laboratory Management"})]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:d&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:d})})]})})}function Xe({children:c}){const[i,u]=j.useState(!0);return j.useEffect(()=>{u(!0)},[]),a.jsxs("div",{className:"min-h-screen bg-gray-100 flex overflow-hidden",children:[a.jsx(yx,{sidebarOpen:i,setSidebarOpen:u}),a.jsxs("div",{className:`flex-1 flex flex-col min-w-0 overflow-hidden transition-all duration-300 ${i?"ml-64":"ml-0"}`,children:[a.jsx(vx,{sidebarOpen:i,setSidebarOpen:u}),a.jsx("main",{className:"flex-1 p-6 overflow-auto pt-20",children:a.jsx("div",{className:"w-full",children:c})})]})]})}function Nx(){const[c,i]=j.useState({fullName:"",gender:"",dob:"",address:"",age:"",phoneNumber:"",identifyNumber:"",email:"",roleId:""}),[u,d]=j.useState(!1),[f,b]=j.useState({}),[v,h]=j.useState(""),[w,C]=j.useState(""),[M,g]=j.useState(""),[E,p]=j.useState([]),[D,z]=j.useState(!0),K=it();j.useEffect(()=>{(async()=>{try{z(!0);const ee=await fe.get("/Roles",{params:{Page:1,PageSize:100,SortBy:"Name",SortDesc:!1}}),_=ee.data?.items||ee.data?.data||ee.data||[];Array.isArray(_)?p(_):p([])}catch(ee){const _=ee.response?.status;if(_===401||_===403)h("Access denied. Only administrators can create users."),C("unauthorized"),setTimeout(()=>{K("/dashboard")},3e3);else{const Z=ee.response?.data?.message||ee.response?.data?.detail||ee.message||"Failed to load roles. Please refresh the page.";h(`Error: ${Z} (Status: ${_||"Unknown"})`),C("general")}}finally{z(!1)}})()},[]);const J=H=>{const{name:ee,value:_}=H.target;i(Z=>({...Z,[ee]:_})),v&&(h(""),C("")),M&&g(""),f[ee]&&b(Z=>({...Z,[ee]:""}))},$=()=>{const H={};if(!c.fullName||c.fullName.trim()===""||c.fullName.toLowerCase()==="null"?H.fullName="Full Name cannot be blank":/^[a-zA-Z-\s]+$/.test(c.fullName)?c.fullName.length>100&&(H.fullName="Full name cannot exceed 100 characters."):H.fullName="Full name cannot contain numbers or special characters.",c.gender?["male","female"].includes(c.gender.toLowerCase())||(H.gender="Gender can only be selected as Male or Female."):H.gender="Gender cannot be blank",!c.dob)H.dob="Date of birth cannot be left blank.";else{const ee=new Date(c.dob),_=new Date,Z=new Date;Z.setFullYear(_.getFullYear()-100),ee>_?H.dob="Date of birth cannot exceed the current date.":ee<Z&&(H.dob="Invalid date of birth (age too old).")}if(!c.address||c.address.trim()===""||c.address.toLowerCase()==="null"?H.address="Address cannot be blank":c.address.length<5?H.address="Address must be at least 5 characters long.":c.address.length>255&&(H.address="The address cannot exceed 255 characters."),!c.age||c.age.trim()===""||c.age.toLowerCase()==="null"?H.age="Age cannot be blank":(isNaN(c.age)||parseInt(c.age)<1||parseInt(c.age)>120)&&(H.age="Age must be between 1 and 120."),!c.phoneNumber||c.phoneNumber.trim()===""||c.phoneNumber.toLowerCase()==="null"?H.phoneNumber="Phone Number cannot be blank":/^(\+?\d{9,11})$/.test(c.phoneNumber.replace(/\s/g,""))||(H.phoneNumber="Invalid phone number. Please enter 911 digits."),!c.identifyNumber||c.identifyNumber.trim()===""||c.identifyNumber.toLowerCase()==="null"?H.identifyNumber="Identify Number cannot be blank":/^\d{9}$|^\d{12}$/.test(c.identifyNumber)||(H.identifyNumber="Identify Number must have 9 or 12 digits."),!c.email||c.email.trim()===""||c.email.toLowerCase()==="null"?H.email="Email cannot be blank":/\S+@\S+\.\S+/.test(c.email)||(H.email="Invalid email. Please enter in correct format."),c.roleId||(H.roleId="Role cannot be blank"),c.dob&&c.age){const ee=new Date(c.dob),_=new Date,Z=_.getFullYear()-ee.getFullYear(),de=_.getMonth()-ee.getMonth(),pe=de<0||de===0&&_.getDate()<ee.getDate()?Z-1:Z;parseInt(c.age)!==pe&&(H.age=`Age must match date of birth. Calculated age is ${pe}.`,H.dob="Date of birth must match age. Please verify both fields.")}return b(H),Object.keys(H).length===0},P=async H=>{if(H.preventDefault(),!!$()){d(!0),h(""),C(""),g("");try{(await fe.post("/User/create",{fullName:c.fullName,email:c.email,phoneNumber:c.phoneNumber,identifyNumber:c.identifyNumber,gender:c.gender,age:parseInt(c.age),address:c.address,dateOfBirth:c.dob,roleId:parseInt(c.roleId)})).status===201&&(i({fullName:"",gender:"",dob:"",address:"",age:"",phoneNumber:"",identifyNumber:"",email:"",roleId:""}),g("User created successfully!"))}catch(ee){const _=ee.response?.status,Z=ee.response?.data;_===400?(h(Z.detail||"Invalid user data"),C("validation")):_===409?(h(Z.detail||"Email already exists"),C("conflict")):(h("User creation failed. Please try again."),C("general"))}finally{d(!1)}}};return a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 md:p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CREATE USER"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Create a new user account with complete information"})]}),M&&a.jsx("div",{className:"mb-4 p-3 border rounded text-sm bg-green-50 border-green-200 text-green-600",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:M}),a.jsx("p",{className:"text-xs mt-1 text-green-500",children:"You can now create another user or go back to dashboard."})]})]})}),v&&a.jsx("div",{className:`mb-4 p-3 border rounded text-sm ${w==="conflict"||w==="unauthorized"?"bg-red-100 border-red-300 text-red-800":"bg-red-50 border-red-200 text-red-600"}`,children:a.jsxs("div",{className:"flex items-center",children:[(w==="conflict"||w==="unauthorized")&&a.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:v}),w==="conflict"&&a.jsx("p",{className:"text-xs mt-1 text-red-500",children:"Please use a different email address."}),w==="unauthorized"&&a.jsx("p",{className:"text-xs mt-1 text-red-500",children:"Redirecting to dashboard in 3 seconds..."})]})]})}),w!=="unauthorized"&&a.jsxs("form",{onSubmit:P,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"fullName",className:"block text-sm font-medium text-black mb-2",children:["Fullname ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"fullName",name:"fullName",value:c.fullName,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.fullName?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,placeholder:"Enter full name"}),f.fullName&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.fullName})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"gender",className:"block text-sm font-medium text-black mb-2",children:["Gender ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"gender",name:"gender",value:c.gender,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.gender?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,children:[a.jsx("option",{value:"",children:"Gender..."}),a.jsx("option",{value:"male",children:"Male"}),a.jsx("option",{value:"female",children:"Female"})]}),f.gender&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.gender})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"dob",className:"block text-sm font-medium text-black mb-2",children:["Date of birth ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",id:"dob",name:"dob",value:c.dob,onChange:J,className:`w-full px-4 py-3 pr-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.dob?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),a.jsx("svg",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})]}),f.dob&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.dob})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"roleId",className:"block text-sm font-medium text-black mb-2",children:["Role ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"roleId",name:"roleId",value:c.roleId||"",onChange:J,disabled:D,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.roleId?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"} ${D?"bg-gray-100 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"",children:D?"Loading roles...":"Select role..."}),Array.isArray(E)&&E.map(H=>a.jsx("option",{value:H.id||H.roleId,children:H.roleName||H.name},H.id||H.roleId))]}),f.roleId&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.roleId})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"age",className:"block text-sm font-medium text-black mb-2",children:["Age ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",id:"age",name:"age",value:c.age,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.age?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,placeholder:"Enter age",min:"1",max:"120"}),f.age&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.age})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-black mb-2",children:["Phone number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:c.phoneNumber,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.phoneNumber?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,placeholder:"Enter phone number"}),f.phoneNumber&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.phoneNumber})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"identifyNumber",className:"block text-sm font-medium text-black mb-2",children:["Identify Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"identifyNumber",name:"identifyNumber",value:c.identifyNumber,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.identifyNumber?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,placeholder:"Enter Identify Number (9 or 12 digits)",maxLength:"12"}),f.identifyNumber&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.identifyNumber})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-black mb-2",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.email?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,placeholder:"Enter email"}),f.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.email})]})]})]}),a.jsxs("div",{className:"col-span-full",children:[a.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-black mb-2",children:["Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"address",name:"address",value:c.address,onChange:J,className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.address?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`,placeholder:"Enter complete address"}),f.address&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.address})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"submit",disabled:u||D,className:"flex-1 bg-custom-dark-blue text-white py-2 px-4 rounded-lg font-semibold hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:u?"Creating User...":"Create User"}),a.jsx("button",{type:"button",onClick:()=>K("/dashboard"),className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-semibold border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]",children:"Cancel"})]})]})]})})})})}function jx(){const{user:c,accessToken:i}=Ct(),[u,d]=j.useState(!1),[f,b]=j.useState(""),[v,h]=j.useState(null),[w,C]=j.useState(!1),[M,g]=j.useState({}),[E,p]=j.useState(!1),[D,z]=j.useState(""),K=k=>{try{const W=k.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),I=decodeURIComponent(atob(W).split("").map(ge=>"%"+("00"+ge.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(I)}catch{return null}};let J=c;if(!J)try{const k=localStorage.getItem("user");J=k?JSON.parse(k):null}catch{J=null}const $=j.useMemo(()=>{const k=i||localStorage.getItem("accessToken");return k?K(k):null},[i]),P=j.useMemo(()=>$&&[$?.userId,$?.UserId,$?.uid,$?.nameid,$?.sub,$?.["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]].find(T=>T!=null)||null,[$]),H=j.useMemo(()=>J?.userId||J?.id||J?.user?.userId||J?.user?.id||null||P||null,[J,P]);j.useEffect(()=>{(async()=>{if(!H){b("Cannot determine current user ID. Please log in again.");return}d(!0),b("");try{const T=i||localStorage.getItem("accessToken"),I=(await fe.get("/User/getUserProfile",{params:{userId:H},headers:{Authorization:`Bearer ${T}`}}))?.data;if(!I){b("User not found."),h(null);return}const ge={userId:I.userId,fullName:I.fullName??"",email:I.email??"",phoneNumber:I.phoneNumber??"",gender:I.gender??"",age:I.age??"",address:I.address??"",dateOfBirth:I.dateOfBirth??""};h(ge),g(ge)}catch(T){console.error(T),b(T.response?.data?.message||"Failed to load profile from server.")}finally{d(!1)}})()},[H,i]);const ee=k=>{const{name:T,value:W}=k.target;g(I=>({...I,[T]:W})),z(""),b("")},_=async()=>{p(!0),b(""),z("");try{const k={userId:M.userId};Object.keys(M).forEach(T=>{M[T]!==""&&T!=="userId"&&(k[T]=M[T])}),await fe.put("/User/update",k),z("Profile updated successfully."),h(M),C(!1)}catch(k){b(k.response?.data?.message||"Failed to update profile.")}finally{p(!1)}},Z=()=>{g(v),C(!1),b(""),z("")},de=(k,T)=>a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-500",children:k}),a.jsx("div",{className:"text-gray-900 font-medium break-words",children:T||"-"})]}),pe=(k,T,W="text")=>a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:k}),a.jsx("input",{type:W,name:T,value:M[T]||"",onChange:ee,className:"w-full mt-1 px-3 py-2 border rounded-lg"})]});return a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 py-4",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border p-6 md:p-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-custom-dark-blue",children:"PROFILE"}),!w&&v&&a.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit Profile"})]}),f&&a.jsx("div",{className:"mb-2 text-red-600",children:f}),D&&a.jsx("div",{className:"mb-2 text-green-600",children:D}),u?a.jsx("div",{className:"text-center py-8",children:"Loading..."}):v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w?a.jsxs(a.Fragment,{children:[pe("Fullname","fullName"),pe("Email","email","email"),pe("Phone number","phoneNumber"),pe("Gender","gender"),pe("Age","age","number"),pe("Date of birth","dateOfBirth","date"),pe("Address","address")]}):a.jsxs(a.Fragment,{children:[de("Fullname",v.fullName),de("Email",v.email),de("Phone number",v.phoneNumber),de("Gender",v.gender),de("Age",v.age),de("Date of birth",v.dateOfBirth?new Date(v.dateOfBirth).toLocaleDateString("en-GB"):""),de("Address",v.address)]})}),w&&a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:_,disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:E?"Saving...":"Save"}),a.jsx("button",{onClick:Z,className:"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}):a.jsx("div",{children:"No profile data."})]})})})})}const wx="/assets/user_management-BWbx8fS6.png",Sx="/assets/test_orders-5dhBvPU5.png",Ax="/assets/reports-BYPSNMZI.png",Ex="/assets/role_management-D8dO7m27.png",Tx="/assets/event_logs-DoaHCOAV.png";function Cx(){const c=it(),i=[{title:"User Management",description:"Manage system users",icon:wx,path:"/users"},{title:"Patient Management",description:"Manage patients and records",icon:H0,path:"/patients"},{title:"Medical Records",description:"Browse all medical records",iconComponent:Tr,path:"/medical-records"},{title:"Test Orders",description:"Manage test orders",icon:Sx,path:"/test-orders"},{title:"Reports",description:"View system reports",icon:Ax,path:"/reports"},{title:"Role Management",description:"Manage user roles",icon:Ex,path:"/role-management"},{title:"Event Logs",description:"View system activity logs",icon:Tx,path:"/event-logs"}],u=d=>c(d);return a.jsx(Xe,{children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Welcome to Laboratory Management System"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map((d,f)=>a.jsx("div",{onClick:()=>u(d.path),className:`
                  bg-blue-50
                  border border-blue-200 hover:border-blue-300
                  hover:bg-blue-100
                  rounded-lg p-6
                  transition-all duration-200
                  cursor-pointer
                  shadow-sm hover:shadow-md
                  hover:scale-[1.02]
                `,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"rounded-lg p-3 bg-white shadow-inner border border-black-100",children:d.iconComponent?a.jsx(d.iconComponent,{className:"w-10 h-10 text-blue-600"}):a.jsx("img",{src:d.icon,alt:d.title,className:"w-10 h-10 object-contain"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:d.description})]})]})},f))})]})})})}function Rx(){const[c,i]=j.useState(""),[u,d]=j.useState(!1),[f,b]=j.useState({}),[v,h]=j.useState("");it();const w=()=>{const g={};return c?/\S+@\S+\.\S+/.test(c)||(g.email="Invalid email format. Please enter a valid email address."):g.email="Email cannot be blank",g},C=g=>{i(g.target.value),b(E=>({...E,email:""})),h("")},M=async g=>{g.preventDefault(),h("");const E=w();if(Object.keys(E).length>0){b(E);return}b({}),d(!0);try{await fe.post("/Auth/forgot_password",{EmailForgot:c}),h("If the email exists, a reset link has been sent. Please check your inbox.")}catch(p){const D=p.response?.status,z=p.response?.data?.message||p.response?.data?.detail;b(D===404||D===400?{email:z||"Email not found. Please check and try again."}:{email:z||"Failed to send reset email. Please try again."})}finally{d(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-5",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),a.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-200 rounded-full opacity-20 animate-pulse"}),a.jsx("div",{className:"absolute top-40 right-20 w-16 h-16 bg-blue-300 rounded-full opacity-30 animate-bounce"}),a.jsx("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-blue-400 rounded-full opacity-25 animate-pulse"}),a.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:a.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-8 w-full max-w-md border border-white/20 animate-slide-up",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Forgot Password"}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Enter your email to receive a reset link"})]}),f.email&&a.jsx("div",{className:"mb-4 p-3 border rounded-xl text-sm bg-red-50 border-red-200 text-red-700",role:"alert","aria-live":"assertive",children:f.email}),v&&a.jsx("div",{className:"mb-4 p-3 border rounded-xl text-sm bg-green-50 border-green-200 text-green-700",role:"status","aria-live":"polite",children:v}),a.jsxs("form",{onSubmit:M,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{id:"email",type:"email",value:c,onChange:C,placeholder:"you@example.com",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 ${f.email?"border-red-300 bg-red-50 focus:ring-red-500":""}`})]}),a.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:u?"Sending...":"Send Reset Link"})]}),a.jsx("div",{className:"mt-6 text-center text-sm",children:a.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Back to Login"})})]})})]})}function Dx(){const[c]=ph(),i=it(),[u,d]=j.useState(""),[f,b]=j.useState(""),[v,h]=j.useState(""),[w,C]=j.useState(!1),[M,g]=j.useState(""),[E,p]=j.useState(""),[D,z]=j.useState({});j.useEffect(()=>{const H=c.get("token")||"";d(H)},[c]);const K=()=>{const H={};return f?f.length<8&&(H.password="Password must be at least 8 characters."):H.password="Password cannot be left blank.",v?f!==v&&(H.confirmPassword="Passwords do not match."):H.confirmPassword="Please re-enter your password.",H},J=H=>{b(H.target.value),z(ee=>({...ee,password:"",confirmPassword:""})),g(""),p("")},$=H=>{h(H.target.value),z(ee=>({...ee,confirmPassword:""})),g(""),p("")},P=async H=>{if(H.preventDefault(),g(""),p(""),!u){g("Missing or invalid token.");return}const ee=K();if(Object.keys(ee).length>0){z(ee);return}z({}),C(!0);try{await fe.post("/Auth/reset_password",{token:u,newPassword:f}),p("Password has been reset successfully. You can now log in."),setTimeout(()=>i("/login"),1500)}catch(_){const Z=_.response?.status,de=_.response?.data?.message||_.response?.data?.detail,pe=_.response?.data?.ExceptionType;g(pe==="InvalidOrExpiredTokenException"?"The password reset link has expired or has already been used. Please request a new reset link!":Z===401?de||"Invalid or expired token. Please request a new reset link.":Z===404?de||"User not found. Please request a new reset link.":de||"Reset failed. Please try again.")}finally{C(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-5",children:a.jsx("div",{className:"absolute top-0 left-0 w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),a.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-blue-200 rounded-full opacity-20 animate-pulse"}),a.jsx("div",{className:"absolute top-40 right-20 w-16 h-16 bg-blue-300 rounded-full opacity-30 animate-bounce"}),a.jsx("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-blue-400 rounded-full opacity-25 animate-pulse"}),a.jsx("div",{className:"flex items-center justify-center min-h-screen p-4",children:a.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-8 w-full max-w-md border border-white/20 animate-slide-up",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Reset Password"}),a.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Enter a new password for your account"})]}),M&&a.jsx("div",{className:"mb-4 p-3 border rounded-xl text-sm bg-red-50 border-red-200 text-red-700",children:M}),E&&a.jsx("div",{className:"mb-4 p-3 border rounded-xl text-sm bg-green-50 border-green-200 text-green-700",children:E}),a.jsxs("form",{onSubmit:P,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"New password"}),a.jsx("input",{id:"password",type:"password",value:f,onChange:J,placeholder:"",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 ${D.password?"border-red-300 bg-red-50 focus:ring-red-500":""}`}),D.password&&a.jsx("span",{className:"text-xs text-red-600 mt-1 inline-block animate-fade-in",children:D.password})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm password"}),a.jsx("input",{id:"confirmPassword",type:"password",value:v,onChange:$,placeholder:"",className:`w-full px-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-gray-50 ${D.confirmPassword?"border-red-300 bg-red-50 focus:ring-red-500":""}`}),D.confirmPassword&&a.jsx("span",{className:"text-xs text-red-600 mt-1 inline-block animate-fade-in",children:D.confirmPassword})]}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:w?"Resetting...":"Reset Password"})]}),a.jsx("div",{className:"mt-6 text-center text-sm",children:a.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-800 hover:underline",children:"Back to Login"})})]})})]})}function zx(){const[c,i]=j.useState([]),[u,d]=j.useState(!0),[f,b]=j.useState(null),v=async()=>{try{d(!0),b(null);const w=await fe.get("/AuditLog");if(w.status===200){const C=w.data.sort((M,g)=>new Date(g.timestamp)-new Date(M.timestamp));i(C)}}catch(w){console.error("Error fetching event logs:",w),b(w)}finally{d(!1)}},h=()=>{v()};return j.useEffect(()=>{v()},[]),{eventLogs:c,loading:u,error:f,refreshEventLogs:h}}function Mx(c,i=10){const[u,d]=j.useState(1),f=Math.ceil(c/i),b=()=>d(M=>Math.min(M+1,f)),v=()=>d(M=>Math.max(M-1,1)),h=M=>d(()=>Math.min(Math.max(M,1),f)),w=(u-1)*i,C=w+i;return{currentPage:u,totalPages:f,nextPage:b,prevPage:v,goToPage:h,startIndex:w,endIndex:C}}function Ox({log:c}){const[i,u]=j.useState(!1),f=(g=>{try{if(g.startsWith("{"))return JSON.parse(g);const E=g.split(`\r
`).filter(D=>D.trim()),p={};return E.forEach(D=>{if(D.includes(":")){const[z,K]=D.split(":").map(J=>J.trim());p[z]=K}}),p}catch{return{raw:g}}})(c.changes),b=g=>{try{const E=new Date(g);return{date:E.toLocaleDateString("en-GB"),time:E.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})}}catch{return{date:"Invalid Date",time:""}}},{date:v,time:h}=b(c.timestamp),C=(g=>{switch(g){case"ADDED":return{color:"text-green-600",bgColor:"bg-green-100",icon:"",label:"Added"};case"UPDATED":return{color:"text-blue-600",bgColor:"bg-blue-100",icon:"",label:"Updated"};case"DELETED":return{color:"text-red-600",bgColor:"bg-red-100",icon:"",label:"Deleted"};default:return{color:"text-gray-600",bgColor:"bg-gray-100",icon:"",label:g}}})(c.action),M=()=>typeof f=="object"&&f!==null?Object.entries(f).map(([g,E])=>typeof E=="object"&&E!==null?a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"font-medium text-gray-900 mb-1",children:g}),a.jsxs("div",{className:"ml-4 space-y-1",children:[E.OldValue!==void 0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"text-red-600",children:"Old:"}),a.jsx("span",{className:"ml-2 text-gray-700",children:String(E.OldValue??"null")})]}),E.NewValue!==void 0&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"text-green-600",children:"New:"}),a.jsx("span",{className:"ml-2 text-gray-700",children:String(E.NewValue??"null")})]})]})]},g):a.jsxs("div",{className:"mb-2",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:[g,":"]}),a.jsx("span",{className:"ml-2 text-gray-700",children:String(E)})]},g)):a.jsx("div",{className:"text-sm text-gray-600 font-mono bg-gray-50 p-2 rounded",children:String(f)});return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:[a.jsx("div",{className:"p-4 cursor-pointer",onClick:()=>u(!i),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-x-8 flex-shrink-0 w-[500px]",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${C.bgColor} ${C.color}`,children:[a.jsx("span",{className:"mr-1",children:C.icon}),C.label]})}),a.jsxs("div",{className:"flex items-center -ml-[8px] space-x-1",children:[a.jsx("span",{className:"text-gray-500",children:"Entity:"}),a.jsx("span",{className:"font-medium text-gray-900 truncate",children:c.entityName})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("span",{className:"text-gray-500",children:"User:"}),a.jsx("span",{className:"font-medium text-gray-900 truncate",children:c.userEmail})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:v}),a.jsx("div",{className:"text-xs text-gray-500",children:h})]}),a.jsx("div",{className:"text-gray-400",children:a.jsx("svg",{className:`w-5 h-5 transform transition-transform duration-200 ${i?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})}),i&&a.jsx("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Log ID:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:c.id})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Action:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:c.action})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Entity:"}),a.jsx("span",{className:"ml-2 text-gray-900",children:c.entityName})]})]}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Changes"]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 max-h-96 overflow-y-auto",children:M()})]})]})})]})}function Bx(){const[c,i]=j.useState(""),[u,d]=j.useState("ALL"),[f,b]=j.useState("ALL"),v=it(),{eventLogs:h,loading:w,error:C,refreshEventLogs:M}=zx(),g=h?.filter(Z=>{const de=Z.userEmail?.toLowerCase().includes(c.toLowerCase())||Z.entityName?.toLowerCase().includes(c.toLowerCase()),pe=u==="ALL"||Z.action===u,k=f==="ALL"||Z.entityName===f;return de&&pe&&k})||[],E=10,{currentPage:p,totalPages:D,nextPage:z,prevPage:K,goToPage:J,startIndex:$,endIndex:P}=Mx(g.length,E),H=g.slice($,P),ee=[...new Set(h?.map(Z=>Z.action)||[])],_=[...new Set(h?.map(Z=>Z.entityName)||[])];return w?a.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading event logs..."})]})}):C?a.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-600 text-xl mb-4",children:""}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Event Logs"}),a.jsx("p",{className:"text-gray-600",children:C.message})]})}):a.jsx(Xe,{children:a.jsxs("div",{className:"min-h-screen bg-gray-100",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:a.jsx("div",{className:"px-6 py-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 m-0 mt-4",children:"Event Logs"}),a.jsx("p",{className:"text-gray-600",children:"System activity and changes tracking"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"bg-gray-50 px-4 py-2 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["Total: ",a.jsx("span",{className:"text-blue-600 font-bold",children:g.length})," logs"]})}),a.jsxs("button",{onClick:()=>v("/dashboard"),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{className:"font-medium",children:"Back"})]}),a.jsxs("button",{onClick:M,disabled:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center space-x-2",children:[a.jsx("svg",{className:`w-4 h-4 ${w?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{className:"font-medium",children:w?"Refreshing...":"Refresh"})]})]})]})})}),a.jsx("div",{className:"bg-white border-b border-gray-200 p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Search by user or entity...",value:c,onChange:Z=>i(Z.target.value),className:"w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action"}),a.jsxs("select",{value:u,onChange:Z=>d(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"ALL",children:"All Actions"}),ee.map(Z=>a.jsx("option",{value:Z,children:Z},Z))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entity"}),a.jsxs("select",{value:f,onChange:Z=>b(Z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"ALL",children:"All Entities"}),_.map(Z=>a.jsx("option",{value:Z,children:Z},Z))]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("button",{onClick:()=>{i(""),d("ALL"),b("ALL")},className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 flex items-center justify-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:"Clear Filters"})]})})]})}),a.jsxs("div",{className:"p-6",children:[H.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Event Logs Found"}),a.jsx("p",{className:"text-gray-500 mb-6",children:g.length===0&&h?.length>0?"Try adjusting your search or filter criteria.":"No event logs available at the moment."}),a.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[g.length===0&&h?.length>0&&a.jsx("button",{onClick:()=>{i(""),d("ALL"),b("ALL")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"Clear All Filters"}),a.jsxs("button",{onClick:()=>v("/dashboard"),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),a.jsx("span",{children:"Back to Dashboard"})]})]})]}):a.jsx("div",{className:"space-y-6",children:H.map((Z,de)=>a.jsx("div",{className:"transform transition-all duration-300 hover:scale-[1.02]",children:a.jsx(Ox,{log:Z})},Z.id))}),D>1&&a.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",$+1," to ",Math.min(P,g.length)," of ",g.length," results"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:K,disabled:p===1,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),a.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:D},(Z,de)=>de+1).map(Z=>a.jsx("button",{onClick:()=>J(Z),className:`px-3 py-2 text-sm font-medium rounded-lg ${Z===p?"bg-blue-600 text-white":"text-gray-500 bg-white border border-gray-300 hover:bg-gray-50"}`,children:Z},Z))}),a.jsx("button",{onClick:z,disabled:p===D,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})})}function Ux(c){return{READ_ONLY:"gray",VIEW_EVENT_LOGS:"gray",CREATE_TEST_ORDER:"blue",MODIFY_TEST_ORDER:"blue",DELETE_TEST_ORDER:"blue",REVIEW_TEST_ORDER:"blue",EXECUTE_BLOOD_TESTING:"blue",ADD_COMMENT:"teal",MODIFY_COMMENT:"teal",DELETE_COMMENT:"teal",VIEW_CONFIGURATION:"red",CREATE_CONFIGURATION:"red",MODIFY_CONFIGURATION:"red",DELETE_CONFIGURATION:"red",VIEW_USER:"orange",CREATE_USER:"orange",MODIFY_USER:"orange",DELETE_USER:"orange",LOCK_UNLOCK_USER:"orange",VIEW_ROLE:"yellow",CREATE_ROLE:"yellow",UPDATE_ROLE:"yellow",DELETE_ROLE:"yellow",ADD_REAGENTS:"green",MODIFY_REAGENTS:"green",DELETE_REAGENTS:"green",ADD_INSTRUMENT:"pink",VIEW_INSTRUMENT:"pink",ACTIVATE_DEACTIVATE_INSTRUMENT:"pink"}[c]||"gray"}function Wl({privilege:c,size:i="default",closable:u=!1,onClose:d,className:f=""}){if(!c)return null;const b=c.raw,v=c.name,h=Ux(b),w={small:"text-xs px-2 py-0.5",default:"text-sm px-3 py-1"},C={blue:"bg-blue-100 text-blue-800",green:"bg-green-100 text-green-800",red:"bg-red-100 text-red-800",orange:"bg-orange-100 text-orange-800",gray:"bg-gray-100 text-gray-800",teal:"bg-teal-100 text-teal-800",yellow:"bg-yellow-100 text-yellow-800",pink:"bg-pink-100 text-pink-800"}[h];return a.jsxs("span",{className:`inline-flex items-center rounded-full font-medium ${C} ${w[i]} ${f}`,children:[v,u&&a.jsx("button",{onClick:d,className:"ml-2 text-gray-600 hover:text-gray-900 text-sm leading-none",children:""})]})}function kx({selectedPrivileges:c,privileges:i,privilegesLoading:u,onPrivilegeFilter:d,onClearFilters:f}){return a.jsxs(a.Fragment,{children:[a.jsx("style",{jsx:!0,children:`
        .privilege-select .ant-select-selector {
          min-height: 48px !important;
          padding: 8px 12px !important;
          display: flex !important;
          align-items: flex-start !important;
          flex-wrap: wrap !important;
        }
        .privilege-select .ant-select-selection-item {
          margin: 2px 4px 2px 0 !important;
        }
        .privilege-select .ant-select-selection-placeholder {
          line-height: 32px !important;
        }
        .privilege-select .ant-select-selection-search {
          margin: 2px 0 !important;
        }
      `}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4",children:[a.jsx("span",{className:"text-base font-medium text-gray-700 whitespace-nowrap",children:"Filter by Privileges:"}),a.jsx("div",{className:"w-full lg:w-[400px]",children:a.jsx(an,{mode:"multiple",placeholder:"Select privileges to filter",value:c,onChange:d,style:{width:"100%"},loading:u,showSearch:!0,size:"large",maxTagCount:3,className:"privilege-select",filterOption:(b,v)=>{const h=v.label?.toLowerCase()||"",w=v.description?.toLowerCase()||"",C=b.toLowerCase();return h.includes(C)||w.includes(C)},tagRender:b=>{const{label:v,closable:h,onClose:w}=b;return a.jsx(Wl,{privilege:{name:v},size:"small",closable:h,onClose:w,className:"mr-1 mb-1"})},options:i.map(b=>({label:b.name,value:b.privilegeId,description:b.description})),optionRender:b=>{const v=i.find(h=>h.privilegeId===b.value);return a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Wl,{privilege:v,size:"small"}),a.jsx("div",{className:"text-xs text-gray-500",children:b.description})]})}})}),c.length>0&&a.jsx("button",{onClick:f,className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded hover:bg-gray-50 whitespace-nowrap",children:"Clear Filters"})]})})]})}var Lx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},_x=function(i,u){return j.createElement(Ih,Yh({},i,{ref:u,icon:Lx}))},qx=j.forwardRef(_x);function Hx(c){return c?c.replace(/_/g," ").toLowerCase().replace(/\b\w/g,i=>i.toUpperCase()):""}function Vx({privileges:c}){const[i,u]=j.useState([]);if(j.useEffect(()=>{if(!c||c.length===0){u([]);return}const v=c.map(h=>{const w=typeof h=="string"?h:h?.name||`Privilege_${h?.privilegeId}`;return{raw:w,name:Hx(w)}});u(v)},[c]),!i.length)return a.jsx(Wl,{privilege:{name:"No Privileges"},size:"small"});const d=i.slice(0,3),f=i.slice(3),b={items:f.map((v,h)=>({key:h,label:a.jsx("div",{className:"py-0.5",children:a.jsx(Wl,{privilege:v,size:"small"})})}))};return a.jsxs("div",{className:"flex flex-wrap gap-1 items-center",children:[d.map((v,h)=>a.jsx(Wl,{privilege:v,size:"small"},h)),f.length>0&&a.jsx(Gh,{menu:b,trigger:["click"],placement:"bottomLeft",overlayStyle:{maxHeight:"300px",overflowY:"auto",padding:"4px 0"},children:a.jsxs(oo,{type:"text",size:"small",className:"text-blue-500 hover:text-blue-700 p-0 h-auto",children:["+",f.length," more ",a.jsx(Qh,{className:"text-xs"})]})})]})}function Ix({roles:c,loading:i,sortBy:u,sortDesc:d,currentPage:f,pageSize:b,total:v,onTableChange:h,onPaginationChange:w,onDeleteRole:C}){const M=[{title:"Role ID",dataIndex:"roleId",key:"roleId",width:100,sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:u==="id"?d?"descend":"ascend":null},{title:"Role Name",dataIndex:"name",key:"name",sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:u==="name"?d?"descend":"ascend":null},{title:"Role Code",dataIndex:"code",key:"code",width:120,sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:u==="code"?d?"descend":"ascend":null},{title:"Description",dataIndex:"description",key:"description",sorter:!0,sortDirections:["ascend","descend","ascend"],sortOrder:u==="description"?d?"descend":"ascend":null},{title:"Privilege",dataIndex:"privileges",key:"privileges",render:g=>a.jsx(Vx,{privileges:g})},{title:"Actions",key:"actions",fixed:"right",width:200,render:(g,E)=>{const p=E.roleId||E.id||E.roleID;return p?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bh,{to:`/role-management/update/${p}`,className:"px-3 py-1 text-sm rounded bg-blue-500 hover:bg-blue-600 text-white transition-colors duration-200",children:"Edit"}),a.jsx(Jh,{placement:"topRight",icon:a.jsx(qx,{className:"text-yellow-500"}),title:a.jsx("div",{className:"text-base font-semibold text-gray-900",children:"Delete role"}),description:a.jsxs("div",{className:"text-sm text-gray-600",children:["Are you sure you want to delete role ",a.jsxs("span",{className:"font-semibold",children:["#",p]}),"?"]}),okText:"Delete",cancelText:"Cancel",okType:"danger",okButtonProps:{className:"bg-red-600 hover:bg-red-700 border-none"},cancelButtonProps:{className:"border-gray-300 hover:border-gray-400"},onConfirm:()=>C&&C(p),children:a.jsx("button",{type:"button",className:"px-3 py-1 text-sm rounded bg-red-500 hover:bg-red-600 text-white shadow-sm transition-colors duration-200",children:"Delete"})})]}):(console.warn("Role ID not found for record:",E),a.jsx("span",{className:"text-gray-400 text-sm",children:"N/A"}))}}];return a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx(_0,{columns:M,dataSource:c,loading:i,rowKey:"roleId",onChange:h,pagination:{current:f,pageSize:b,total:v,showSizeChanger:!1,showQuickJumper:!0,showTotal:(g,E)=>`${E[0]}-${E[1]} of ${g} items`,onChange:w},scroll:{x:1e3},size:"middle"})})}function V0({placeholder:c="Keyword, topic,...",onSearch:i,className:u="",value:d="",onChange:f,showSearchButton:b=!1,onClear:v}){const[h,w]=j.useState(d);j.useEffect(()=>{w(d)},[d]);const C=p=>{const D=p.target.value;w(D),f&&f(p),i&&!b&&i(D)},M=()=>{i&&i(h)},g=p=>{p.key==="Enter"&&b&&M()},E=()=>{w(""),v&&v()};return a.jsxs("div",{className:`relative max-w-xl ${u}`,children:[a.jsx("input",{type:"text",placeholder:c,value:h,onChange:C,onKeyDown:g,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-base ${b?"pr-20":"pr-10"}`}),b?a.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:[h&&a.jsx("button",{onClick:E,className:"mr-3 p-1 text-gray-400 hover:text-red-500 transition-colors duration-200",title:"Clear search",children:a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("button",{onClick:M,className:"p-1 text-gray-400 hover:text-blue-500 transition-colors duration-200",title:"Search",children:a.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}):a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}const Yx=ro(c=>({roles:[],selectedRole:null,loading:!1,error:null,setRoles:i=>c({roles:i}),setSelectedRole:i=>c({selectedRole:i}),clearSelected:()=>c({selectedRole:null}),setLoading:i=>c({loading:i}),setError:i=>c({error:i}),addRole:i=>c(u=>({roles:[...u.roles,i]})),updateRole:(i,u)=>c(d=>({roles:d.roles.map(f=>f.id===i?{...f,...u}:f)})),deleteRole:i=>c(u=>({roles:u.roles.filter(d=>d.id!==i)})),reset:()=>c({roles:[],selectedRole:null,loading:!1,error:null})})),Gx=ro(c=>({privileges:[],loading:!1,error:null,setPrivileges:i=>c({privileges:i}),setLoading:i=>c({loading:i}),setError:i=>c({error:i}),reset:()=>c({privileges:[],loading:!1,error:null})})),zr=()=>{const{privileges:c,loading:i,error:u,setPrivileges:d,setLoading:f,setError:b}=Gx(),{isAuthenticated:v}=Ct(),h=async()=>{if(!v){console.warn("User not authenticated, skipping privileges fetch");return}try{f(!0),b(null);const w=await fe.get("/Privileges");w.status===200&&d(w.data)}catch(w){console.error("Error fetching privileges:",w),console.error("Error details:",{message:w.message,code:w.code,response:w.response?.data,status:w.response?.status,statusText:w.response?.statusText}),w.response?.status===401?b("Session expired. Please login again."):w.response?.status===403?b("You do not have permission to access privilege information."):w.response?.status>=500?b("Server error. Please try again later."):b(w.message||"Failed to load privileges list")}finally{f(!1)}};return j.useEffect(()=>{v&&c.length===0&&!i&&h()},[v]),{privileges:c,loading:i,error:u,refetch:h}};function Qx(){const c=it(),[i,u]=j.useState({searchKeyword:"",selectedPrivileges:[],sortBy:null,sortDesc:!1,currentPage:1,pageSize:10,hasSearched:!1}),[d,f]=j.useState(0),{roles:b,loading:v,error:h,setRoles:w,setLoading:C,setError:M}=Yx(),{privileges:g,loading:E,error:p}=zr(),{isAuthenticated:D}=Ct(),z=j.useRef(null),K=j.useCallback(async(T=i)=>{if(!D){console.warn("User not authenticated, skipping roles fetch");return}try{C(!0),M(null);const W=new URLSearchParams;T.searchKeyword?.trim()&&W.append("Search",T.searchKeyword.trim()),W.append("Page",T.currentPage.toString()),W.append("PageSize",T.pageSize.toString()),T.sortBy&&(W.append("SortBy",T.sortBy),W.append("SortDesc",T.sortDesc.toString())),T.selectedPrivileges?.length>0&&T.selectedPrivileges.forEach(ie=>W.append("privilegeIds",ie));const I=W.toString(),ge=await fe.get(`/Roles?${I}`);if(ge.status===200){const ie=ge.data,x=Array.isArray(ie.items)?ie.items:[];w(x),f(ie.total||0)}}catch(W){console.error("Error fetching roles:",W),W.response?.status===401?M("Session expired. Please login again."):W.response?.status===403?M("You do not have permission to access this page."):W.response?.status>=500?M("Server error. Please try again later."):M(W.message||"Failed to load roles list")}finally{C(!1)}},[D,w,C,M]),J=j.useMemo(()=>{const T={current:null};return W=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>K(W),150)}},[K]);j.useEffect(()=>{D&&J(i)},[i,D,J]),j.useEffect(()=>{D&&K(i)},[D]);const $=j.useCallback(T=>{u(W=>({...W,searchKeyword:T,currentPage:1,hasSearched:!0}))},[]),P=j.useCallback(T=>{u(W=>({...W,selectedPrivileges:T,currentPage:1}))},[]),H=j.useCallback(()=>{u(T=>({...T,selectedPrivileges:[],currentPage:1,sortBy:null,sortDesc:!1}))},[]),ee=j.useCallback(()=>{u(T=>({...T,searchKeyword:"",currentPage:1,hasSearched:!1}))},[]),_=j.useCallback(()=>{u({searchKeyword:"",selectedPrivileges:[],sortBy:null,sortDesc:!1,currentPage:1,pageSize:10,hasSearched:!1})},[]),Z=j.useCallback((T,W,I)=>{if(I&&I.field){const ge={roleId:"id",name:"name",code:"code",description:"description"};let ie,x;I.order?I.order==="ascend"&&i.sortBy===ge[I.field]?(ie=null,x=!1):(ie=ge[I.field]||"id",x=I.order==="descend"):(ie=null,x=!1),(ie!==i.sortBy||x!==i.sortDesc)&&u(F=>({...F,sortBy:ie,sortDesc:x,currentPage:1}))}},[i.sortBy,i.sortDesc]),de=j.useCallback((T,W)=>{u(I=>({...I,currentPage:T,pageSize:W!==I.pageSize?W:I.pageSize}))},[]),pe=j.useCallback(T=>{c(`/role-management/update/${T}`)},[c]),k=j.useCallback(async T=>{try{const W=await fe.delete(`/Roles/${T}`);W.status===200||W.status===204?Fc.success("Deleted role successfully"):Fc.warning("Delete request sent, please refresh to verify")}catch(W){console.error("Error deleting role:",W),Fc.error(W.response?.data?.message||"Failed to delete role. Please try again.")}finally{K(i)}},[K,i]);return j.useEffect(()=>()=>{z.current&&clearTimeout(z.current)},[]),a.jsxs(Xe,{children:[a.jsx("style",{children:`
        .privilege-dropdown .ant-dropdown-menu {
          max-height: 300px !important;
          overflow-y: auto !important;
          padding: 4px 0 !important;
        }
      `}),a.jsxs("div",{className:"w-full",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Role Management"}),E&&a.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),a.jsx("p",{className:"text-blue-800 text-sm",children:"Loading privileges..."})]})}),p&&a.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l6.518 11.6A1.75 1.75 0 0116.518 17H3.482a1.75 1.75 0 01-1.743-2.3l6.518-11.6zM10 12a.75.75 0 100 1.5A.75.75 0 0010 12zm0-5.5a.75.75 0 00-.75.75v2.5a.75.75 0 001.5 0v-2.5A.75.75 0 0010 6.5z",clipRule:"evenodd"})}),a.jsx("p",{className:"text-yellow-700 text-sm",children:"Error loading privileges."})]})}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4",children:[a.jsx("div",{className:"w-full lg:w-[550px]",children:a.jsx(V0,{placeholder:"Search roles...",value:i.searchKeyword,onSearch:$,showSearchButton:!0,onClear:ee,className:"w-full"})}),(i.searchKeyword||i.selectedPrivileges.length>0)&&a.jsxs("button",{onClick:_,className:"px-5 py-3 text-base text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors duration-200 flex items-center space-x-2 whitespace-nowrap",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{children:"Clear All"})]})]})}),a.jsx(kx,{selectedPrivileges:i.selectedPrivileges,privileges:g,privilegesLoading:E,onPrivilegeFilter:P,onClearFilters:H}),a.jsx(Ix,{roles:b,loading:v,sortBy:i.sortBy,sortDesc:i.sortDesc,currentPage:i.currentPage,pageSize:i.pageSize,total:d,onTableChange:Z,onPaginationChange:de,onEditRole:pe,onDeleteRole:k})]})]})}const Er={createRole:async c=>{try{const u=(Array.isArray(c.privilegeIds)?c.privilegeIds:c.privilegeIds?[c.privilegeIds]:[]).map(f=>typeof f=="string"?parseInt(f,10):f).filter(f=>Number.isFinite(f));return{success:!0,data:(await fe.post("/Roles",{name:c.name,code:c.code,description:c.description,privilegeIds:u})).data}}catch(i){return console.error(" Error in createRole:",i),{success:!1,message:i.response?.data?.message||"Unexpected error occurred."}}},getAll:async()=>{try{return{success:!0,data:(await fe.get("/Roles")).data}}catch(c){return console.error(" Error in getAll:",c),{success:!1,message:"Failed to fetch roles."}}},getById:async c=>{try{if(!c)return{success:!1,message:"Role ID is required"};console.log(`Fetching role with ID: ${c}`);const i=await fe.get(`/Roles/${c}`);console.log("API Response:",i),console.log("Response data:",i.data);const u=i.data?.data||i.data;return u?{success:!0,data:u}:(console.warn("No data in response:",i),{success:!1,message:"No role data found in response"})}catch(i){console.error(" Error in getById:",i),console.error("Error response:",i.response);const u=i.response?.status;let d="Failed to fetch role details.";return u===404?d=`Role with ID ${c} not found.`:u===401?d="Authentication required. Please login again.":u===403?d="You don't have permission to view this role.":i.response?.data?.message?d=i.response.data.message:i.response?.data?.detail?d=i.response.data.detail:i.message&&(d=i.message),{success:!1,message:d,error:i.response?.data}}},update:async(c,i)=>{try{const d=(Array.isArray(i.privilegeIds)?i.privilegeIds:i.privilegeIds?[i.privilegeIds]:[]).map(b=>typeof b=="string"?parseInt(b,10):b).filter(b=>Number.isFinite(b));return{success:!0,data:(await fe.put(`/Roles/${c}`,{name:i.name,code:i.code,description:i.description,privilegeIds:d})).data}}catch(u){return console.error(" Error in update:",u),{success:!1,message:u.response?.data?.message||"Failed to update role."}}},delete:async c=>{try{return{success:!0,data:(await fe.delete(`/Roles/${c}`)).data}}catch(i){return console.error(" Error in delete:",i),{success:!1,message:i.response?.data?.message||"Failed to delete role."}}},getAllPrivileges:async()=>{try{return{success:!0,data:(await fe.get("/Privileges")).data}}catch(c){return console.error(" Error in getAllPrivileges:",c),{success:!1,message:"Failed to fetch privileges."}}}};function N0(){const c=it(),[i,u]=j.useState({name:"",code:"",description:"",privilegeIds:[]}),[d,f]=j.useState({}),{privileges:b}=zr(),[v,h]=j.useState(""),[w,C]=j.useState(""),M=p=>{const{name:D,value:z}=p.target;u(K=>({...K,[D]:z})),f(K=>({...K,[D]:""})),v&&h(""),w&&C("")},g=()=>{const p={};return i.name.trim()||(p.name="Role Name is required."),i.code.trim()?i.code.length<3&&(p.code="Role Code must be at least 3 characters."):p.code="Role Code is required.",i.description.length>200&&(p.description="Description cannot exceed 200 characters."),(!i.privilegeIds||i.privilegeIds.length===0)&&(p.privilegeIds="At least one privilege is required."),p},E=async p=>{p.preventDefault();const D=g();if(Object.keys(D).length>0){f(D);return}try{const z=await Er.createRole({name:i.name,code:i.code,description:i.description,privilegeIds:i.privilegeIds});z?.success?(h("Role created successfully!"),C(""),u({name:"",code:"",description:"",privilegeIds:[]})):(C(z?.message||"Failed to create role"),h(""))}catch(z){console.error("Error creating role:",z),C("Unexpected error while creating role!"),h("")}};return a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 py-4 w-full",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 md:p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"CREATE ROLE"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Create a new role and set its privileges"})]}),v&&a.jsx("div",{className:"mb-4 p-3 border rounded text-sm bg-green-50 border-green-200 text-green-600",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:v}),a.jsx("p",{className:"text-xs mt-1 text-green-500",children:"You can create another role or go back to role list."})]})]})}),w&&a.jsx("div",{className:"mb-4 p-3 border rounded text-sm bg-red-50 border-red-200 text-red-600",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsx("div",{children:a.jsx("p",{className:"font-medium",children:w})})]})}),a.jsxs("form",{onSubmit:E,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-black mb-2",children:["Role Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:i.name,onChange:M,placeholder:"Enter role name",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${d.name?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),d.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Privileges"}),a.jsx(an,{mode:"multiple",placeholder:"Select privileges...",value:i.privilegeIds,onChange:p=>{u(D=>({...D,privilegeIds:p})),f(D=>({...D,privilegeIds:""}))},options:(Array.isArray(b)?b:[]).map(p=>({label:p.name,value:p.privilegeId})),showSearch:!0,filterOption:(p,D)=>D?.label?.toLowerCase().includes(p.toLowerCase()),size:"large",className:"w-full"}),d.privilegeIds&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.privilegeIds})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-black mb-2",children:["Role Code ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"code",value:i.code,onChange:M,placeholder:"Enter role code",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${d.code?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),d.code&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.code})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Description"}),a.jsx("textarea",{name:"description",value:i.description,onChange:M,placeholder:"Enter description",className:`w-full px-4 py-3 h-24 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${d.description?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),d.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.description})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-custom-dark-blue text-white py-2 px-4 rounded-lg font-semibold hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]",children:"Create Role"}),a.jsx("button",{type:"button",onClick:()=>c("/role-management"),className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-semibold border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]",children:"Cancel"})]})]})]})})})})}function Jx(){const{id:c}=C0(),i=it(),[u,d]=j.useState({name:"",code:"",description:"",privilegeIds:[]}),[f,b]=j.useState({}),[v,h]=j.useState(!0),[w,C]=j.useState(""),[M,g]=j.useState(""),{privileges:E,loading:p}=zr();j.useEffect(()=>{(async()=>{if(!c){g("Invalid role ID"),h(!1);return}try{h(!0),g(""),console.log("Fetching role with ID:",c);const[$,P]=await Promise.all([Er.getById(c),Er.getAllPrivileges()]);if(console.log("Role response:",$),console.log("Privileges response:",P),!$.success){const _=$.message||`Failed to load role data. ${$.error||""}`;console.error("Role fetch failed:",$),g(_),h(!1);return}const H=$.data;if(!H){console.error("No role data found in response:",$),g("Role data not found in response"),h(!1);return}console.log("Extracted role data:",H);let ee=[];H.privileges&&Array.isArray(H.privileges)?ee=H.privileges.map(_=>typeof _=="object"&&_!==null?_.privilegeId||_.id||_.privilegeId:typeof _=="number"||typeof _=="string"?_:null).filter(Boolean).map(_=>typeof _=="string"?parseInt(_,10):_):H.privilegeIds&&Array.isArray(H.privilegeIds)&&(ee=H.privilegeIds.map(_=>typeof _=="string"?parseInt(_,10):_).filter(Boolean)),console.log("Extracted privilege IDs:",ee),d({name:H.name||"",code:H.code||"",description:H.description||"",privilegeIds:ee}),P.success||console.warn("Failed to load privileges:",P.message)}catch($){console.error("Error fetching role:",$),console.error("Error details:",{message:$.message,response:$.response?.data,status:$.response?.status});const P=$.response?.data?.message||$.message||"Failed to load role data. Please check the console for details.";g(P)}finally{h(!1)}})()},[c]);const D=J=>{const{name:$,value:P}=J.target;d(H=>({...H,[$]:P})),b(H=>({...H,[$]:""})),w&&C(""),M&&g("")},z=()=>{const J={};return u.name.trim()||(J.name="Role Name is required."),u.code.trim()?u.code.length<3&&(J.code="Role Code must be at least 3 characters."):J.code="Role Code is required.",u.description.length>200&&(J.description="Description cannot exceed 200 characters."),(!u.privilegeIds||u.privilegeIds.length===0)&&(J.privilegeIds="At least one privilege is required."),b(J),Object.keys(J).length===0},K=async J=>{J.preventDefault();const $=z();if(Object.keys($).length>0){b($);return}try{const P=await Er.update(c,{name:u.name,code:u.code,description:u.description,privilegeIds:u.privilegeIds});P?.success?(C("Role updated successfully!"),g(""),setTimeout(()=>{i("/role-management")},1500)):(g(P?.message||"Failed to update role"),C(""))}catch(P){console.error("Error updating role:",P),g("Unexpected error while updating role!"),C("")}};return v?a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 py-4 w-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading role data..."})]})})}):a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 py-4 w-full",children:a.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 md:p-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-custom-dark-blue mb-2",children:"UPDATE ROLE"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Update role information and privileges"})]}),w&&a.jsx("div",{className:"mb-4 p-3 border rounded text-sm bg-green-50 border-green-200 text-green-600",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:w}),a.jsx("p",{className:"text-xs mt-1 text-green-500",children:"Redirecting to role list..."})]})]})}),M&&a.jsx("div",{className:"mb-4 p-3 border rounded text-sm bg-red-50 border-red-200 text-red-600",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsx("div",{children:a.jsx("p",{className:"font-medium",children:M})})]})}),a.jsxs("form",{onSubmit:K,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-black mb-2",children:["Role Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"name",value:u.name,onChange:D,placeholder:"Enter role name",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.name?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),f.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.name})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-black mb-2",children:["Privileges ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(an,{mode:"multiple",placeholder:"Select privileges...",value:u.privilegeIds,onChange:J=>{d($=>({...$,privilegeIds:J})),b($=>({...$,privilegeIds:""}))},options:(Array.isArray(E)?E:[]).map(J=>({label:J.name,value:J.privilegeId})),showSearch:!0,size:"large",className:`w-full ${f.privilegeIds?"border-red-500":""}`,loading:p}),f.privilegeIds&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.privilegeIds})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-black mb-2",children:["Role Code ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"code",value:u.code,onChange:D,placeholder:"Enter role code",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.code?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),f.code&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.code})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-black mb-2",children:"Description"}),a.jsx("textarea",{name:"description",value:u.description,onChange:D,placeholder:"Enter description",className:`w-full px-4 py-3 h-24 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${f.description?"border-red-500 bg-red-50 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:ring-blue-500"}`}),f.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.description})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-custom-dark-blue text-white py-2 px-4 rounded-lg font-semibold hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]",children:"Update Role"}),a.jsx("button",{type:"button",onClick:()=>i("/role-management"),className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-semibold border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-[1.02]",children:"Cancel"})]})]})]})})})})}const Xx=async(c={})=>{try{const i=await fe.get("/Patient/all");console.log("Raw API Response:",i.data);const d=(Array.isArray(i.data)?i.data:[]).map(p=>({patientId:p.patientId||p.PatientId,identifyNumber:p.identifyNumber||p.IdentifyNumber||"",fullName:p.fullName||p.FullName||"",dateOfBirth:(p.dateOfBirth||p.DateOfBirth)&&p.dateOfBirth!=="0001-01-01"&&p.DateOfBirth!=="0001-01-01"?p.dateOfBirth||p.DateOfBirth:null,gender:p.gender||p.Gender||"Not specified",phoneNumber:p.phoneNumber||p.PhoneNumber||"Not specified",email:p.email||p.Email||"Not specified",address:p.address||p.Address||"Not specified",age:p.age!==void 0?p.age:p.Age!==void 0?p.Age:null,lastTestDate:(p.lastTestDate||p.LastTestDate)&&p.lastTestDate!=="0001-01-01T00:00:00"&&p.LastTestDate!=="0001-01-01T00:00:00"?p.lastTestDate||p.LastTestDate:null,createdAt:p.createdAt||p.CreatedAt||null,createdBy:p.createdBy||p.CreatedBy||"System",updatedAt:p.updatedAt||p.UpdatedAt||null,updatedBy:p.updatedBy||p.UpdatedBy||null,isDeleted:p.isDeleted!==void 0?p.isDeleted:p.IsDeleted!==void 0?p.IsDeleted:!1}));console.log("Formatted Patients:",d);const{pageNumber:f=1,pageSize:b=10,searchTerm:v=""}=c,h=v.trim()?d.filter(p=>{const D=v.toLowerCase();return(p.fullName||"").toLowerCase().includes(D)||(p.identifyNumber||"").toLowerCase().includes(D)||(p.phoneNumber||"").toLowerCase().includes(D)||(p.email||"").toLowerCase().includes(D)||String(p.patientId||"").includes(D)}):d,w=h.length,C=Math.ceil(w/b),M=(f-1)*b,g=M+b;return{patients:h.slice(M,g),totalCount:w,pageNumber:f,pageSize:b,totalPages:C,hasNextPage:f<C,hasPreviousPage:f>1}}catch(i){throw console.error("Error fetching patients:",i.response||i),i}},Zx=async c=>{try{return(await fe.get(`/Patient/${c}`)).data}catch(i){throw console.error("Error fetching patient details:",i),i}},Kx=async c=>{try{const i={identifyNumber:c.identifyNumber,fullName:c.fullName,dateOfBirth:c.dateOfBirth,gender:c.gender,phoneNumber:c.phoneNumber||"",email:c.email||"",address:c.address||""};console.log("Creating patient with data:",i);const u=await fe.post("/Patient/create/by-identity",i);return console.log("Patient created successfully:",u.data),u.data}catch(i){throw console.error("Error creating patient by identity:",i),console.error("Error details:",i.response?.data),i}},Fx=async c=>{try{return(await fe.post("/Patient",c)).data}catch(i){throw console.error("Error creating patient:",i),i}},$x=async(c,i)=>{try{return(await fe.put(`/Patient/${c}`,i)).data}catch(u){throw console.error("Error updating patient:",u),u}},Px=async c=>{try{return(await fe.delete(`/Patient/${c}`)).data}catch(i){throw console.error("Error deleting patient:",i),i}},Wx=async c=>{try{return(await fe.get(`/Patient/search?query=${encodeURIComponent(c)}`)).data}catch(i){throw console.error("Error searching patients:",i),i}},ep=async c=>{try{return(await fe.get("/PatientInfo/my-medical-records",{params:{patientId:c}})).data}catch(i){throw console.error("Error fetching patient medical records:",i),i}},tp=async()=>{try{const c=localStorage.getItem("accessToken");return(await fe.get("/Patient/me",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${c}`}})).data}catch(c){throw console.error("Error fetching my patient info:",c),c}},Xs={getAllPatients:Xx,getPatientById:Zx,createPatient:Fx,createPatientByIdentity:Kx,updatePatient:$x,deletePatient:Px,searchPatients:Wx,getPatientMedicalRecords:ep,getMyPatientInfo:tp},I0=async()=>{try{return(await fe.get("/MedicalRecord/all")).data}catch(c){throw console.error("Error fetching medical records:",c),c}},Y0=async c=>{try{return(await fe.post("/MedicalRecord",c)).data}catch(i){throw console.error("Error creating medical record:",i),i}};function ap({isOpen:c,onClose:i,onSuccess:u}){const[d,f]=j.useState({identifyNumber:"",fullName:"",dateOfBirth:"",gender:"",phoneNumber:"",email:"",address:""}),[b,v]=j.useState({}),[h,w]=j.useState(!1),[C,M]=j.useState(""),g=()=>{const z={};return d.identifyNumber.trim()||(z.identifyNumber="Identify Number is required"),d.fullName.trim()||(z.fullName="Full Name is required"),d.dateOfBirth||(z.dateOfBirth="Date of Birth is required"),d.gender.trim()||(z.gender="Gender is required"),v(z),Object.keys(z).length===0},E=async()=>{if(g()){w(!0),M("");try{await u({identifyNumber:d.identifyNumber.trim(),fullName:d.fullName.trim(),dateOfBirth:d.dateOfBirth,gender:d.gender.trim(),phoneNumber:d.phoneNumber.trim()||"",email:d.email.trim()||"",address:d.address.trim()||""})&&(f({identifyNumber:"",fullName:"",dateOfBirth:"",gender:"",phoneNumber:"",email:"",address:""}),v({}),i())}catch(z){console.error("Error adding patient:",z);const K=z.response?.data?.message||z.response?.data?.title||z.message||"Failed to add patient. Please try again.";M(K)}finally{w(!1)}}},p=()=>{f({identifyNumber:"",fullName:"",dateOfBirth:"",gender:"",phoneNumber:"",email:"",address:""}),v({}),M(""),i()},D=(z,K)=>{f(J=>({...J,[z]:K})),b[z]&&v(J=>({...J,[z]:""})),C&&M("")};return c?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:p}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(rs,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Patient"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Enter patient's information"})]})]}),a.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:h,children:a.jsx(tl,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6",children:[C&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(el,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-700",children:C})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Identify Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:d.identifyNumber,onChange:z=>D("identifyNumber",z.target.value),placeholder:"e.g., 123456789003",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.identifyNumber?"border-red-500":"border-gray-300"}`,disabled:h,autoFocus:!0}),b.identifyNumber&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:b.identifyNumber})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:d.fullName,onChange:z=>D("fullName",z.target.value),placeholder:"e.g., Nguyen Van A",className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.fullName?"border-red-500":"border-gray-300"}`,disabled:h}),b.fullName&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:b.fullName})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date of Birth ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:d.dateOfBirth,onChange:z=>D("dateOfBirth",z.target.value),max:new Date().toISOString().split("T")[0],className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.dateOfBirth?"border-red-500":"border-gray-300"}`,disabled:h}),b.dateOfBirth&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:b.dateOfBirth})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Gender ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:d.gender,onChange:z=>D("gender",z.target.value),className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${b.gender?"border-red-500":"border-gray-300"}`,disabled:h,children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]}),b.gender&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:b.gender})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:d.phoneNumber,onChange:z=>D("phoneNumber",z.target.value),placeholder:"e.g., 0123456789",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:h})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:d.email,onChange:z=>D("email",z.target.value),placeholder:"e.g., patient@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:h})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),a.jsx("textarea",{value:d.address,onChange:z=>D("address",z.target.value),placeholder:"e.g., 123 Main Street, City",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",disabled:h})]})]})]}),a.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex items-center justify-end gap-3 sticky bottom-0",children:[a.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:h,children:"Cancel"}),a.jsxs("button",{type:"button",onClick:E,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,children:[a.jsx(rs,{className:"w-4 h-4"}),h?"Adding...":"Add Patient"]})]})]})]})}):null}const sp=c=>{try{const u=c.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),d=decodeURIComponent(atob(u).split("").map(f=>"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(d)}catch(i){return console.error("Error decoding JWT:",i),null}},lp=(c,i)=>c?.email||c?.Email||c?.username||c?.userName||i?.email||i?.userName||"System";function np(){const c=it(),[i,u]=j.useState([]),[d,f]=j.useState(!0),[b,v]=j.useState(null),[h,w]=j.useState(""),[C,M]=j.useState(null),[g,E]=j.useState(""),[p,D]=j.useState(1),[z,K]=j.useState(10),[J,$]=j.useState(0),[P,H]=j.useState(1),[ee,_]=j.useState(!1),[Z,de]=j.useState(!1),[pe,k]=j.useState(!1),{accessToken:T,user:W}=Ct(),I=T&&typeof T=="string"&&T.includes(".")?sp(T):null;j.useEffect(()=>{ge()},[p,z]),j.useEffect(()=>{if(h){const X=setTimeout(()=>{w("")},5e3);return()=>clearTimeout(X)}},[h]);const ge=async()=>{try{f(!0),v(null);const X={pageNumber:p,pageSize:z,searchTerm:g.trim()},me=await Xs.getAllPatients(X);u(me.patients||[]),$(me.totalCount||0),H(me.totalPages||1),_(me.hasNextPage||!1),de(me.hasPreviousPage||!1)}catch(X){console.error("Error fetching patients:",X),v("Failed to load patients. Please try again."),u([])}finally{f(!1)}},ie=async X=>{if(!X?.patientId){v("Invalid patient information. Please refresh and try again.");return}if(!X.identifyNumber||!X.fullName||!X.dateOfBirth||!X.gender){v("Patient information is incomplete. Please ensure all required fields are filled.");return}try{M(X.patientId);const me=lp(I,W);let te=X.dateOfBirth;te&&(typeof te=="string"&&te.includes("T")?te=te.split("T")[0]:te instanceof Date&&(te=te.toISOString().split("T")[0])),await Y0({fullName:X.fullName,dateOfBirth:te,gender:X.gender,phoneNumber:X.phoneNumber||"",email:X.email||"",address:X.address||"",identifyNumber:X.identifyNumber,createIAMUser:!0});const Be=X.fullName||`PAT-${String(X.patientId).padStart(3,"0")}`;w(`Medical record for ${Be} created successfully!`),await ge()}catch(me){console.error("Error creating medical record:",me),v(me.response?.data?.message||me.message||"Failed to create medical record. Please try again.")}finally{M(null)}},x=()=>{D(1),ge()},F=()=>{E(""),D(1),setTimeout(()=>ge(),100)},y=X=>{K(X),D(1)},S=X=>{X>=1&&X<=P&&D(X)},q=X=>{X?.patientId&&c(`/patients/${X.patientId}/medical-records`,{state:{patient:X}})},Q=()=>{k(!0)},ne=async X=>{try{const me=await Xs.createPatientByIdentity(X);return console.log("Patient added successfully:",me),w(`Patient "${X.fullName||X.identifyNumber}" added successfully!`),await ge(),me}catch(me){throw console.error("Error adding patient:",me),me}},se=X=>{if(!X)return"N/A";const me=new Date(X),te=String(me.getMonth()+1).padStart(2,"0"),Be=String(me.getDate()).padStart(2,"0"),re=me.getFullYear();return`${te}/${Be}/${re}`},ce=X=>{if(!X)return"N/A";const me=new Date(X),te=String(me.getMonth()+1).padStart(2,"0"),Be=String(me.getDate()).padStart(2,"0"),re=me.getFullYear(),ut=String(me.getHours()).padStart(2,"0"),Ht=String(me.getMinutes()).padStart(2,"0");return`${te}/${Be}/${re} ${ut}:${Ht}`},Ne=()=>{const X=[];if(P<=5)for(let te=1;te<=P;te++)X.push(te);else p<=3?X.push(1,2,3,"...",P):p>=P-2?X.push(1,"...",P-2,P-1,P):X.push(1,"...",p-1,p,p+1,"...",P);return X};return a.jsx(Xe,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-4",children:[a.jsxs("button",{onClick:()=>c("/dashboard"),className:"flex items-center hover:text-gray-900",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Back to list"})]}),a.jsx("span",{className:"mx-2",children:"/"}),a.jsx("button",{onClick:()=>c("/dashboard"),className:"hover:text-gray-900",children:"Home"}),a.jsx("span",{className:"mx-2",children:"/"}),a.jsx("span",{className:"text-gray-900",children:"Patients"})]}),a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Patient Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage and view all registered patients in the laboratory system"})]}),a.jsxs("button",{onClick:Q,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(rs,{className:"w-5 h-5"}),"Add Patient"]})]})]}),h&&a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[a.jsx(qa,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-green-800 font-medium",children:"Success"}),a.jsx("p",{className:"text-green-600 text-sm",children:h})]}),a.jsx("button",{onClick:()=>w(""),className:"ml-auto text-green-600 hover:text-green-800",children:a.jsx(tl,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Patients"}),a.jsxs("div",{className:"relative",children:[a.jsx(io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:g,onChange:X=>E(X.target.value),onKeyPress:X=>X.key==="Enter"&&x(),placeholder:"Search by name, Patient ID, phone number, or email",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:F,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Clear Filters"}),a.jsxs("span",{className:"text-gray-600 text-sm",children:["Showing ",J.toLocaleString()," patients"]})]}),a.jsx("button",{onClick:x,disabled:d,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Searching...":"Apply Filters"})]})]}),b&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center gap-3",children:[a.jsx(el,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-800 font-medium",children:"Error"}),a.jsx("p",{className:"text-red-600 text-sm",children:b})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:d?a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading patients..."})]})}):i.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-500 text-lg",children:"No patients found"}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Try adjusting your search filters"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Full Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date of Birth"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone Number"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(X=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["PAT-",String(X.patientId).padStart(3,"0")]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.fullName}),a.jsx("div",{className:"text-sm text-gray-500",children:X.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:se(X.dateOfBirth)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.age}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X.gender==="Male"?"bg-blue-100 text-blue-800":"bg-pink-100 text-pink-800"}`,children:X.gender})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:X.phoneNumber}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:X.address,children:X.address}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:ce(X.createdAt)}),a.jsxs("div",{className:"text-xs text-gray-400",children:["by ",X.createdBy]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsxs("button",{onClick:()=>q(X),className:"flex items-center gap-1 bg-blue-600 text-white px-4 py-1.5 rounded hover:bg-blue-700 transition-colors",children:[a.jsx(O0,{className:"w-4 h-4"}),"View Detail"]}),a.jsxs("button",{onClick:()=>ie(X),disabled:C===X.patientId||d,className:"flex items-center gap-1 bg-green-600 text-white px-4 py-1.5 rounded hover:bg-green-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[a.jsx(is,{className:"w-4 h-4"}),C===X.patientId?"Creating...":"New Record"]})]})})]},X.patientId))})]})}),a.jsx("div",{className:"bg-white px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-700",children:"Show"}),a.jsxs("select",{value:z,onChange:X=>y(Number(X.target.value)),className:"border border-gray-300 rounded px-2 py-1 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:10,children:"10"}),a.jsx("option",{value:25,children:"25"}),a.jsx("option",{value:50,children:"50"}),a.jsx("option",{value:100,children:"100"})]}),a.jsx("span",{className:"text-sm text-gray-700",children:"entries per page"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"text-sm text-gray-700",children:["Showing ",J>0?(p-1)*z+1:0," to ",Math.min(p*z,J)," of ",J.toLocaleString()," entries"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>S(p-1),disabled:!Z||p===1,className:"p-2 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(Cr,{className:"w-5 h-5"})}),Ne().map((X,me)=>X==="..."?a.jsx("span",{className:"px-3 py-1 text-gray-500",children:"..."},`ellipsis-${me}`):a.jsx("button",{onClick:()=>S(X),className:`px-3 py-1 rounded transition-colors ${p===X?"bg-blue-600 text-white":"hover:bg-gray-100 text-gray-700"}`,children:X},X)),a.jsx("button",{onClick:()=>S(p+1),disabled:!ee||p===P,className:"p-2 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(B0,{className:"w-5 h-5"})})]})]})]})})]})})]}),a.jsx(ap,{isOpen:pe,onClose:()=>k(!1),onSuccess:ne})]})})}const rp="modulepreload",ip=function(c){return"/"+c},j0={},Ws=function(i,u,d){let f=Promise.resolve();if(u&&u.length>0){let w=function(C){return Promise.all(C.map(M=>Promise.resolve(M).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),h=v?.nonce||v?.getAttribute("nonce");f=w(u.map(C=>{if(C=ip(C),C in j0)return;j0[C]=!0;const M=C.endsWith(".css"),g=M?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${C}"]${g}`))return;const E=document.createElement("link");if(E.rel=M?"stylesheet":rp,M||(E.as="script"),E.crossOrigin="",E.href=C,h&&E.setAttribute("nonce",h),document.head.appendChild(E),M)return new Promise((p,D)=>{E.addEventListener("load",p),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${C}`)))})}))}function b(v){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=v,window.dispatchEvent(h),!h.defaultPrevented)throw v}return f.then(v=>{for(const h of v||[])h.status==="rejected"&&b(h.reason);return i().catch(b)})},uo=async c=>{try{const i={fullName:c.fullName||"",dateOfBirth:c.dateOfBirth||"",gender:c.gender||"",phoneNumber:c.phoneNumber||"",email:c.email||"",address:c.address||"",testType:c.testType||"",priority:c.priority||"Normal",note:c.note||"",identifyNumber:c.identifyNumber||""};return(await fe.post("/TestOrder",i)).data}catch(i){throw console.error("Error creating test order:",i),i}},G0=async(c,i)=>{try{const u={testOrderId:c,identifyNumber:i.identifyNumber||"",patientName:i.patientName||"",dateOfBirth:i.dateOfBirth||null,age:parseInt(i.age)||0,gender:i.gender||"",address:i.address||"",phoneNumber:i.phoneNumber||"",email:i.email||"",priority:i.priority||"Normal",status:i.status||"Created",note:i.note||""};return(await fe.patch(`/TestOrder/${c}`,u)).data}catch(u){throw console.error("Error updating test order:",u),u}},Q0=async c=>{try{return(await fe.delete(`/TestOrder/${c}`)).data}catch(i){throw console.error("Error deleting test order:",i),i}},ao=async c=>{try{return(await fe.get(`/TestOrder/${c}`)).data}catch(i){throw console.error("Error fetching test order:",i),i}},J0=async c=>{try{return(await fe.get(`/TestOrder/by-patient/${c}`)).data}catch(i){throw console.error("Error fetching test orders by patient ID:",i),i}},mo=async(c,i=null,u=null)=>{try{const d=`export_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,f=(await Ws(async()=>{const{default:v}=await Promise.resolve().then(()=>tn);return{default:v}},void 0)).default,b={patientId:c,testOrderIds:i,fileName:u};return f.registerJob(d,{type:"export",fileName:u||`Test Orders-Patient${c}.xlsx`,status:"pending",progress:0,exportRequest:b}),setTimeout(async()=>{try{const v=(await Ws(async()=>{const{default:K}=await Promise.resolve().then(()=>tn);return{default:K}},void 0)).default;v.updateJob(d,{status:"processing",progress:10});const h=[25,50,75,90];for(const K of h)await new Promise(J=>setTimeout(J,500)),v.updateJob(d,{progress:K});const w=new URLSearchParams;u&&w.append("fileName",u),i&&i.length>0&&i.forEach(K=>w.append("testOrderIds",K));const C=w.toString(),M=`/TestOrder/export-patient/${c}${C?`?${C}`:""}`,g=await fe.get(M,{responseType:"blob"}),E=new Blob([g.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),p=window.URL.createObjectURL(E),D=g.headers["content-disposition"];let z=u||`Test Orders-Patient${c}.xlsx`;if(D){const K=D.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);K&&K[1]&&(z=K[1].replace(/['"]/g,""))}v.updateJob(d,{status:"completed",progress:100,downloadUrl:p,fileName:z})}catch(v){(await Ws(async()=>{const{default:w}=await Promise.resolve().then(()=>tn);return{default:w}},void 0)).default.updateJob(d,{status:"failed",errorMessage:v.message||"Export failed"})}},100),{jobId:d}}catch(d){throw console.error("Error starting export job:",d),d}},so=async c=>{const u=(await Ws(async()=>{const{default:d}=await Promise.resolve().then(()=>tn);return{default:d}},void 0)).default.getJob(c);return u?{jobId:u.jobId,status:u.status,progress:u.progress,downloadUrl:u.downloadUrl,errorMessage:u.errorMessage,fileName:u.fileName}:null},lo=async c=>{try{const u=(await Ws(async()=>{const{default:b}=await Promise.resolve().then(()=>tn);return{default:b}},void 0)).default.getJob(c);if(!u||u.status!=="completed"||!u.downloadUrl)throw new Error("File not ready for download");return await(await fetch(u.downloadUrl)).blob()}catch(i){throw console.error("Error downloading exported file:",i),i}},cp=Object.freeze(Object.defineProperty({__proto__:null,createTestOrder:uo,deleteTestOrder:Q0,downloadExportedFile:lo,getExportJobStatus:so,getTestOrderById:ao,getTestOrdersByPatientId:J0,startExportJob:mo,updateTestOrder:G0},Symbol.toStringTag,{value:"Module"}));function X0({isOpen:c,onClose:i,onSubmit:u,onDelete:d,mode:f="create",initialData:b=null,patientData:v=null}){const[h,w]=j.useState({identifyNumber:"",patientName:"",dateOfBirth:"",age:"",gender:"Male",address:"",phoneNumber:"",email:"",priority:"Normal",note:"",servicePackageId:""}),[C,M]=j.useState({}),[g,E]=j.useState(!1),[p,D]=j.useState(!1),z=["Normal","Urgent","STAT"],K=["Male","Female","Other"],J=[{id:"3fa85f64-5717-4562-b3fc-2c963f66afa6",name:"Complete Blood Count (CBC)"},{id:"4fa85f64-5717-4562-b3fc-2c963f66afa7",name:"Lipid Panel"},{id:"5fa85f64-5717-4562-b3fc-2c963f66afa8",name:"Comprehensive Metabolic Panel"},{id:"6fa85f64-5717-4562-b3fc-2c963f66afa9",name:"Thyroid Function Test"},{id:"7fa85f64-5717-4562-b3fc-2c963f66afaa",name:"Liver Function Test"},{id:"8fa85f64-5717-4562-b3fc-2c963f66afab",name:"Renal Function Test"}];j.useEffect(()=>{c&&(f==="edit"&&b?w({identifyNumber:b.identifyNumber||"",patientName:b.patientName||"",dateOfBirth:b.dateOfBirth?b.dateOfBirth.split("T")[0]:"",age:String(b.age||""),gender:b.gender||"Male",address:b.address||"",phoneNumber:b.phoneNumber||"",email:b.email||"",priority:b.priority||"Normal",note:b.note||"",servicePackageId:b.servicePackageId||""}):f==="create"&&v&&w({identifyNumber:v.identifyNumber||"",patientName:v.fullName||"",dateOfBirth:v.dateOfBirth?v.dateOfBirth.split("T")[0]:"",age:String(v.age||""),gender:v.gender||"Male",address:v.address||"",phoneNumber:v.phoneNumber||"",email:v.email||"",priority:"Normal",note:"",servicePackageId:J[0]?.id||""}),M({}),D(!1))},[c,f,b,v]);const $=()=>{const _={};if(h.identifyNumber.trim()||(_.identifyNumber="Identify Number is required"),h.patientName.trim()||(_.patientName="Patient Name is required"),h.dateOfBirth||(_.dateOfBirth="Date of Birth is required"),h.phoneNumber.trim()||(_.phoneNumber="Phone Number is required"),h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(_.email="Invalid email format"):_.email="Email is required",h.address.trim()||(_.address="Address is required"),f==="create"&&(h.servicePackageId||(_.servicePackageId="Service Package is required")),f==="edit"){const Z=parseInt(h.age);(!h.age||isNaN(Z)||Z<=0)&&(_.age="Valid age is required")}return M(_),Object.keys(_).length===0},P=_=>{const{name:Z,value:de}=_.target;w(pe=>({...pe,[Z]:de})),C[Z]&&M(pe=>({...pe,[Z]:""}))},H=async()=>{if($()){E(!0);try{let _;f==="create"?_={identifyNumber:h.identifyNumber.trim(),fullName:h.patientName.trim(),dateOfBirth:h.dateOfBirth,gender:h.gender,phoneNumber:h.phoneNumber.trim(),email:h.email.trim(),address:h.address.trim(),testType:h.servicePackageId,priority:h.priority,note:h.note.trim()}:_={identifyNumber:h.identifyNumber.trim(),patientName:h.patientName.trim(),dateOfBirth:h.dateOfBirth,age:parseInt(h.age),gender:h.gender,address:h.address.trim(),phoneNumber:h.phoneNumber.trim(),email:h.email.trim(),priority:h.priority,note:h.note.trim(),status:b?.status||"Created"},console.log(`${f.toUpperCase()} payload:`,_),await u(_),i()}catch(_){console.error("Error submitting:",_),M({submit:_.response?.data?.errors?Object.values(_.response.data.errors).flat().join(", "):_.response?.data?.message||_.message||"Failed to submit test order"})}finally{E(!1)}}},ee=async()=>{E(!0);try{await d(),i()}catch(_){console.error("Error deleting:",_),M({submit:_.response?.data?.message||"Failed to delete test order"})}finally{E(!1),D(!1)}};return c?a.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[a.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white flex items-center justify-between p-6 border-b border-gray-200 z-10",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:f==="create"?"Create New Test Order":"Edit Test Order"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:f==="edit"?`Order ID: ${b?.testOrderId}`:"Fill in the information below"})]}),a.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(tl,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6",children:[C.submit&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(el,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-sm text-red-700",children:C.submit})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Identify Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"identifyNumber",value:h.identifyNumber,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.identifyNumber?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 079203004567"}),C.identifyNumber&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.identifyNumber})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Patient Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"patientName",value:h.patientName,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.patientName?"border-red-500":"border-gray-300"}`,placeholder:"Enter patient name"}),C.patientName&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.patientName})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Birth ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",name:"dateOfBirth",value:h.dateOfBirth,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.dateOfBirth?"border-red-500":"border-gray-300"}`}),C.dateOfBirth&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.dateOfBirth})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Gender ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{name:"gender",value:h.gender,onChange:P,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:K.map(_=>a.jsx("option",{value:_,children:_},_))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"tel",name:"phoneNumber",value:h.phoneNumber,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.phoneNumber?"border-red-500":"border-gray-300"}`,placeholder:"e.g., 0909123456"}),C.phoneNumber&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.phoneNumber})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",name:"email",value:h.email,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.email?"border-red-500":"border-gray-300"}`,placeholder:"example@email.com"}),C.email&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.email})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",name:"address",value:h.address,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.address?"border-red-500":"border-gray-300"}`,placeholder:"Enter full address"}),C.address&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.address})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Details"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f==="create"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Test Type (Service Package) ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"servicePackageId",value:h.servicePackageId,onChange:P,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${C.servicePackageId?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a service package"}),J.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]}),C.servicePackageId&&a.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.servicePackageId})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Priority ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"flex gap-4",children:z.map(_=>a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"radio",name:"priority",value:_,checked:h.priority===_,onChange:P,className:"mr-2"}),a.jsx("span",{className:`text-sm font-medium ${_==="STAT"?"text-red-600":_==="Urgent"?"text-orange-600":"text-gray-700"}`,children:_})]},_))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note"}),a.jsx("textarea",{name:"note",value:h.note,onChange:P,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter any additional notes..."})]})]})]})]})]}),a.jsxs("div",{className:"sticky bottom-0 bg-gray-50 flex items-center justify-between px-6 py-4 border-t border-gray-200",children:[a.jsx("div",{children:f==="edit"&&a.jsxs("button",{type:"button",onClick:()=>D(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:g,children:[a.jsx(Bh,{className:"w-4 h-4"}),"Delete"]})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:"Cancel"}),a.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:[a.jsx(Uh,{className:"w-4 h-4"}),g?"Saving...":f==="create"?"Create Order":"Save Changes"]})]})]})]})]}),p&&a.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto",children:a.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>D(!1)}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(el,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Test Order"}),a.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),a.jsx("p",{className:"text-gray-700 mb-6",children:"Are you sure you want to delete this test order? All associated data will be permanently removed."}),a.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[a.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:g,children:"Cancel"}),a.jsx("button",{onClick:ee,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",disabled:g,children:g?"Deleting...":"Delete"})]})]})]})})]}):null}function op({message:c,type:i="success",onClose:u}){j.useEffect(()=>{const v=setTimeout(()=>{u()},4e3);return()=>clearTimeout(v)},[u]);const d={success:a.jsx(qa,{className:"w-5 h-5 text-green-500"}),error:a.jsx(U0,{className:"w-5 h-5 text-red-500"}),info:a.jsx(el,{className:"w-5 h-5 text-blue-500"})},f={success:"bg-green-50 border-green-200",error:"bg-red-50 border-red-200",info:"bg-blue-50 border-blue-200"},b={success:"text-green-800",error:"text-red-800",info:"text-blue-800"};return a.jsxs("div",{className:`flex items-center gap-3 ${f[i]} border rounded-lg p-4 shadow-lg min-w-[320px] max-w-md animate-slide-in`,children:[d[i],a.jsx("p",{className:`flex-1 text-sm font-medium ${b[i]}`,children:c}),a.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(tl,{className:"w-4 h-4"})})]})}function fo({toasts:c,removeToast:i}){return a.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2",children:c.map(u=>a.jsx(op,{message:u.message,type:u.type,onClose:()=>i(u.id)},u.id))})}function Mr(){const[c,i]=j.useState([]);return{toasts:c,showToast:(f,b="success")=>{const v=Date.now();i(h=>[...h,{id:v,message:f,type:b}])},removeToast:f=>{i(b=>b.filter(v=>v.id!==f))}}}const dp=c=>{try{const u=c.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),d=decodeURIComponent(atob(u).split("").map(f=>"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(d)}catch(i){return console.error("Error decoding JWT:",i),null}},up=(c,i)=>c?.email||c?.Email||c?.username||c?.userName||i?.email||i?.userName||"System";function mp(){const{patientId:c}=C0(),i=it(),u=T0(),[d,f]=j.useState(!0),[b,v]=j.useState(null),[h,w]=j.useState(null),[C,M]=j.useState(!1),{accessToken:g,user:E}=Ct(),p=g&&typeof g=="string"&&g.includes(".")?dp(g):null,D=u.state?.patient,{toasts:z,showToast:K,removeToast:J}=Mr(),[$,P]=j.useState(!1),[H,ee]=j.useState("create"),[_,Z]=j.useState(null);j.useEffect(()=>{c&&k()},[c,D?.fullName]);const de=y=>y?{medicalRecordId:y.medicalRecordId,patientId:y.patientId,fullName:y.patientName,dateOfBirth:y.dateOfBirth==="0001-01-01"?null:y.dateOfBirth,age:y.age,email:y.email,createdAt:y.createdAt,createdBy:y.createdBy,updatedAt:y.updatedAt,updatedBy:y.updatedBy,gender:y.gender,phoneNumber:y.phoneNumber,address:y.address,identifyNumber:y.identifyNumber,testOrders:y.testOrders||[]}:null,pe=(y,S)=>y?{medicalRecordId:null,patientId:y.patientId,fullName:y.fullName,dateOfBirth:y.dateOfBirth,age:y.age,email:y.email,createdAt:y.createdAt,createdBy:y.createdBy||"System",updatedAt:y.updatedAt,updatedBy:y.updatedBy||"",gender:y.gender,phoneNumber:y.phoneNumber,address:y.address,identifyNumber:y.identifyNumber,testOrders:[]}:null,k=async()=>{try{f(!0),v(null),console.log("Fetching medical records...");const y=await I0();console.log("Fetched medical records:",y);const S=Number(c),q=Array.isArray(y)?y:[],Q=q.filter(re=>re?.patientId!==void 0&&Number(re.patientId)===S),ne=D?.email?.trim().toLowerCase(),se=!Q.length&&ne?q.filter(re=>re?.email?.trim().toLowerCase()===ne):[],ce=D?.fullName?.trim().toLowerCase(),Ne=!Q.length&&!se.length&&ce?q.filter(re=>re?.patientName?.trim().toLowerCase()===ce):[],te=(Q.length?Q:se.length?se:Ne).sort((re,ut)=>new Date(ut.createdAt)-new Date(re.createdAt))[0];if(te){w(de(te));return}const Be=pe(D,null);if(Be){w(Be);return}w(null)}catch(y){console.error("Error fetching medical records:",y),v(y.response?.data?.message||y.message||"Failed to load medical records")}finally{f(!1)}},T=async()=>{const y=Number(c);if(!Number.isFinite(y)){K("Invalid patient identifier. Please go back and try again.","error");return}const S=h||D;if(!S){K("Patient information not available. Please refresh the page.","error");return}if(!S.identifyNumber||!S.fullName||!S.dateOfBirth||!S.gender){K("Patient information is incomplete. Please ensure all required fields are filled.","error");return}try{M(!0);const q=up(p,E);let Q=S.dateOfBirth;Q&&(typeof Q=="string"&&Q.includes("T")?Q=Q.split("T")[0]:Q instanceof Date&&(Q=Q.toISOString().split("T")[0])),await Y0({fullName:S.fullName,dateOfBirth:Q,gender:S.gender,phoneNumber:S.phoneNumber||"",email:S.email||"",address:S.address||"",identifyNumber:S.identifyNumber,createIAMUser:!0}),K("Medical record created successfully!","success"),await k()}catch(q){console.error("Error creating medical record:",q),K(q.response?.data?.message||q.message||"Failed to create medical record.","error")}finally{M(!1)}},W=()=>{ee("create"),Z(null),P(!0)},I=y=>{ee("edit"),Z(y),P(!0)},ge=async y=>{try{console.log("Submitting test order with data:",y),H==="create"?(await uo(y),K("Test order created successfully!","success")):(await G0(_.testOrderId,y),K("Test order updated successfully!","success")),await k(),P(!1)}catch(S){console.error("Error submitting test order:",S),K(S.response?.data?.errors?Object.values(S.response.data.errors).flat().join(", "):S.response?.data?.message||S.message||"Failed to submit test order","error")}},ie=async()=>{try{if(_?.testOrderId){const y=await Q0(_.testOrderId);console.log("Test order deleted:",y),K("Test order deleted successfully!","success"),P(!1),await k()}}catch(y){throw console.error("Error deleting test order:",y),K(y.response?.data?.message||y.message||"Failed to delete test order. Please try again.","error"),y}},x=y=>y?new Date(y).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",F=y=>({Completed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Cancelled:"bg-red-100 text-red-800",Created:"bg-blue-100 text-blue-800"})[y]||"bg-gray-100 text-gray-800";return d?a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading medical records..."})]})})}):b?a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-4",children:[a.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Error Loading Data"}),a.jsx("p",{className:"text-red-500 text-sm",children:b})]}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:k,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"}),a.jsx("button",{onClick:T,disabled:C||d,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-60 disabled:cursor-not-allowed",children:C?"Creating...":"New Medical Record"}),a.jsx("button",{onClick:()=>i("/patients"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Back to Patients"})]})]})})}):h?a.jsx(Xe,{children:a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(fo,{toasts:z,removeToast:J}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-6",children:[a.jsxs("button",{onClick:()=>i("/patients"),className:"flex items-center hover:text-gray-900",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Back to list"})]}),a.jsx("span",{className:"mx-2",children:"/"}),a.jsx("button",{onClick:()=>i("/dashboard"),className:"hover:text-gray-900",children:"Home"}),a.jsx("span",{className:"mx-2",children:"/"}),a.jsx("button",{onClick:()=>i("/patients"),className:"hover:text-gray-900",children:"Patients"}),a.jsx("span",{className:"mx-2",children:"/"}),a.jsx("span",{className:"text-gray-900",children:h.fullName})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Patient Medical Record"}),a.jsxs("button",{onClick:T,disabled:C||d,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[a.jsx(rs,{className:"w-4 h-4"}),C?"Creating...":"New Medical Record"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(ls,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Patient Information"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Medical Record ID: ",h.medicalRecordId]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Full Name"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:h.fullName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Age"}),a.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-1",children:[h.age," years"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-1 flex items-center gap-1",children:[a.jsx(no,{className:"w-3 h-3 text-blue-600"}),h.email]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Created By"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:h.createdBy})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Created At"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:x(h.createdAt)})]}),h.updatedAt&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider",children:"Last Updated"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:x(h.updatedAt)})]})]})]}),h?.testOrders&&h.testOrders.length>0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(is,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Test Orders"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[h.testOrders.length," order(s) found"]})]})]}),a.jsxs("button",{onClick:W,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(rs,{className:"w-4 h-4"}),"New Test Order"]})]}),a.jsx("div",{className:"space-y-4",children:h.testOrders.map(y=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:border-blue-300 transition-colors",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:y.orderCode}),a.jsx("p",{className:"text-xs text-gray-500 font-mono",children:y.testOrderId})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${F(y.status)}`,children:y.status}),a.jsx("button",{onClick:()=>I(y),className:"text-blue-600 hover:text-blue-700 p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Test Order",children:a.jsx(kh,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Priority"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.priority})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Run Date"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.runDate&&y.runDate!=="0001-01-01T00:00:00"?x(y.runDate):"Not run yet"})]}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Run By"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:y.runBy||"N/A"})]}),y.note&&a.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-blue-50 p-3 rounded-lg border border-blue-200",children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Note"}),a.jsx("p",{className:"text-sm text-gray-900",children:y.note})]}),y.testResults&&a.jsxs("div",{className:"md:col-span-2 lg:col-span-4 bg-green-50 p-3 rounded-lg border border-green-200",children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block mb-1",children:"Test Results"}),a.jsx("p",{className:"text-sm text-gray-900",children:y.testResults})]})]})]},y.testOrderId))})]}):a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Test Orders Found"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"This patient doesn't have any test orders yet."}),a.jsxs("button",{onClick:W,className:"flex items-center gap-2 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors mx-auto",children:[a.jsx(rs,{className:"w-4 h-4"}),"Create New Test Order"]})]})]}),a.jsx(X0,{isOpen:$,onClose:()=>P(!1),onSubmit:ge,onDelete:ie,mode:H,initialData:_,patientData:h})]})}):a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-4",children:[a.jsx("p",{className:"text-gray-900 font-semibold mb-2",children:"No Medical Record Found"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"We couldn't find any medical record for this patient yet."})]}),a.jsxs("div",{className:"flex gap-3 justify-center",children:[a.jsx("button",{onClick:T,disabled:C||d,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed",children:C?"Creating...":"Create Medical Record"}),a.jsx("button",{onClick:()=>i("/patients"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Back to Patients"})]})]})})})}const Z0=async(c,i=null)=>{try{if(!c)throw new Error("Test order ID is required");const u=String(c).trim();if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(u))throw console.error("Invalid test order ID format:",u),new Error("Invalid test order ID format");const f=new URLSearchParams;i&&f.append("fileName",i);const b=f.toString(),v=`/TestResult/print/${u}${b?`?${b}`:""}`;console.log("Exporting PDF - URL:",v,"BaseURL:",fe.defaults.baseURL);const h=await fe.get(v,{responseType:"blob"});if(h.data.type&&h.data.type!=="application/pdf"&&h.data.size===0)throw new Error("Invalid PDF response from server");const w=new Blob([h.data],{type:"application/pdf"}),C=window.URL.createObjectURL(w),M=document.createElement("a");M.href=C;const g=h.headers["content-disposition"];let E=i?`${i}.pdf`:`TestResult-${c}.pdf`;if(g){const p=g.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);p&&p[1]&&(E=p[1].replace(/['"]/g,""),E.endsWith(".pdf")||(E+=".pdf"))}return M.setAttribute("download",E),document.body.appendChild(M),M.click(),M.remove(),window.URL.revokeObjectURL(C),{success:!0,fileName:E}}catch(u){if(console.error("Error exporting test results to PDF:",u),u.response){const d=u.response.status,f=u.response.data;if(d===404)throw new Error("Test order not found. Please check if the test order exists and is completed.");if(d===400){const b=f?.message||"Invalid request. The test order may not be completed yet.";throw new Error(b)}else throw d===403?new Error("You do not have permission to export this test result."):d===500?new Error("Server error occurred while generating PDF. Please try again later."):new Error(f?.message||`Failed to export PDF (Status: ${d})`)}else throw u.request?new Error("Network error. Please check your connection and try again."):u}},Zs=async c=>{try{const i=await fe.get(`/TestOrder/${c}/test-results`);return Array.isArray(i.data)?i.data.map(u=>({testResultId:u.testResultId||u.TestResultId,testCode:u.testCode||u.TestCode||"",parameter:u.parameter||u.Parameter||"",valueNumeric:u.valueNumeric!==void 0?u.valueNumeric:u.ValueNumeric,valueText:u.valueText!==void 0?u.valueText:u.ValueText,unit:u.unit||u.Unit||"",referenceRange:u.referenceRange||u.ReferenceRange||"",status:u.status||u.Status||"",instrument:u.instrument||u.Instrument||"",resultStatus:u.resultStatus||u.ResultStatus||"",performedBy:u.performedBy!==void 0?u.performedBy:u.PerformedBy,performedDate:u.performedDate||u.PerformedDate,reviewedBy:u.reviewedBy!==void 0?u.reviewedBy:u.ReviewedBy,reviewedDate:u.reviewedDate||u.ReviewedDate,reviewedByAI:u.reviewedByAI!==void 0?u.reviewedByAI:u.ReviewedByAI!==void 0?u.ReviewedByAI:!1,aiReviewedDate:u.aiReviewedDate||u.AiReviewedDate,isConfirmed:u.isConfirmed!==void 0?u.isConfirmed:u.IsConfirmed!==void 0?u.IsConfirmed:!1,confirmedByUserId:u.confirmedByUserId!==void 0?u.confirmedByUserId:u.ConfirmedByUserId,confirmedDate:u.confirmedDate||u.ConfirmedDate})):[]}catch(i){return i.response&&i.response.status>=500&&console.warn("Could not fetch test results:",i),[]}},fp=async c=>{try{if(!c)throw new Error("Test order ID is required");const i=String(c).trim();if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(i))throw console.error("Invalid test order ID format:",i),new Error("Invalid test order ID format");const d=`/TestResult/process-from-simulator/${i}`;console.log("Processing test results from simulator:",{url:d,testOrderId:i});const f=await fe.post(d);return console.log("Process from simulator response:",f.data),{success:f.data?.success!==!1,message:f.data?.message||"Test results processed successfully"}}catch(i){if(console.error("Error processing test results from simulator:",i),i.response){const u=i.response.status,d=i.response.data;if(u===404)throw new Error("Test order not found.");if(u===400){const f=d?.message||"Invalid request. The test order may not be ready for processing.";throw new Error(f)}else throw u===500?new Error("Server error occurred while processing test results. Please try again later."):new Error(d?.message||`Failed to process test results (Status: ${u})`)}else throw i.request?new Error("Network error. Please check your connection and try again."):i}};class en{constructor(){if(en.instance)return en.instance;this.jobs=new Map,this.listeners=new Map,this.pollingIntervals=new Map,this.downloadedJobs=new Set,en.instance=this}registerJob(i,u){if(this.jobs.has(i))return;const d=u?.createdAt||new Date().toISOString(),f={...u,jobId:i,status:u.status||"pending",progress:u.progress||0,createdAt:d};this.jobs.set(i,f),this.notifyListeners(i),this.dispatchJobRegisteredEvent(i)}updateJob(i,u){const d=this.jobs.get(i);d&&(Object.assign(d,u),d.jobId=i,this.jobs.set(i,d),this.notifyListeners(i))}getJob(i){const u=this.jobs.get(i);return u?{...u,jobId:i}:null}getAllJobs(){return Array.from(this.jobs.entries()).map(([i,u])=>({...u,jobId:i}))}getActiveJobs(){return this.getAllJobs().filter(i=>i.status==="pending"||i.status==="processing")}subscribe(i,u){return this.listeners.has(i)||this.listeners.set(i,new Set),this.listeners.get(i).add(u),()=>{const d=this.listeners.get(i);d&&(d.delete(u),d.size===0&&this.listeners.delete(i))}}notifyListeners(i){const u=this.listeners.get(i);if(u){const d=this.jobs.get(i);if(d){const f={...d,jobId:i};u.forEach(b=>{try{b(f)}catch(v){console.error("Error in job listener callback:",v)}})}}}startPolling(i,u,d=2e3){this.stopPolling(i);const f=async()=>{try{const v=await u(i);v&&(this.updateJob(i,v),(v.status==="completed"||v.status==="failed")&&this.stopPolling(i))}catch(v){console.error(`Error polling job ${i}:`,v),this.updateJob(i,{status:"failed",errorMessage:v.message||"Failed to check job status"}),this.stopPolling(i)}};f();const b=setInterval(f,d);this.pollingIntervals.set(i,b)}stopPolling(i){const u=this.pollingIntervals.get(i);u&&(clearInterval(u),this.pollingIntervals.delete(i))}removeJob(i){this.stopPolling(i),this.jobs.delete(i),this.listeners.delete(i),this.downloadedJobs.delete(i)}markJobAsDownloaded(i){this.downloadedJobs.add(i)}isJobDownloaded(i){return this.downloadedJobs.has(i)}cleanupOldJobs(i=3600*1e3){const u=Date.now(),d=[];this.jobs.forEach((f,b)=>{if(f.status==="completed"||f.status==="failed"){const v=new Date(f.createdAt).getTime();u-v>i&&d.push(b)}}),d.forEach(f=>this.removeJob(f))}dispatchJobRegisteredEvent(i){const u=new CustomEvent("exportJobRegistered",{detail:{jobId:i}});window.dispatchEvent(u)}}const Ie=new en;setInterval(()=>{Ie.cleanupOldJobs()},300*1e3);const tn=Object.freeze(Object.defineProperty({__proto__:null,default:Ie},Symbol.toStringTag,{value:"Module"}));function gp(){it();const[c,i]=j.useState(!0),[u,d]=j.useState(null),[f,b]=j.useState(null),[v,h]=j.useState([]),[w,C]=j.useState([]),[M,g]=j.useState(new Set),[E,p]=j.useState("card"),[D,z]=j.useState(!1),[K,J]=j.useState(new Set),[$,P]=j.useState({}),[H,ee]=j.useState(new Set),[_,Z]=j.useState(new Set);j.useEffect(()=>{de()},[]);const de=async()=>{try{i(!0),d(null);let y;if(Xs&&typeof Xs.getMyPatientInfo=="function"?y=await Xs.getMyPatientInfo():y=(await fe.get("/Patient/me")).data,!y){d("Patient information not found. Please contact support."),i(!1);return}b(y);try{if(y.patientId){const S=await J0(y.patientId);C(Array.isArray(S)?S:[])}else C([])}catch(S){console.warn("Could not fetch test orders:",S),C([])}try{const S=await Xs.getPatientMedicalRecords(y.patientId),q=Array.isArray(S)?S:[];h(q)}catch(S){console.warn("Could not fetch medical records:",S),h([])}}catch(y){console.error("Error fetching patient data:",y),d(y.response?.data?.message||y.message||"Failed to load patient information. Please try again.")}finally{i(!1)}},pe=y=>{if(!y||y==="0001-01-01")return"N/A";const S=new Date(y),q=String(S.getMonth()+1).padStart(2,"0"),Q=String(S.getDate()).padStart(2,"0"),ne=S.getFullYear();return`${q}/${Q}/${ne}`},k=y=>!y||y==="0001-01-01T00:00:00"?"N/A":new Date(y).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),T=y=>{g(S=>{const q=new Set(S);return q.has(y)?q.delete(y):q.add(y),q})},W=()=>{M.size===w.length?g(new Set):g(new Set(w.map(y=>y.testOrderId||y.TestOrderId)))},I=async()=>{if(!f?.patientId){alert("Patient information not available. Please refresh the page.");return}try{z(!0);const y=M.size>0?Array.from(M):null,S=y&&y.length>0?`Test Orders-${y.length} orders-${new Date().toISOString().split("T")[0]}.xlsx`:null;await mo(f.patientId,y,S),g(new Set)}catch(y){console.error("Export failed:",y),alert("Failed to start export. Please try again.")}finally{z(!1)}},ge=y=>({Completed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Cancelled:"bg-red-100 text-red-800",Created:"bg-blue-100 text-blue-800"})[y]||"bg-gray-100 text-gray-800",ie=async y=>{J(S=>{const q=new Set(S);return q.has(y)?q.delete(y):(q.add(y),$[y]||x(y)),q})},x=async y=>{try{ee(q=>new Set(q).add(y));const S=await Zs(y);P(q=>({...q,[y]:Array.isArray(S)?S:[]}))}catch(S){console.warn("Test results not available via API:",S),P(q=>({...q,[y]:[]}))}finally{ee(S=>{const q=new Set(S);return q.delete(y),q})}},F=async(y,S)=>{if(S.stopPropagation(),!f?.fullName){alert("Patient information not available. Please refresh the page.");return}try{Z(ce=>new Set(ce).add(y));const q=f.fullName.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().replace(/\s+/g,"-"),Q=new Date,ne=`${String(Q.getDate()).padStart(2,"0")}-${String(Q.getMonth()+1).padStart(2,"0")}-${Q.getFullYear()}`,se=`Detail-${q}-${ne}`;await Z0(y,se)}catch(q){console.error("Error exporting PDF:",q);const Q=q.message||"Failed to export PDF. Please try again.";alert(Q)}finally{Z(q=>{const Q=new Set(q);return Q.delete(y),Q})}};return c?a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your patient information..."})]})})}):u?a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-4",children:[a.jsx(el,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),a.jsx("p",{className:"text-red-600 font-semibold mb-2",children:"Error Loading Data"}),a.jsx("p",{className:"text-red-500 text-sm",children:u})]}),a.jsx("button",{onClick:de,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Try Again"})]})})}):f?a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Patient Information"}),a.jsx("p",{className:"text-gray-600",children:"View your personal patient information, test orders, and test results"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(ls,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Patient Information"}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Patient ID: PAT-",String(f.patientId||"").padStart(3,"0")]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ls,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Full Name"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:f.fullName||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Lh,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Date of Birth"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:pe(f.dateOfBirth)})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ls,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Age"}),a.jsxs("p",{className:"text-sm font-medium text-gray-900 mt-1",children:[f.age||"N/A"," years"]})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ls,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Gender"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:f.gender||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(z0,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Phone Number"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:f.phoneNumber||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(no,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Email"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:f.email||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 md:col-span-2 lg:col-span-3",children:[a.jsx(D0,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Address"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:f.address||"N/A"})]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ls,{className:"w-5 h-5 text-gray-400 mt-1 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 uppercase tracking-wider block",children:"Identity Number"}),a.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:f.identifyNumber||"N/A"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(is,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Test Orders"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[w.length," order(s) found",M.size>0&&`  ${M.size} selected`]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[w.length>0&&a.jsxs("div",{className:"flex items-center gap-1 border border-gray-300 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>p("card"),className:`p-2 rounded transition-colors ${E==="card"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,title:"Card View",children:a.jsx(k0,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded transition-colors ${E==="list"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,title:"List View",children:a.jsx(L0,{className:"w-4 h-4"})})]}),w.length>0&&a.jsxs("button",{onClick:I,disabled:D,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(co,{className:"w-5 h-5"}),D?"Starting...":M.size>0?`Export ${M.size} Selected`:"Export All"]})]})]}),w.length>0&&E==="list"&&a.jsx("div",{className:"mb-4 flex items-center gap-2 pb-3 border-b",children:a.jsxs("button",{onClick:W,className:"flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900",children:[M.size===w.length?a.jsx(Ks,{className:"w-5 h-5 text-blue-600"}):a.jsx(Fs,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{children:"Select All"})]})}),w.length>0?E==="card"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(y=>{const S=y.testOrderId||y.TestOrderId,q=y.orderCode||y.OrderCode,Q=y.status||y.Status,ne=M.has(S),se=K.has(S),ce=$[S]||[],Ne=ce.length>0||y.testResults||y.TestResults,X=H.has(S),me=_.has(S);return a.jsxs("div",{className:`
                          border-2 rounded-lg transition-all
                          ${ne?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 bg-white"}
                        `,children:[a.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>T(S),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[ne?a.jsx(Ks,{className:"w-5 h-5 text-blue-600"}):a.jsx(Fs,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:q||"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 font-mono truncate max-w-[150px]",children:S})]})]}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ge(Q)}`,children:Q||"N/A"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Priority:"}),a.jsx("span",{className:"font-medium",children:y.priority||y.Priority||"N/A"})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Created:"}),a.jsx("span",{className:"font-medium",children:pe(y.createdAt||y.CreatedAt)})]}),Ne&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[a.jsx(qa,{className:"w-3 h-3"}),a.jsx("span",{children:ce.length>0?`${ce.length} Results`:"Has Results"})]})]})]}),Ne&&a.jsxs("div",{className:"px-4 pb-3 flex items-center gap-2 border-t border-gray-200",children:[a.jsx("button",{onClick:te=>{te.stopPropagation(),ie(S)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:se?a.jsxs(a.Fragment,{children:[a.jsx($s,{className:"w-4 h-4"}),"Hide Results"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-4 h-4"}),"View Results"]})}),a.jsxs("button",{onClick:te=>F(S,te),disabled:me,className:"flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Export PDF",children:[me?a.jsx(qt,{className:"w-4 h-4 animate-spin"}):a.jsx(Rr,{className:"w-4 h-4"}),"PDF"]})]}),se&&Ne&&a.jsx("div",{className:"px-4 pb-4 border-t border-gray-200",children:X?a.jsxs("div",{className:"py-4 flex items-center justify-center",children:[a.jsx(qt,{className:"w-5 h-5 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"Loading results..."})]}):ce.length>0?a.jsxs("div",{className:"mt-3 space-y-2 max-h-96 overflow-y-auto",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Test Results:"}),a.jsx("div",{className:"space-y-2",children:ce.map((te,Be)=>a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-100",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Parameter:"}),a.jsx("p",{className:"font-semibold text-gray-900",children:te.parameter||te.Parameter||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Value:"}),a.jsx("p",{className:"font-bold text-blue-700",children:te.valueText||te.ValueText||(te.valueNumeric!==void 0&&te.valueNumeric!==null?te.valueNumeric.toFixed(2):te.ValueNumeric!==void 0&&te.ValueNumeric!==null?te.ValueNumeric.toFixed(2):"N/A")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Unit:"}),a.jsx("p",{className:"text-gray-900",children:te.unit||te.Unit||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"}),a.jsx("p",{className:`font-medium ${(te.resultStatus||te.ResultStatus)?.toLowerCase()==="completed"?"text-green-600":"text-gray-600"}`,children:te.resultStatus||te.ResultStatus||"N/A"})]}),(te.referenceRange||te.ReferenceRange)&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"Reference Range:"}),a.jsx("p",{className:"text-gray-900",children:te.referenceRange||te.ReferenceRange})]})]})},te.testResultId||Be))})]}):a.jsxs("div",{className:"py-4 text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Detailed test results are not available for viewing online."}),a.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Please export PDF to view complete test results."})]})})]},S)})}):a.jsx("div",{className:"space-y-2",children:w.map(y=>{const S=y.testOrderId||y.TestOrderId,q=y.orderCode||y.OrderCode,Q=y.status||y.Status,ne=M.has(S),se=K.has(S),ce=$[S]||[],Ne=ce.length>0||y.testResults||y.TestResults,X=H.has(S),me=_.has(S);return a.jsxs("div",{className:`
                          border-2 rounded-lg transition-all
                          ${ne?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}
                        `,children:[a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>T(S),className:"flex-shrink-0",children:ne?a.jsx(Ks,{className:"w-5 h-5 text-blue-600"}):a.jsx(Fs,{className:"w-5 h-5 text-gray-400"})}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Order Code"}),a.jsx("p",{className:"text-sm font-semibold",children:q||"N/A"}),a.jsx("p",{className:"text-xs text-gray-400 font-mono",children:S})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Status"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ge(Q)}`,children:Q||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Priority"}),a.jsx("p",{className:"text-sm font-medium",children:y.priority||y.Priority||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Created Date"}),a.jsx("p",{className:"text-sm font-medium",children:k(y.createdAt||y.CreatedAt)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Run Date"}),a.jsx("p",{className:"text-sm font-medium",children:(y.runDate||y.RunDate)&&y.runDate!=="0001-01-01T00:00:00"&&y.RunDate!=="0001-01-01T00:00:00"?k(y.runDate||y.RunDate):"Not run yet"})]})]})]}),(y.note||y.Note||Ne)&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[(y.note||y.Note)&&a.jsxs("div",{className:"bg-blue-50 p-2 rounded text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Note: "}),a.jsx("span",{className:"text-gray-900",children:y.note||y.Note})]}),Ne&&a.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs flex items-center gap-1",children:[a.jsx(qa,{className:"w-3 h-3 text-green-600"}),a.jsx("span",{className:"text-gray-500",children:"Results: "}),a.jsx("span",{className:"text-gray-900",children:ce.length>0?`${ce.length} test results`:"Available"})]})]}),Ne&&a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{onClick:()=>ie(S),className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:se?a.jsxs(a.Fragment,{children:[a.jsx($s,{className:"w-4 h-4"}),"Hide"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-4 h-4"}),"View"]})}),a.jsxs("button",{onClick:te=>F(S,te),disabled:me,className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Export PDF",children:[me?a.jsx(qt,{className:"w-4 h-4 animate-spin"}):a.jsx(Rr,{className:"w-4 h-4"}),"PDF"]})]})]})})]}),se&&Ne&&a.jsx("div",{className:"px-4 pb-4 border-t border-gray-200 bg-gray-50",children:X?a.jsxs("div",{className:"py-4 flex items-center justify-center",children:[a.jsx(qt,{className:"w-5 h-5 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"Loading results..."})]}):ce.length>0?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Test Results (",ce.length,"):"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:ce.map((te,Be)=>a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100 shadow-sm",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Parameter"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:te.parameter||te.Parameter||"N/A"})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(te.resultStatus||te.ResultStatus)?.toLowerCase()==="completed"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:te.resultStatus||te.ResultStatus||"N/A"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Value"}),a.jsx("p",{className:"text-base font-bold text-blue-700",children:te.valueText||te.ValueText||(te.valueNumeric!==void 0&&te.valueNumeric!==null?te.valueNumeric.toFixed(2):te.ValueNumeric!==void 0&&te.ValueNumeric!==null?te.ValueNumeric.toFixed(2):"N/A")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Unit"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:te.unit||te.Unit||"N/A"})]})]}),(te.referenceRange||te.ReferenceRange)&&a.jsxs("div",{className:"pt-2 border-t border-blue-200",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Reference Range"}),a.jsx("p",{className:"text-xs font-medium text-gray-700",children:te.referenceRange||te.ReferenceRange})]})]})},te.testResultId||Be))})]}):a.jsxs("div",{className:"py-4 text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Detailed test results are not available for viewing online."}),a.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Please export PDF to view complete test results."})]})})]},S)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(is,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Test Orders Found"}),a.jsx("p",{className:"text-gray-500",children:"You don't have any test orders yet."})]})]})]})})}):a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"text-center max-w-md",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-4",children:[a.jsx(ls,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-900 font-semibold mb-2",children:"No Patient Information Found"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"We couldn't find your patient information. Please contact support."})]})})})})}const hp=async c=>{try{const i=await fe.get(`/ai-review/${c}`);return{testOrderId:i.data.TestOrderId,aiReviewEnabled:i.data.AiReviewEnabled||!1}}catch(i){const u=i.response?.data?.message||"",d=i.response?.data?.error||"",f=d&&(d.includes("column")||d.includes("does not exist")||d.includes("42703")||d.includes("SQL")||d.includes("database"));return i.response?.status===404?{testOrderId:c,aiReviewEnabled:!1}:i.response?.status===400&&(u.toLowerCase().includes("not found")||u.toLowerCase().includes("test order not found"))?{testOrderId:c,aiReviewEnabled:!1}:i.response?.status===400&&f?(console.error(`[BACKEND ERROR] AI review status database error for order ${c}:`,{message:u,error:d,status:i.response.status,url:i.config?.url,note:"This is a backend SQL error. Please check the repository query - it may be referencing a non-existent column (e.g., CreatedAt)."}),{testOrderId:c,aiReviewEnabled:!1}):i.response?.status===400?{testOrderId:c,aiReviewEnabled:!1}:(i.response&&i.response.status>=500&&console.warn(`AI review status server error for order ${c}:`,{status:i.response.status,message:u,error:d}),{testOrderId:c,aiReviewEnabled:!1})}},xp=async(c,i)=>{try{const u=i===!0||i==="true"||i===1,d=`/ai-review/${c}?enable=${u}`;console.log("Setting AI review mode:",{url:d,testOrderId:c,enable:u});const f=await fe.put(d,null);return console.log("Set AI review mode response:",f.data),{testOrderId:f.data.TestOrderId,aiReviewEnabled:f.data.AiReviewEnabled||!1}}catch(u){throw console.error("Error setting AI review mode:",{url:u.config?.url,method:u.config?.method,status:u.response?.status,data:u.response?.data,testOrderId:c,enable:i}),u}},pp=async c=>{try{console.log("Triggering AI review for test order:",c);const i=await fe.post(`/ai-review/${c}/trigger`);return console.log("AI Review trigger response:",i.data),{testOrderId:i.data.testOrderId||i.data.TestOrderId,status:i.data.status||i.data.Status,isAiReviewEnabled:i.data.isAiReviewEnabled!==void 0?i.data.isAiReviewEnabled:i.data.IsAiReviewEnabled!==void 0?i.data.IsAiReviewEnabled:!1,aiReviewedResults:i.data.aiReviewedResults||i.data.AiReviewedResults||[]}}catch(i){throw console.error("Error triggering AI review:",{url:i.config?.url,method:i.config?.method,status:i.response?.status,data:i.response?.data,testOrderId:c}),i}},K0=async(c,i)=>{try{if(i==null)throw new Error(`userId is required but was ${i}`);const u=Number(i);if(Number.isNaN(u)||u<=0||!Number.isInteger(u))throw new Error(`Invalid userId: ${i} (parsed as: ${u})`);const d=`/ai-review/${c}/confirm?confirmedByUserId=${u}`;console.log("Confirming AI review results:",{url:d,testOrderId:c,originalUserId:i,parsedUserId:u,userIdType:typeof i});const f=await fe.post(d,null);return console.log("Confirm AI review results response:",f.data),{testOrderId:f.data.testOrderId||f.data.TestOrderId,status:f.data.status||f.data.Status,confirmedResults:f.data.confirmedResults||f.data.ConfirmedResults||[]}}catch(u){const d={url:u.config?.url,method:u.config?.method,status:u.response?.status,statusText:u.response?.statusText,data:u.response?.data,message:u.response?.data?.message||u.message,error:u.response?.data?.error||u.response?.data?.Error,testOrderId:c,originalUserId:i,userIdType:typeof i};if(console.error("Error confirming AI review results:",d),u.response?.status===400){const f=u.response?.data?.error||u.response?.data?.Error||"",b=u.response?.data?.message||u.response?.data?.Message||"";if(f.includes("not been reviewed by AI")||b.includes("not been reviewed by AI"))throw new Error("Test order has not been reviewed by AI yet. Please trigger AI review first.");if(f.includes("No AI-reviewed results")||b.includes("No AI-reviewed results"))throw new Error("No AI-reviewed results found to confirm, or all results have already been confirmed.");if(f.includes("no results")||b.includes("no results"))throw new Error("Test order has no results to confirm.")}throw u}};function bp({testOrderId:c,testResults:i=[],onConfirm:u}){const[d,f]=j.useState(new Set),[b,v]=j.useState(!1);if(j.useEffect(()=>{i.some(E=>E.reviewedByAI===!0||E.ReviewedByAI===!0||E.reviewedByAI||E.ReviewedByAI)&&v(!0)},[i]),!i||i.length===0)return a.jsx("div",{className:"text-sm text-gray-500 py-2",children:"No test results available"});const h=i.filter(g=>g.reviewedByAI===!0||g.ReviewedByAI===!0||g.reviewedByAI||g.ReviewedByAI);i.filter(g=>g.isConfirmed===!0||g.IsConfirmed===!0||g.isConfirmed||g.IsConfirmed);const w=h.filter(g=>!(g.isConfirmed===!0||g.IsConfirmed===!0||g.isConfirmed||g.IsConfirmed)),C=w.length>0,M=async()=>{let g=null;try{const p=localStorage.getItem("accessToken");if(p){const D=p.split(".")[1];if(D){const z=D.replace(/-/g,"+").replace(/_/g,"/"),K=decodeURIComponent(atob(z).split("").map($=>"%"+("00"+$.charCodeAt(0).toString(16)).slice(-2)).join("")),J=JSON.parse(K);g=J?.userId||J?.UserId||J?.uid||J?.nameid||J?.sub||J?.["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]||null}}}catch(p){console.warn("Could not decode JWT token:",p)}if(!g)try{const p=localStorage.getItem("user");if(p){const D=JSON.parse(p);g=D?.userId||D?.id||D?.UserId||D?.ID||null}}catch(p){console.warn("Could not parse user from localStorage:",p)}if(!g){alert("User information not found. Please login again.");return}const E=Number(g);if(!E||Number.isNaN(E)||E<=0){console.error("Invalid userId:",g,"numericUserId:",E),alert("Invalid user ID. Please login again.");return}console.log("Confirming AI review results:",{testOrderId:c,userId:E,aiReviewedResultsCount:h.length,pendingConfirmationCount:w.length});try{f(new Set(h.map(D=>D.testResultId)));const p=await K0(c,E);console.log("Confirm AI review results response:",p),p.confirmedResults&&Array.isArray(p.confirmedResults),u&&u()}catch(p){console.error("Error confirming AI review results:",p),console.error("Error details:",{status:p.response?.status,message:p.response?.data?.message,error:p.response?.data?.error,innerException:p.response?.data?.innerException,data:p.response?.data});let z=p.response?.data?.message||p.response?.data?.error||"Failed to confirm AI review results";p.response?.data?.innerException&&(z+=`
Details: ${p.response.data.innerException}`),alert(z)}finally{f(new Set)}};return a.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>v(!b),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["Test Results (",i.length,")"]}),h.length>0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:[a.jsx(ns,{className:"w-3 h-3"}),h.length," AI Reviewed"]}),w.length>0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[w.length," Pending Confirmation"]})]}),b?a.jsx($s,{className:"w-5 h-5 text-gray-400"}):a.jsx(Ps,{className:"w-5 h-5 text-gray-400"})]}),b&&a.jsxs("div",{className:"divide-y divide-gray-200",children:[i.map((g,E)=>{const p=g.reviewedByAI===!0||g.ReviewedByAI===!0||g.reviewedByAI||g.ReviewedByAI,D=g.isConfirmed===!0||g.IsConfirmed===!0||g.isConfirmed||g.IsConfirmed;d.has(g.testResultId||g.TestResultId);const z=g.testResultId||g.TestResultId||`result-${E}`,K=g.aiReviewedDate||g.AiReviewedDate,J=g.confirmedDate||g.ConfirmedDate;return a.jsx("div",{className:`p-4 border-l-4 transition-all ${p?D?"bg-green-50 border-green-500":"bg-purple-50 border-purple-500":"bg-white border-gray-200"}`,children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:g.parameter||g.Parameter||g.testCode||g.TestCode||"Unknown Parameter"}),p&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800 animate-pulse",children:[a.jsx(ns,{className:"w-3 h-3"}),"AI Reviewed"]}),D&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[a.jsx(Ar,{className:"w-3 h-3"}),"Confirmed"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Value: "}),a.jsx("span",{className:"font-medium text-gray-900",children:g.valueNumeric!==null&&g.valueNumeric!==void 0||g.ValueNumeric!==null&&g.ValueNumeric!==void 0?g.valueNumeric??g.ValueNumeric:g.valueText||g.ValueText||"N/A"})]}),(g.unit||g.Unit)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Unit: "}),a.jsx("span",{className:"font-medium text-gray-900",children:g.unit||g.Unit})]}),(g.referenceRange||g.ReferenceRange)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Reference: "}),a.jsx("span",{className:"font-medium text-gray-900",children:g.referenceRange||g.ReferenceRange})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status: "}),a.jsx("span",{className:`font-semibold ${(g.status||g.Status||g.resultStatus||g.ResultStatus)==="Normal"?"text-green-600":(g.status||g.Status||g.resultStatus||g.ResultStatus)==="High"||(g.status||g.Status||g.resultStatus||g.ResultStatus)==="Low"?"text-red-600":"text-gray-600"}`,children:g.status||g.Status||g.resultStatus||g.ResultStatus||"Pending"})]}),g.performedBy!==null&&g.performedBy!==void 0||g.PerformedBy!==null&&g.PerformedBy!==void 0?a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Performed By: "}),a.jsx("span",{className:"font-medium text-gray-900",children:g.performedBy??g.PerformedBy})]}):null]}),p&&a.jsxs("div",{className:"mt-3 p-2 bg-purple-100 rounded border border-purple-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsx(ns,{className:"w-3 h-3 text-purple-600"}),a.jsx("span",{className:"font-semibold text-purple-900",children:"AI Review:"}),K?a.jsx("span",{className:"text-purple-700",children:new Date(K).toLocaleString()}):a.jsx("span",{className:"text-purple-700",children:"Completed"})]}),!D&&a.jsx("div",{className:"mt-1 text-xs text-purple-600 italic",children:"Awaiting confirmation"})]}),D&&J&&a.jsxs("div",{className:"mt-2 text-xs text-green-600 flex items-center gap-1",children:[a.jsx(Ar,{className:"w-3 h-3"}),a.jsxs("span",{children:["Confirmed: ",new Date(J).toLocaleString()]})]})]})})},z)}),C&&a.jsx("div",{className:"p-4 bg-yellow-50 border-t border-yellow-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-semibold text-yellow-900",children:[w.length," test result(s) pending confirmation"]}),a.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please review and confirm all AI-reviewed results"})]}),a.jsx("button",{onClick:M,disabled:d.size>0,className:"flex items-center gap-2 px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Confirm All AI-Reviewed Results",children:d.size>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Confirming..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Confirm All (",w.length,")"]})})]})})]})]})}function yp({testOrderId:c,isOpen:i,onClose:u,onUpdate:d}){const[f,b]=j.useState(null),[v,h]=j.useState([]),[w,C]=j.useState(!0),[M,g]=j.useState(!1),[E,p]=j.useState(!1),[D,z]=j.useState(!1),[K,J]=j.useState(!1),[$,P]=j.useState([]),{showToast:H}=Mr();j.useEffect(()=>{i&&c?(console.log("Modal opened with testOrderId:",c),ee()):i&&!c&&console.warn("Modal opened but testOrderId is missing")},[i,c]);const ee=async()=>{if(!c){console.error("testOrderId is missing");return}try{C(!0),console.log("Fetching test order detail for:",c);let k=null,T=c;try{k=await ao(c),console.log("Test order response:",k)}catch(ie){console.warn("Failed to fetch via /TestOrder/{id}, trying detail endpoint:",ie);try{k=(await fe.get(`/TestOrder/detail/${c}`)).data,console.log("Test order detail response:",k)}catch(x){throw console.error("Both endpoints failed:",x),ie}}if(!k)throw new Error("No data returned from API");T=k.testOrderId||k.TestOrderId||c;const W={testOrderId:T,status:k.status||k.Status||"Unknown",testType:k.testType||k.TestType||k.servicePackageName||"N/A",createdAt:k.createdAt||k.CreatedAt||k.createdDate,runDate:k.runDate||k.RunDate,patientName:k.patientName||k.PatientName||k.fullName||"N/A",identifyNumber:k.identifyNumber||k.IdentifyNumber,priority:k.priority||k.Priority,note:k.note||k.Note};b(W);let I=!1;if(k.testResults&&Array.isArray(k.testResults))h(k.testResults),I=!0;else if(k.TestResults&&Array.isArray(k.TestResults)){const ie=k.TestResults.map(x=>({testResultId:x.testResultId||x.TestResultId,testCode:x.testCode||x.TestCode||"",parameter:x.parameter||x.Parameter||"",valueNumeric:x.valueNumeric!==void 0?x.valueNumeric:x.ValueNumeric,valueText:x.valueText!==void 0?x.valueText:x.ValueText,unit:x.unit||x.Unit||"",referenceRange:x.referenceRange||x.ReferenceRange||"",status:x.status||x.Status||"",instrument:x.instrument||x.Instrument||"",resultStatus:x.resultStatus||x.ResultStatus||"",performedBy:x.performedBy!==void 0?x.performedBy:x.PerformedBy,performedDate:x.performedDate||x.PerformedDate,reviewedBy:x.reviewedBy!==void 0?x.reviewedBy:x.ReviewedBy,reviewedDate:x.reviewedDate||x.ReviewedDate,reviewedByAI:x.reviewedByAI!==void 0?x.reviewedByAI:x.ReviewedByAI!==void 0?x.ReviewedByAI:!1,aiReviewedDate:x.aiReviewedDate||x.AiReviewedDate,isConfirmed:x.isConfirmed!==void 0?x.isConfirmed:x.IsConfirmed!==void 0?x.IsConfirmed:!1,confirmedByUserId:x.confirmedByUserId!==void 0?x.confirmedByUserId:x.ConfirmedByUserId,confirmedDate:x.confirmedDate||x.ConfirmedDate}));h(ie),I=!0}if(!I)try{let ie=await Zs(T);if(!ie||ie.length===0){console.log("No test results found, attempting to process from simulator...");try{await fp(T),console.log("Successfully processed from simulator, fetching test results again..."),await new Promise(x=>setTimeout(x,1e3)),ie=await Zs(T),console.log("Test results after processing:",ie)}catch(x){console.warn("Could not process from simulator:",x)}}h(ie||[])}catch(ie){console.warn("Could not fetch test results:",ie),h([])}const ge=await hp(T);g(ge?.aiReviewEnabled??!1)}catch(k){console.error("Error fetching test order detail:",k);const T=k.response?.data?.message||k.message||"Failed to load test order details";H(T,"error"),b({testOrderId:c,status:"Unknown",testType:"N/A",patientName:"N/A"}),h([]),g(!1)}finally{C(!1)}},_=async()=>{const k=f?.testOrderId||c;if(!k){H("Test order ID not found","error");return}try{z(!0);const T=!M;console.log("Toggling AI review:",{testOrderId:k,newValue:T,testOrderIdFromProp:c,testOrderIdFromState:f?.testOrderId}),await xp(k,T),g(T),H(`AI Review ${T?"enabled":"disabled"} successfully`,"success")}catch(T){console.error("Error toggling AI review:",T),console.error("Error details:",{status:T.response?.status,message:T.response?.data?.message,data:T.response?.data,testOrderId:k});const W=T.response?.data?.message||T.response?.data?.error||"Cannot enable/disable AI Review";T.response?.status===404?H("Test order not found. The order may have been deleted. Please refresh the page.","error"):H(W,"error")}finally{z(!1)}},Z=async()=>{if(!M){H("Please enable AI Review first","error");return}const k=f?.testOrderId||c;if(!k){H("Test order ID not found","error");return}try{p(!0);const T=await pp(k);console.log("AI Review trigger response:",T),f&&b({...f,status:T.status||"Reviewed By AI"});let W=null;try{W=await Zs(k),W&&Array.isArray(W)&&(h(W),console.log("Refreshed test results after AI review:",W))}catch(I){if(console.warn("Could not refresh test results after AI review:",I),T.aiReviewedResults&&Array.isArray(T.aiReviewedResults)&&T.aiReviewedResults.length>0){const ge=v.map(ie=>{const x=T.aiReviewedResults.find(F=>(F.testResultId||F.TestResultId)===ie.testResultId);return x?{...ie,resultStatus:x.resultStatus||x.ResultStatus||ie.resultStatus,reviewedByAI:x.reviewedByAI!==void 0?x.reviewedByAI:x.ReviewedByAI!==void 0?x.ReviewedByAI:!0,aiReviewedDate:x.aiReviewedDate||x.AiReviewedDate||new Date().toISOString()}:ie});h(ge)}}if(!W&&T.aiReviewedResults&&Array.isArray(T.aiReviewedResults)&&T.aiReviewedResults.length>0){const I=T.aiReviewedResults.map(x=>{const F=x.testResultId||x.TestResultId,y=v.find(S=>S.testResultId===F);return y?{...y,resultStatus:x.resultStatus||x.ResultStatus||y.resultStatus,reviewedByAI:x.reviewedByAI!==void 0?x.reviewedByAI:x.ReviewedByAI!==void 0?x.ReviewedByAI:!0,aiReviewedDate:x.aiReviewedDate||x.AiReviewedDate||new Date().toISOString()}:{testResultId:F,testCode:x.testCode||x.TestCode,parameter:x.parameter||x.Parameter,valueNumeric:x.valueNumeric!==void 0?x.valueNumeric:x.ValueNumeric,valueText:x.valueText||x.ValueText,unit:x.unit||x.Unit,referenceRange:x.referenceRange||x.ReferenceRange,instrument:x.instrument||x.Instrument,performedDate:x.performedDate||x.PerformedDate,resultStatus:x.resultStatus||x.ResultStatus,reviewedByAI:x.reviewedByAI!==void 0?x.reviewedByAI:x.ReviewedByAI!==void 0?x.ReviewedByAI:!0,aiReviewedDate:x.aiReviewedDate||x.AiReviewedDate||new Date().toISOString(),isConfirmed:!1}}),ge=new Set(I.map(x=>x.testResultId)),ie=v.filter(x=>!ge.has(x.testResultId));h([...I,...ie])}try{const I=await ao(k);I&&b(ge=>({...ge,testOrderId:I.testOrderId||I.TestOrderId||k,status:I.status||I.Status||T.status||"Reviewed By AI",testType:I.testType||I.TestType||ge?.testType,createdAt:I.createdAt||I.CreatedAt||ge?.createdAt,runDate:I.runDate||I.RunDate||ge?.runDate,patientName:I.patientName||I.PatientName||ge?.patientName}))}catch(I){console.warn("Could not refresh test order detail after AI review:",I),f&&T.status&&b({...f,status:T.status})}T.aiReviewedResults&&Array.isArray(T.aiReviewedResults)&&(P(T.aiReviewedResults),console.log("AI Reviewed Results stored:",T.aiReviewedResults)),H("AI Review completed successfully","success"),d&&d(),setTimeout(()=>{console.log("Test results after AI review:",v)},100)}catch(T){console.error("Error triggering AI review:",T),console.error("Error details:",{status:T.response?.status,message:T.response?.data?.message,data:T.response?.data});const W=T.response?.data?.message||T.response?.data?.error||"Cannot perform AI Review";H(W,"error")}finally{p(!1)}},de=()=>{try{const k=localStorage.getItem("accessToken");if(k){const T=k.split(".")[1];if(T){const W=T.replace(/-/g,"+").replace(/_/g,"/"),I=decodeURIComponent(atob(W).split("").map(x=>"%"+("00"+x.charCodeAt(0).toString(16)).slice(-2)).join("")),ge=JSON.parse(I),ie=ge?.userId||ge?.UserId||ge?.uid||ge?.nameid||ge?.sub||ge?.["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]||null;if(ie){const x=Number(ie);if(!Number.isNaN(x)&&x>0)return x}}}}catch(k){console.warn("Could not decode JWT token:",k)}try{const k=localStorage.getItem("user");if(k){const T=JSON.parse(k),W=T?.userId||T?.id||T?.UserId||T?.ID||null;if(W){const I=Number(W);if(!Number.isNaN(I)&&I>0)return I}}}catch(k){console.warn("Could not parse user from localStorage:",k)}return null},pe=async()=>{const k=f?.testOrderId||c;if(!k){H("Test order ID not found","error");return}const T=de();if(console.log("getUserIdFromToken result:",{userId:T,type:typeof T}),!T){console.error("userId is missing or invalid:",T),H("User information not found. Please login again.","error");return}const W=Number(T);if(Number.isNaN(W)||W<=0||!Number.isInteger(W)){console.error("Invalid userId format:",{userId:T,numericUserId:W,type:typeof T}),H(`Invalid user ID: ${T}. Please login again.`,"error");return}try{J(!0),console.log("Confirming AI review results:",{testOrderId:k,userId:W,originalUserId:T,userIdType:typeof T});const I=await K0(k,W);console.log("Confirm AI review results response:",I);const ge=I.status||I.Status||f?.status;if(console.log("Updating test order status to:",ge),f&&b({...f,status:ge}),I.confirmedResults&&Array.isArray(I.confirmedResults)&&I.confirmedResults.length>0){const ie=v.map(x=>{const F=I.confirmedResults.find(y=>(y.testResultId||y.TestResultId)===x.testResultId);return F?{...x,isConfirmed:F.isConfirmed!==void 0?F.isConfirmed:F.IsConfirmed!==void 0?F.IsConfirmed:!0,confirmedByUserId:F.confirmedByUserId||F.ConfirmedByUserId,confirmedDate:F.confirmedDate||F.ConfirmedDate}:x});h(ie)}P([]),H("AI Review results confirmed successfully","success");try{const ie=await Zs(k);h(ie),console.log("Refreshed test results after confirmation:",ie)}catch(ie){console.warn("Could not refresh test results after confirmation:",ie)}try{await ee(),console.log("Refreshed test order detail after confirmation")}catch(ie){console.warn("Could not refresh test order detail after confirmation:",ie)}d&&d()}catch(I){console.error("Error confirming AI review results:",I),console.error("Error details:",{status:I.response?.status,message:I.response?.data?.message,error:I.response?.data?.error,data:I.response?.data});const ge=I.response?.data?.message||I.response?.data?.error||"Failed to confirm AI review results";H(ge,"error")}finally{J(!1)}};return i?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:u}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white flex items-center justify-between p-6 border-b border-gray-200 z-10",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Test Order Details"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Order ID: ",c?.substring(0,8),"..."]})]}),a.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(tl,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"p-6",children:w?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(qt,{className:"w-8 h-8 animate-spin text-blue-600"})}):f?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status: "}),a.jsx("span",{className:`font-semibold ${f.status==="Reviewed By AI"?"text-purple-600":f.status==="Completed"?"text-green-600":"text-gray-600"}`,children:f.status||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Test Type: "}),a.jsx("span",{className:"font-medium text-gray-900",children:f.testType||"N/A"})]})]})}),a.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Enable AI Review:"}),a.jsx("button",{onClick:_,disabled:w||D,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${M?"bg-green-600":"bg-gray-300"}`,role:"switch","aria-checked":M,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${M?"translate-x-6":"translate-x-1"}`,children:D&&a.jsx(qt,{className:"w-4 h-4 animate-spin text-gray-400"})})})]}),M&&f?.status!=="Reviewed By AI"&&a.jsx("button",{onClick:Z,disabled:E||w,className:"flex items-center gap-2 px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?a.jsxs(a.Fragment,{children:[a.jsx(qt,{className:"w-4 h-4 animate-spin"}),"Reviewing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ns,{className:"w-4 h-4"}),"AI Review"]})}),f?.status==="Reviewed By AI"&&(()=>{const k=v.filter(T=>(T.reviewedByAI===!0||T.ReviewedByAI===!0||T.reviewedByAI||T.ReviewedByAI)&&!(T.isConfirmed===!0||T.IsConfirmed===!0||T.isConfirmed||T.IsConfirmed)).length;return k>0?a.jsx("button",{onClick:pe,disabled:K||w,className:"flex items-center gap-2 px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:K?a.jsxs(a.Fragment,{children:[a.jsx(qt,{className:"w-4 h-4 animate-spin"}),"Confirming..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-4 h-4"}),"Confirm (",k,")"]})}):null})(),f.status==="Reviewed By AI"&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 text-sm font-semibold rounded-full bg-purple-100 text-purple-800",children:[a.jsx(ns,{className:"w-4 h-4"}),"Reviewed By AI"]})]})}),$.length>0&&a.jsxs("div",{className:"border border-purple-200 rounded-lg p-4 bg-purple-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(ns,{className:"w-5 h-5 text-purple-600"}),a.jsxs("h3",{className:"text-lg font-semibold text-purple-900",children:["AI Reviewed Results (",$.length,")"]})]}),a.jsx("div",{className:"space-y-3",children:$.map((k,T)=>{const W=k.testResultId||k.TestResultId||T;return a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"font-semibold text-gray-900",children:k.parameter||k.Parameter||"Unknown"}),a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:[a.jsx(ns,{className:"w-3 h-3"}),"AI Reviewed"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Value: "}),a.jsx("span",{className:"font-medium",children:k.valueNumeric!==null&&k.valueNumeric!==void 0||k.ValueNumeric!==null&&k.ValueNumeric!==void 0?k.valueNumeric??k.ValueNumeric:k.valueText||k.ValueText||"N/A"})]}),(k.unit||k.Unit)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Unit: "}),a.jsx("span",{className:"font-medium",children:k.unit||k.Unit})]}),(k.referenceRange||k.ReferenceRange)&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Reference: "}),a.jsx("span",{className:"font-medium",children:k.referenceRange||k.ReferenceRange})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status: "}),a.jsx("span",{className:"font-semibold text-purple-600",children:k.resultStatus||k.ResultStatus||"Completed"})]})]}),(k.aiReviewedDate||k.AiReviewedDate)&&a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Reviewed: ",new Date(k.aiReviewedDate||k.AiReviewedDate).toLocaleString()]})]},W)})})]}),a.jsx(bp,{testOrderId:c,testResults:v,onConfirm:pe})]}):a.jsx("div",{className:"text-center py-12 text-gray-500",children:"Test order not found"})})]})]})}):null}function vp(){const c=it(),[i,u]=j.useState([]),[d,f]=j.useState(!0),[b,v]=j.useState(null),[h,w]=j.useState(""),[C,M]=j.useState(1),[g,E]=j.useState(10),[p,D]=j.useState(0),[z,K]=j.useState(null),[J,$]=j.useState(!1),{toasts:P,showToast:H,removeToast:ee}=Mr();j.useEffect(()=>{_()},[C,g,h]);const _=async()=>{try{f(!0),v(null);const T=new URLSearchParams({page:C.toString(),pageSize:g.toString()});h.trim()&&T.append("search",h.trim());const W=await fe.get(`/TestOrder/getList?${T.toString()}`);if(W.data){const I=W.data;Array.isArray(I)?(u(I),D(I.length)):I.items&&Array.isArray(I.items)?(u(I.items),D(I.totalCount||I.total||I.items.length)):(u([]),D(0))}else u([]),D(0)}catch(T){console.error("Error fetching test orders:",T),v(T.response?.data?.message||T.message||"Failed to load test orders"),H("Failed to load test orders","error"),u([])}finally{f(!1)}},Z=()=>{c("/test-orders/create")},de=T=>{T.preventDefault(),M(1),_()},pe=T=>{M(T)},k=T=>T==="Reviewed By AI"?"bg-purple-100 text-purple-800":T==="Completed"?"bg-green-100 text-green-800":T==="In Progress"||T==="Processing"?"bg-blue-100 text-blue-800":T==="Pending"||T==="Created"?"bg-yellow-100 text-yellow-800":T==="Cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800";return a.jsxs(Xe,{children:[a.jsx(fo,{toasts:P,removeToast:ee}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Test Orders"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Manage laboratory test orders and view their status"})]}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("form",{onSubmit:de,className:"flex gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:h,onChange:T=>w(T.target.value),placeholder:"Search test orders...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx(io,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Search"})]}),a.jsxs("button",{onClick:Z,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(rs,{className:"w-5 h-5"}),"Create New Order"]})]}),d?a.jsx("div",{className:"text-center py-8",children:"Loading..."}):b?a.jsx("div",{className:"text-center py-8 text-red-600",children:b}):a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Package"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created At"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"No test orders found"})}):i.map(T=>{const W=T.status||"Created";return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.orderCode||T.testOrderId?.substring(0,8)||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.patientName||T.medicalRecord?.patient?.fullName||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.testType||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${k(W)}`,children:W})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.createdAt?new Date(T.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("button",{onClick:()=>{K(T.testOrderId),$(!0)},className:"flex items-center gap-1 text-blue-600 hover:text-blue-900 transition-colors",title:"View Details & Test Results",children:[a.jsx(O0,{className:"w-4 h-4"}),"View Details"]})})]},T.testOrderId||T.id)})})]})}),!d&&i.length>0&&a.jsxs("div",{className:"flex items-center justify-between mt-6",children:[a.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",(C-1)*g+1," to"," ",Math.min(C*g,p)," of ",p," results"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>pe(C-1),disabled:C===1,className:"p-2 border rounded-lg disabled:opacity-50",children:a.jsx(Cr,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>pe(C+1),disabled:C*g>=p,className:"p-2 border rounded-lg disabled:opacity-50",children:a.jsx(B0,{className:"w-5 h-5"})})]})]}),a.jsx(yp,{testOrderId:z,isOpen:J,onClose:()=>{$(!1),K(null)},onUpdate:()=>{_()}})]})]})}function Np(){const c=it(),{toasts:i,showToast:u,removeToast:d}=Mr(),f=async b=>{try{await uo(b),u("Test order created successfully","success"),c("/test-orders")}catch(v){console.error("Error creating test order:",v);const h=v.response?.data?.message||v.message||"Failed to create test order";throw u(h,"error"),v}};return a.jsxs(Xe,{children:[a.jsx(fo,{toasts:i,removeToast:d}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("button",{onClick:()=>c("/test-orders"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(_h,{className:"w-5 h-5"}),"Back to Test Orders"]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Create New Test Order"}),a.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Create a new laboratory test order for a patient"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow",children:a.jsx(X0,{isOpen:!0,mode:"create",onClose:()=>c("/test-orders"),onSubmit:f})})]})})]})}const w0=c=>{if(!c)return"N/A";const i=new Date(c);return Number.isNaN(i.getTime())?"N/A":i.toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})},wr=c=>{if(!c)return"N/A";const i=new Date(c);return Number.isNaN(i.getTime())?"N/A":i.toLocaleString("en-US",{month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},jp=c=>Array.isArray(c)?c.map(i=>({...i,patientId:i.patientId||i.PatientId,patientName:i.patientName||i.PatientName||"Unknown patient",dateOfBirth:!i.dateOfBirth||i.dateOfBirth==="0001-01-01"?null:i.dateOfBirth,age:typeof i.age=="number"&&i.age>=0?i.age:null,gender:i.gender?.toLowerCase()==="female"?"Female":"Male",email:i.email||"N/A",phoneNumber:i.phoneNumber||"N/A",address:i.address||"N/A",createdBy:i.createdBy||"System",testOrders:Array.isArray(i.testOrders)?i.testOrders:[]})):[];function wp(){const[c,i]=j.useState([]),[u,d]=j.useState(!0),[f,b]=j.useState(null),[v,h]=j.useState(""),[w,C]=j.useState(new Set),[M,g]=j.useState(new Set),[E,p]=j.useState({}),[D,z]=j.useState("card"),[K,J]=j.useState({}),[$,P]=j.useState({}),[H,ee]=j.useState(new Set),[_,Z]=j.useState(new Set);j.useEffect(()=>{de()},[]);const de=async()=>{try{d(!0),b(null);const S=await I0();i(jp(S))}catch(S){console.error("Error fetching medical records:",S),b(S.response?.data?.message||S.message||"Failed to load medical records. Please try again."),i([])}finally{d(!1)}},pe=j.useMemo(()=>{if(!v.trim())return c;const S=v.trim().toLowerCase();return c.filter(q=>[q.patientName,q.email,q.phoneNumber,q.address,q.createdBy,String(q.medicalRecordId)].filter(Boolean).some(Q=>Q.toLowerCase().includes(S)))},[c,v]),k=j.useMemo(()=>{const S=c.length,q=new Set(c.map(se=>se.patientName)).size,Q=new Date,ne=c.filter(se=>{const ce=new Date(se.createdAt);return!Number.isNaN(ce.getTime())&&ce.getUTCFullYear()===Q.getUTCFullYear()&&ce.getUTCMonth()===Q.getUTCMonth()&&ce.getUTCDate()===Q.getUTCDate()}).length;return{totalRecords:S,uniquePatients:q,createdToday:ne}},[c]),T=S=>{C(q=>{const Q=new Set(q);return Q.has(S)?Q.delete(S):Q.add(S),Q})},W=(S,q)=>{p(Q=>{const ne={...Q};ne[S]||(ne[S]=new Set);const se=new Set(ne[S]);return se.has(q)?se.delete(q):se.add(q),ne[S]=se,ne})},I=(S,q)=>{const Q=q.map(ce=>ce.testOrderId||ce.TestOrderId),ne=E[S]||new Set,se=Q.length>0&&Q.every(ce=>ne.has(ce));p(ce=>{const Ne={...ce};return se?Ne[S]=new Set:Ne[S]=new Set(Q),Ne})},ge=async(S,q,Q)=>{try{J(me=>({...me,[S]:!0}));const ne=c.find(me=>me.medicalRecordId===S),se=q||ne?.patientId;if(!se){alert("Patient ID not available. Cannot export test orders.");return}const ce=E[S]&&E[S].size>0?Array.from(E[S]):null,Ne=(Q||"Patient").replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g,"-"),X=ce&&ce.length>0?`Test Orders-${Ne}-${ce.length} orders-${new Date().toISOString().split("T")[0]}.xlsx`:`Test Orders-${Ne}-${new Date().toISOString().split("T")[0]}.xlsx`;await mo(se,ce,X),p(me=>{const te={...me};return te[S]=new Set,te})}catch(ne){console.error("Export failed:",ne);const se=ne.response?.data?.message||ne.message||"Failed to start export. Please try again.";alert(se)}finally{J(ne=>({...ne,[S]:!1}))}},ie=async S=>{g(q=>{const Q=new Set(q);return Q.has(S)?Q.delete(S):(Q.add(S),$[S]||x(S)),Q})},x=async S=>{try{ee(Q=>new Set(Q).add(S));const q=await Zs(S);P(Q=>({...Q,[S]:Array.isArray(q)?q:[]}))}catch(q){console.warn("Test results not available via API:",q),P(Q=>({...Q,[S]:[]}))}finally{ee(q=>{const Q=new Set(q);return Q.delete(S),Q})}},F=async(S,q,Q)=>{Q.stopPropagation();try{Z(X=>new Set(X).add(S));const ne=q.replace(/[^a-zA-Z0-9\s]/g,"").replace(/\s+/g," ").trim().replace(/\s+/g,"-"),se=new Date,ce=`${String(se.getDate()).padStart(2,"0")}-${String(se.getMonth()+1).padStart(2,"0")}-${se.getFullYear()}`,Ne=`Detail-${ne}-${ce}`;await Z0(S,Ne)}catch(ne){console.error("Error exporting PDF:",ne);const se=ne.message||"Failed to export PDF. Please try again.";alert(se)}finally{Z(ne=>{const se=new Set(ne);return se.delete(S),se})}},y=S=>({Completed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Cancelled:"bg-red-100 text-red-800",Created:"bg-blue-100 text-blue-800"})[S]||"bg-gray-100 text-gray-800";return a.jsx(Xe,{children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex flex-col gap-6",children:[a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(Tr,{className:"w-8 h-8 text-blue-600"}),"Medical Records"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage all patient medical records in the laboratory system."})]}),a.jsxs("button",{onClick:de,disabled:u,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[a.jsx(qh,{className:`w-4 h-4 ${u?"animate-spin":""}`}),"Refresh"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-blue-100 text-blue-700 w-10 h-10 rounded-lg flex items-center justify-center",children:a.jsx(Tr,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Records"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:k.totalRecords})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-emerald-100 text-emerald-700 w-10 h-10 rounded-lg flex items-center justify-center",children:a.jsx(to,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Unique Patients"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:k.uniquePatients})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-purple-100 text-purple-700 w-10 h-10 rounded-lg flex items-center justify-center",children:a.jsx(Hh,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Created Today"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:k.createdToday})]})]})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-5",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:v,onChange:S=>h(S.target.value),placeholder:"Search by patient name, contact, creator, or record ID",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",a.jsx("span",{className:"font-medium text-gray-900",children:pe.length})," of"," ",a.jsx("span",{className:"font-medium text-gray-900",children:c.length})," records"]})]})}),f&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-start gap-3",children:[a.jsx("span",{className:"font-medium",children:"Error:"}),a.jsx("span",{children:f})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:u?a.jsx("div",{className:"flex justify-center items-center py-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading medical records..."})]})}):pe.length===0?a.jsxs("div",{className:"text-center py-16 px-6",children:[a.jsx("p",{className:"text-gray-700 text-lg font-medium mb-1",children:"No medical records found."}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Try adjusting your search keywords or refresh the list to load the latest data."})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Record ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Patient"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Address"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Created By"}),a.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Test Orders"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pe.map(S=>a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:["MR-",String(S.medicalRecordId).padStart(4,"0")]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:S.patientName}),a.jsxs("p",{className:"text-xs text-gray-500",children:["DOB: ",S.dateOfBirth?w0(S.dateOfBirth):"N/A",S.age?`  ${S.age} yrs`:""]}),a.jsxs("p",{className:"text-xs text-gray-500 capitalize",children:["Gender: ",S.gender]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{children:S.phoneNumber}),a.jsx("span",{className:"text-xs text-blue-600 break-all",children:S.email})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs",children:a.jsx("span",{className:"line-clamp-2",title:S.address,children:S.address})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{children:wr(S.createdAt)}),S.updatedAt&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Updated ",wr(S.updatedAt)]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S.createdBy}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center px-3 py-1 rounded-full bg-blue-100 text-blue-700 text-xs font-semibold",children:S.testOrders.length}),S.testOrders.length>0&&a.jsx("button",{onClick:()=>T(S.medicalRecordId),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors",title:w.has(S.medicalRecordId)?"Hide test orders":"Show test orders",children:w.has(S.medicalRecordId)?a.jsx($s,{className:"w-4 h-4"}):a.jsx(Ps,{className:"w-4 h-4"})})]})})]},S.medicalRecordId),w.has(S.medicalRecordId)&&S.testOrders.length>0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"px-6 py-4 bg-gray-50",children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(is,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Orders"}),a.jsxs("p",{className:"text-sm text-gray-500",children:[S.testOrders.length," order(s) found",E[S.medicalRecordId]?.size>0&&`  ${E[S.medicalRecordId].size} selected`]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:S.testOrders.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1 border border-gray-300 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>z("card"),className:`p-2 rounded transition-colors ${D==="card"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,title:"Card View",children:a.jsx(k0,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>z("list"),className:`p-2 rounded transition-colors ${D==="list"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,title:"List View",children:a.jsx(L0,{className:"w-4 h-4"})})]}),a.jsxs("button",{onClick:()=>ge(S.medicalRecordId,S.patientId,S.patientName),disabled:K[S.medicalRecordId],className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Export to Excel",children:[a.jsx(co,{className:"w-5 h-5"}),K[S.medicalRecordId]?"Starting...":E[S.medicalRecordId]?.size>0?`Export ${E[S.medicalRecordId].size} Selected`:"Export All Excel"]})]})})]}),S.testOrders.length>0&&D==="list"&&a.jsx("div",{className:"mb-4 flex items-center gap-2 pb-3 border-b",children:a.jsxs("button",{onClick:()=>I(S.medicalRecordId,S.testOrders),className:"flex items-center gap-2 text-sm text-gray-700 hover:text-gray-900",children:[E[S.medicalRecordId]?.size===S.testOrders.length?a.jsx(Ks,{className:"w-5 h-5 text-blue-600"}):a.jsx(Fs,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{children:"Select All"})]})}),D==="card"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.testOrders.map(q=>{const Q=q.testOrderId||q.TestOrderId,ne=q.orderCode||q.OrderCode,se=q.status||q.Status,ce=E[S.medicalRecordId]?.has(Q),Ne=M.has(Q),X=$[Q]||[],me=X.length>0||q.testResults||q.TestResults,te=H.has(Q),Be=_.has(Q);return a.jsxs("div",{className:`border-2 rounded-lg transition-all ${ce?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 bg-white"}`,children:[a.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>W(S.medicalRecordId,Q),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[ce?a.jsx(Ks,{className:"w-5 h-5 text-blue-600"}):a.jsx(Fs,{className:"w-5 h-5 text-gray-400"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:ne||"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 font-mono truncate max-w-[150px]",children:Q})]})]}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(se)}`,children:se||"N/A"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Priority:"}),a.jsx("span",{className:"font-medium",children:q.priority||q.Priority||"N/A"})]}),a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-500",children:"Created:"}),a.jsx("span",{className:"font-medium",children:w0(q.createdAt||q.CreatedAt)})]}),me&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[a.jsx(qa,{className:"w-3 h-3"}),a.jsx("span",{children:X.length>0?`${X.length} Results`:"Has Results"})]})]})]}),me&&a.jsxs("div",{className:"px-4 pb-3 flex items-center gap-2 border-t border-gray-200",children:[a.jsx("button",{onClick:re=>{re.stopPropagation(),ie(Q)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:Ne?a.jsxs(a.Fragment,{children:[a.jsx($s,{className:"w-4 h-4"}),"Hide Results"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-4 h-4"}),"View Results"]})}),a.jsxs("button",{onClick:re=>F(Q,S.patientName,re),disabled:Be,className:"flex items-center justify-center gap-2 px-3 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Export PDF",children:[Be?a.jsx(qt,{className:"w-4 h-4 animate-spin"}):a.jsx(Rr,{className:"w-4 h-4"}),"PDF"]})]}),Ne&&me&&a.jsx("div",{className:"px-4 pb-4 border-t border-gray-200",children:te?a.jsxs("div",{className:"py-4 flex items-center justify-center",children:[a.jsx(qt,{className:"w-5 h-5 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"Loading results..."})]}):X.length>0?a.jsxs("div",{className:"mt-3 space-y-2 max-h-96 overflow-y-auto",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Test Results:"}),a.jsx("div",{className:"space-y-2",children:X.map((re,ut)=>a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-100",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Parameter:"}),a.jsx("p",{className:"font-semibold text-gray-900",children:re.parameter||re.Parameter||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Value:"}),a.jsx("p",{className:"font-bold text-blue-700",children:re.valueText||re.ValueText||(re.valueNumeric!==void 0&&re.valueNumeric!==null?re.valueNumeric.toFixed(2):re.ValueNumeric!==void 0&&re.ValueNumeric!==null?re.ValueNumeric.toFixed(2):"N/A")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Unit:"}),a.jsx("p",{className:"text-gray-900",children:re.unit||re.Unit||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Status:"}),a.jsx("p",{className:`font-medium ${(re.resultStatus||re.ResultStatus)?.toLowerCase()==="completed"?"text-green-600":"text-gray-600"}`,children:re.resultStatus||re.ResultStatus||"N/A"})]}),(re.referenceRange||re.ReferenceRange)&&a.jsxs("div",{className:"col-span-2",children:[a.jsx("span",{className:"text-gray-500",children:"Reference Range:"}),a.jsx("p",{className:"text-gray-900",children:re.referenceRange||re.ReferenceRange})]})]})},re.testResultId||ut))})]}):a.jsxs("div",{className:"py-4 text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Detailed test results are not available for viewing online."}),a.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Please export PDF to view complete test results."})]})})]},Q)})}):a.jsx("div",{className:"space-y-2",children:S.testOrders.map(q=>{const Q=q.testOrderId||q.TestOrderId,ne=q.orderCode||q.OrderCode,se=q.status||q.Status,ce=E[S.medicalRecordId]?.has(Q),Ne=M.has(Q),X=$[Q]||[],me=X.length>0||q.testResults||q.TestResults,te=H.has(Q),Be=_.has(Q);return a.jsxs("div",{className:`border-2 rounded-lg transition-all ${ce?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"}`,children:[a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>W(S.medicalRecordId,Q),className:"flex-shrink-0",children:ce?a.jsx(Ks,{className:"w-5 h-5 text-blue-600"}):a.jsx(Fs,{className:"w-5 h-5 text-gray-400"})}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Order Code"}),a.jsx("p",{className:"text-sm font-semibold",children:ne||"N/A"}),a.jsx("p",{className:"text-xs text-gray-400 font-mono",children:Q})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Status"}),a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(se)}`,children:se||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Priority"}),a.jsx("p",{className:"text-sm font-medium",children:q.priority||q.Priority||"N/A"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Created Date"}),a.jsx("p",{className:"text-sm font-medium",children:wr(q.createdAt||q.CreatedAt)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Run Date"}),a.jsx("p",{className:"text-sm font-medium",children:(q.runDate||q.RunDate)&&q.runDate!=="0001-01-01T00:00:00"&&q.RunDate!=="0001-01-01T00:00:00"?wr(q.runDate||q.RunDate):"Not run yet"})]})]})]}),me&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:me&&a.jsxs("div",{className:"bg-green-50 p-2 rounded text-xs flex items-center gap-1",children:[a.jsx(qa,{className:"w-3 h-3 text-green-600"}),a.jsx("span",{className:"text-gray-500",children:"Results: "}),a.jsx("span",{className:"text-gray-900",children:X.length>0?`${X.length} test results`:"Available"})]})}),me&&a.jsxs("div",{className:"flex items-center gap-2 ml-3",children:[a.jsx("button",{onClick:()=>ie(Q),className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors",children:Ne?a.jsxs(a.Fragment,{children:[a.jsx($s,{className:"w-4 h-4"}),"Hide"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ps,{className:"w-4 h-4"}),"View"]})}),a.jsxs("button",{onClick:re=>F(Q,S.patientName,re),disabled:Be,className:"flex items-center gap-2 px-3 py-2 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Export PDF",children:[Be?a.jsx(qt,{className:"w-4 h-4 animate-spin"}):a.jsx(Rr,{className:"w-4 h-4"}),"PDF"]})]})]})})]}),Ne&&me&&a.jsx("div",{className:"px-4 pb-4 border-t border-gray-200 bg-gray-50",children:te?a.jsxs("div",{className:"py-4 flex items-center justify-center",children:[a.jsx(qt,{className:"w-5 h-5 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-xs text-gray-600",children:"Loading results..."})]}):X.length>0?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"text-sm font-semibold text-gray-700 mb-3",children:["Test Results (",X.length,"):"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-96 overflow-y-auto",children:X.map((re,ut)=>a.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-100 shadow-sm",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Parameter"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:re.parameter||re.Parameter||"N/A"})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${(re.resultStatus||re.ResultStatus)?.toLowerCase()==="completed"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:re.resultStatus||re.ResultStatus||"N/A"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Value"}),a.jsx("p",{className:"text-base font-bold text-blue-700",children:re.valueText||re.ValueText||(re.valueNumeric!==void 0&&re.valueNumeric!==null?re.valueNumeric.toFixed(2):re.ValueNumeric!==void 0&&re.ValueNumeric!==null?re.ValueNumeric.toFixed(2):"N/A")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Unit"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:re.unit||re.Unit||"N/A"})]})]}),(re.referenceRange||re.ReferenceRange)&&a.jsxs("div",{className:"pt-2 border-t border-blue-200",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Reference Range"}),a.jsx("p",{className:"text-xs font-medium text-gray-700",children:re.referenceRange||re.ReferenceRange})]})]})},re.testResultId||ut))})]}):a.jsxs("div",{className:"py-4 text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Detailed test results are not available for viewing online."}),a.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Please export PDF to view complete test results."})]})})]},Q)})})]})})})]}))})]})})})]})})})})}const{Option:Sr}=an;function Sp({filters:c={},onSearch:i,onAgeFilter:u,onClear:d}){return a.jsx("div",{className:"mb-6 p-4 bg-white rounded-lg shadow",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 w-full",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsxs(an,{value:c.filterField||"",onChange:f=>i&&i(c.keyword||"",f),style:{width:120,height:50},placeholder:"Search by",size:"large",className:"h-[40px] ",children:[a.jsx(Sr,{value:"",children:"Search by"}),a.jsx(Sr,{value:"fullName",children:"Full Name"}),a.jsx(Sr,{value:"email",children:"Email"}),a.jsx(Sr,{value:"address",children:"Address"})]}),a.jsx(V0,{value:c.keyword,onSearch:f=>i&&i(f,c.filterField),placeholder:"Search users...",className:"flex-1",inputClassName:"h-12 text-base"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(f0,{placeholder:"Min age",value:c.minAge,onChange:f=>u&&u(f,c.maxAge),min:0,size:"large",style:{width:160,height:50},className:"h-[40px]"}),a.jsx("span",{className:"font-bold",children:"-"}),a.jsx(f0,{placeholder:"Max age",value:c.maxAge,onChange:f=>u&&u(c.minAge,f),min:0,size:"large",style:{width:160,height:50},className:"h-[40px]"}),a.jsx(oo,{onClick:d,size:"large",children:"Clear"})]})]})})}function Ap({users:c,loading:i=!1,onView:u,onDelete:d,onChange:f,genderFilter:b}){const v=Array.isArray(c)?c:[],h=[{title:"Full Name",dataIndex:"fullName",key:"fullName",sorter:!0,width:220,ellipsis:!0},{title:"Email",dataIndex:"email",key:"email",sorter:!0,width:260,ellipsis:!0},{title:"Phone",dataIndex:"phoneNumber",key:"phoneNumber",width:140,ellipsis:!0},{title:"Identify Number",dataIndex:"identifyNumber",key:"identifyNumber",render:w=>a.jsx("span",{className:"font-mono text-xs",children:w}),width:140,ellipsis:!0},{title:"Gender",dataIndex:"gender",key:"gender",width:100,filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],filteredValue:Array.isArray(b)?b:b?[b]:[]},{title:"Age",dataIndex:"age",key:"age",sorter:!0,width:90},{title:"Address",dataIndex:"address",key:"address",width:260,ellipsis:!0},{title:"Date of Birth",dataIndex:"dateOfBirth",key:"dateOfBirth",render:w=>w?new Date(w).toLocaleDateString("en-GB"):"-",width:140},{title:"Actions",key:"actions",width:130,render:(w,C)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(oo,{size:"small",type:"primary",onClick:()=>u&&u(C),children:"View"}),a.jsx("button",{type:"button","aria-label":"Delete user",className:"p-1.5 rounded hover:bg-red-50",onClick:()=>d&&d(C),children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 text-red-600",children:a.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478V4.25A2.25 2.25 0 0014.25 2h-4.5A2.25 2.25 0 007.5 4.25v.228A2.251 2.251 0 006.25 6.5h11.5a2.251 2.251 0 00-1.25-2.022zM18.75 7.5H5.25l.9 12.15A2.25 2.25 0 008.394 21h7.212a2.25 2.25 0 002.244-1.35L18.75 7.5zM9.75 10.5a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0v-7.5zm4.5 0a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0v-7.5z",clipRule:"evenodd"})})})]})}];return a.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.jsx(_0,{columns:h,dataSource:v,loading:i,rowKey:w=>w.userId||w.id||w.email,pagination:!1,onChange:f,size:"middle",locale:{emptyText:"No Data"},scroll:{x:1400}})})}const Ep=c=>{try{const u=c.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),d=decodeURIComponent(atob(u).split("").map(function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(d)}catch(i){return console.error("Error decoding JWT:",i),null}};function Tp(){const[c,i]=j.useState([]),[u,d]=j.useState(!1),[f,b]=j.useState(0),{accessToken:v}=Ct(),h=v?Ep(v):null,w=h?.privilege||h?.privileges||h?.Privilege||h?.Privileges||h?.claims?.privilege||h?.claims?.privileges||h?.claims?.Privilege||h?.claims?.Privileges||h?.permissions||h?.Permissions||h?.roles||h?.Roles||[],C=localStorage.getItem("user"),M=C?JSON.parse(C):null,g=M?.privileges||[];let E=w.length>0?w:g;E.length===0&&M&&(E=M?.privileges||M?.Privileges||M?.permissions||M?.Permissions||M?.roles||M?.Roles||[]),console.log("=== JWT DEBUG ==="),console.log("Access token:",v),console.log("Token payload:",h),console.log("Token payload keys:",h?Object.keys(h):"No payload"),console.log("Checking privilege fields:"),console.log("  tokenPayload.privilege:",h?.privilege),console.log("  tokenPayload.privileges:",h?.privileges),console.log("  tokenPayload.Privilege:",h?.Privilege),console.log("  tokenPayload.Privileges:",h?.Privileges),console.log("  tokenPayload.claims:",h?.claims),console.log("  tokenPayload.claims?.privilege:",h?.claims?.privilege),console.log("  tokenPayload.claims?.privileges:",h?.claims?.privileges),console.log("  tokenPayload.claims?.Privilege:",h?.claims?.Privilege),console.log("  tokenPayload.claims?.Privileges:",h?.claims?.Privileges),console.log("  tokenPayload.permissions:",h?.permissions),console.log("  tokenPayload.Permissions:",h?.Permissions),console.log("  tokenPayload.roles:",h?.roles),console.log("  tokenPayload.Roles:",h?.Roles),console.log("JWT privileges:",w),console.log("localStorage privileges:",g),console.log("Final user privileges:",E),console.log("Privileges type:",typeof E),console.log("Privileges length:",E?.length),console.log("================");const[p,D]=j.useState(null),[z,K]=j.useState(null),[J,$]=j.useState(!1),[P,H]=j.useState(!1),[ee,_]=j.useState([]),[Z,de]=j.useState(!1),[pe,k]=j.useState(!1),{privileges:T,loading:W}=zr(),[I,ge]=j.useState(""),[ie,x]=j.useState(""),[F,y]=j.useState([]),[S,q]=j.useState(""),[Q,ne]=j.useState(""),[se,ce]=j.useState(""),[Ne,X]=j.useState(""),[me,te]=j.useState("asc"),[Be,re]=j.useState({}),ut=()=>{const le="VIEW_USER",ae=E.includes(le),he=!1;return console.log("Privilege check:",{userPrivileges:E,requiredPrivilege:le,hasViewPrivilege:ae,forceEnable:he,canView:ae||he}),ae||he},Ht=async le=>{try{$(!0);const ae=await fe.get(`/User/detail?email=${le.email}`);console.log("=== Fetch User Details ==="),console.log("Full response:",ae),console.log("Response data:",ae.data),console.log("Response data keys:",ae.data?Object.keys(ae.data):"No data");let he=[];ae.data&&(he=ae.data.privileges||ae.data.Privileges||ae.data.privilege||ae.data.Privilege||ae.data.permissions||ae.data.Permissions||[]),Array.isArray(he)||(console.warn("Privileges is not an array:",he),he=[]),console.log("Extracted privileges:",he),console.log("Privileges count:",he.length),console.log("Privileges type:",typeof he);const ye={...ae.data,privileges:he};console.log("Final userDetailsData:",ye),console.log("Final privileges array:",ye.privileges),console.log("========================"),K(ye)}catch(ae){console.error("Error fetching user details:",ae),console.error("Error details:",{message:ae.message,response:ae.response?.data,status:ae.response?.status,url:ae.config?.url}),K(null)}finally{$(!1)}},sn=async le=>{if(!ut()){alert("You do not have permission to view user details");return}D(le),H(!0),await Ht(le)},Gt=()=>{H(!1),D(null),K(null),_([]),de(!1)},cs=()=>{if(!T||!z)return[];const le=z.privileges||z.Privileges||z.privilege||z.Privilege||[],ae=Array.isArray(le)?le.map(ye=>typeof ye=="string"?ye:ye?.name||ye?.privilegeName||ye?.Name||String(ye)):[],he=T.filter(ye=>{const we=typeof ye=="string"?ye:ye?.name||ye?.privilegeName||ye?.Name;return we&&!ae.includes(we)});return console.log("=== Get Available Privileges ==="),console.log("All privileges:",T),console.log("User privileges array:",le),console.log("User privilege names:",ae),console.log("Available privileges:",he),console.log("================================"),he},al=async()=>{if(!ee||ee.length===0){alert("Vui lng chn t nht mt privilege  thm");return}if(!p){alert("Khng tm thy thng tin ngi dng");return}try{k(!0);const le=ee.map(we=>{if(typeof we=="number")return we;const ga=parseInt(we,10);if(!isNaN(ga)&&ga.toString()===we)return ga;const Kt=T.find(tt=>typeof tt=="string"?tt===we:tt?.privilegeId&&String(tt.privilegeId)===String(we)||tt?.id&&String(tt.id)===String(we)?!0:(tt?.name||tt?.privilegeName)===we);if(Kt)return Kt?.privilegeId||Kt?.id||null;const ct=parseInt(we,10);return isNaN(ct)?null:ct}).filter(we=>we!=null&&!isNaN(we)&&we>0);if(le.length===0)throw new Error("Khng tm thy privilege ID hp l");const ae=p?.userId||p?.id;if(!ae)throw new Error("Missing userId");const he=p?.email||z?.email;if(!he)throw new Error("Missing email");console.log("Adding privileges:",{userId:ae,email:he,privilegeIds:le,selectedPrivilegesToAdd:ee});const ye=await fe.put("/User/update",{UserId:ae,Email:he,ActionType:"add",PrivilegeIds:le});console.log("API Response:",ye.data),await new Promise(we=>setTimeout(we,1e3)),console.log("Refreshing user details after adding privileges..."),await Ht(p),await new Promise(we=>setTimeout(we,500)),await Ht(p),b(we=>we+1),_([]),de(!1),alert("Thm privilege thnh cng!")}catch(le){console.error("Error adding privileges:",le),alert(le.response?.data?.message||le.message||"Thm privilege tht bi. Vui lng th li.")}finally{k(!1)}},Or=async()=>{if(!p){alert("Khng tm thy thng tin ngi dng");return}if(window.confirm("Bn c chc mun reset cc privilege  thm?")){alert("ang reset cc privilege  thm. Vui lng i...");try{k(!0);const ae=p?.userId||p?.id;if(!ae)throw new Error("Missing userId");const he=p?.email||z?.email;if(!he)throw new Error("Missing email");console.log("Resetting privileges:",{userId:ae,email:he});const ye=await fe.put("/User/update",{UserId:ae,Email:he,ActionType:"reset"});console.log("API Response:",ye.data),await new Promise(we=>setTimeout(we,1e3)),console.log("Refreshing user details after resetting privileges..."),await Ht(p),await new Promise(we=>setTimeout(we,500)),await Ht(p),b(we=>we+1),_([]),de(!1),alert("Reset privilege thnh cng! Cc privilege  c reset v trng thi ban u.")}catch(ae){console.error("Error resetting privileges:",ae),alert(ae.response?.data?.message||"Reset privilege tht bi. Vui lng th li.")}finally{k(!1)}}},ln=le=>{if(le!==""&&le!==null&&le!==void 0){const he=Number(le);if(isNaN(he)||he<0)return"MinAge must be greater than or equal to 0"}return null},sl=le=>{if(le!==""&&le!==null&&le!==void 0){const he=Number(le);if(isNaN(he)||he<0)return"MaxAge must be greater than or equal to 0"}return null},ll=(le,ae)=>{if(le!==""&&le!==null&&le!==void 0&&(ae!==""&&ae!==null&&ae!==void 0)){const we=Number(le),ga=Number(ae);if(!isNaN(we)&&!isNaN(ga)&&we>=ga)return"MinAge must be less than MaxAge"}return null},nl=()=>{const le={},ae=ln(S);ae&&(le.minAge=ae);const he=sl(Q);he&&(le.maxAge=he);const ye=ll(S,Q);return ye&&(le.ageRange=ye),re(le),Object.keys(le).length===0};j.useEffect(()=>{(async()=>{try{if(d(!0),!nl()){d(!1);return}let ae;Array.isArray(F)?F.length===0?ae=void 0:F.length===1?ae=F[0]:ae=F.join(","):ae=F||void 0;const he={Keyword:I,FilterField:ie,Gender:ae,MinAge:S||void 0,MaxAge:Q||void 0,Address:se,SortBy:Ne,SortOrder:me},ye=await fe.get("/User/getListOfUser",{params:he});i(ye.data)}catch(ae){console.error("Error fetching users:",ae)}finally{d(!1)}})()},[I,ie,F,S,Q,se,Ne,me,f]);const Br=(le,ae="")=>{ge(le||""),x(ae||"")},Ur=(le,ae)=>{q(le??""),ne(ae??"")},ot=()=>{ge(""),x(""),y([]),q(""),ne(""),ce(""),X(""),te("asc"),re({})},kr=(le,ae,he)=>{const ye=Array.isArray(he)?he[0]:he;ye&&(ye.field&&X(ye.field||""),ye.order?te(ye.order==="descend"?"desc":"asc"):te("asc")),ae&&Object.prototype.hasOwnProperty.call(ae,"gender")&&(Array.isArray(ae.gender)&&ae.gender.length>0?y(ae.gender):y([]))},nn=async le=>{const ae=le?.fullName||le?.email||"this user";if(window.confirm(`Are you sure you want to delete ${ae}?`))try{d(!0);const ye=le?.userId||le?.id;if(!ye)throw new Error("Missing userId");await fe.delete(`/User/delete/${ye}`),b(we=>we+1)}catch(ye){console.error("Error deleting user:",ye),alert("Failed to delete user. Please try again.")}finally{d(!1)}};return a.jsx(Xe,{children:a.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"})}),a.jsx("div",{className:"px-6 py-4",children:a.jsx(Sp,{filters:{keyword:I,filterField:ie,minAge:S,maxAge:Q},onSearch:Br,onAgeFilter:Ur,onClear:ot})}),Object.keys(Be).length>0&&a.jsx("div",{className:"px-4 pb-2",children:a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Validation Errors:"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:a.jsx("ul",{className:"list-disc list-inside space-y-1",children:Object.values(Be).map((le,ae)=>a.jsx("li",{children:le},ae))})})]})]})})}),a.jsx("div",{className:"flex-1 p-6",children:a.jsx(Ap,{users:c,loading:u,onView:sn,onDelete:nn,onChange:kr,genderFilter:F})}),P&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"User Details"}),a.jsx("p",{className:"text-blue-100",children:p?.fullName})]}),a.jsx("button",{onClick:Gt,className:"text-white hover:text-gray-200 transition-colors",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:J?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading user details..."})]}):z?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Email"}),a.jsx("p",{className:"text-gray-900",children:z.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Phone"}),a.jsx("p",{className:"text-gray-900",children:z.phoneNumber||"-"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Age"}),a.jsx("p",{className:"text-gray-900",children:z.age})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Gender"}),a.jsx("p",{className:"text-gray-900",children:z.gender||"-"})]})]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Role Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Role ID"}),a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:z.roleId})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Role Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:z.roleName})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Role Code"}),a.jsx("p",{className:"text-gray-900",children:z.roleCode||"-"})]})]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Privileges"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>de(!Z),disabled:pe||W,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add"]}),a.jsxs("button",{onClick:Or,disabled:pe,className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Reset"]})]})]}),Z&&a.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-purple-200",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chn privileges  thm (c th chn nhiu):"}),a.jsx("select",{multiple:!0,value:ee,onChange:le=>{const ae=Array.from(le.target.selectedOptions,he=>he.value);_(ae)},className:"w-full min-h-[120px] border border-gray-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:pe||W,children:cs().map((le,ae)=>{const he=typeof le=="string"?le:le?.name||le?.privilegeName||`Privilege ${le?.privilegeId||ae}`;let ye;return typeof le=="object"?(ye=le?.privilegeId||le?.id,ye||(ye=he)):ye=he,a.jsx("option",{value:String(ye),children:he},ae)})}),cs().length===0&&a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Khng cn privilege no  thm"}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:al,disabled:pe||ee.length===0,className:"px-4 py-2 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:pe?"ang thm...":"Xc nhn thm"}),a.jsx("button",{onClick:()=>{de(!1),_([])},disabled:pe,className:"px-4 py-2 text-sm bg-gray-400 text-white rounded-lg hover:bg-gray-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Hy"})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:(()=>{const le=z?.privileges||z?.Privileges||z?.privilege||z?.Privilege||[],ae=Array.isArray(le)?le:[];return console.log("Rendering privileges:",{userDetails:z,privilegesArray:le,normalizedPrivileges:ae,count:ae.length}),ae.length>0?ae.map((he,ye)=>{const we=typeof he=="string"?he:he?.name||he?.privilegeName||he?.Name||String(he);return a.jsx("div",{className:"bg-white border border-purple-200 rounded-lg px-3 py-2 text-sm font-medium text-purple-800 hover:bg-purple-100 transition-colors",title:we,children:we},`${we}-${ye}`)}):a.jsx("p",{className:"text-gray-500 col-span-full",children:"No privileges assigned"})})()}),z&&a.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Total privileges: ",(()=>{const le=z?.privileges||z?.Privileges||z?.privilege||z?.Privilege||[];return Array.isArray(le)?le.length:0})(),!1]})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading User Details"}),a.jsx("p",{className:"text-gray-500",children:"Unable to fetch user information. Please try again."})]})}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:a.jsx("button",{onClick:Gt,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})})}function Tt({children:c,isAllowed:i=null,redirectPath:u="/login",requiredPrivileges:d=[],requireAll:f=!1}){const b=it(),{isAuthenticated:v,initializeAuth:h}=Ct(),w=g=>{try{const p=g.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),D=decodeURIComponent(atob(p).split("").map(z=>"%"+("00"+z.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(D)}catch{return null}};j.useEffect(()=>{h()},[h]);const C=localStorage.getItem("accessToken"),M=localStorage.getItem("refreshToken");if(!C||!M)return a.jsx(R0,{to:u,replace:!0});if(i!==null&&!i)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"You dont have permission to access this page."}),a.jsx("button",{onClick:()=>b(u),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Back"})]})});if(!v)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Authenticating..."})]})});if(Array.isArray(d)&&d.length>0){const g=C?w(C):null;let E=g?.privilege||g?.privileges||g?.Privilege||g?.Privileges||g?.claims?.privilege||g?.claims?.privileges||[];if(typeof E=="string"&&(E=[E]),Array.isArray(E)||(E=[]),!(f?d.every(D=>E.includes(D)):d.some(D=>E.includes(D))))return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"You dont have permission to access this page."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please contact an administrator if you think this is an error."}),a.jsx("button",{onClick:()=>b(u),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Back"})]})})}return c}const Cp=yh([{path:"/",element:a.jsx(R0,{to:"/home",replace:!0})},{path:"/home",element:a.jsx(cx,{})},{path:"/login",element:a.jsx(ox,{})},{path:"/register",element:a.jsx(dx,{})},{path:"/create-user",element:a.jsx(Nx,{})},{path:"/profile",element:a.jsx(jx,{})},{path:"/forgot-password",element:a.jsx(Rx,{})},{path:"/reset-password",element:a.jsx(Dx,{})},{path:"/my-patient",element:a.jsx(Tt,{children:a.jsx(gp,{})})},{path:"/dashboard",element:a.jsx(Tt,{children:a.jsx(Cx,{})})},{path:"/event-logs",element:a.jsx(Tt,{requiredPrivileges:["VIEW_EVENT_LOGS"],children:a.jsx(Bx,{})})},{path:"/role-management/create",element:a.jsx(Tt,{children:a.jsx(N0,{})})},{path:"/role-management/update/:id",element:a.jsx(Tt,{children:a.jsx(Jx,{})}),errorElement:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Update Role Page"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Something went wrong. Please try again."}),a.jsx("button",{onClick:()=>window.location.href="/role-management",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Back to Role Management"})]})})},{path:"/role-management",element:a.jsx(Tt,{requiredPrivileges:["VIEW_ROLE"],children:a.jsx(Qx,{})})},{path:"/role-management/create",element:a.jsx(Tt,{requiredPrivileges:["VIEW_ROLE"],children:a.jsx(N0,{})})},{path:"/users",element:a.jsx(Tt,{requiredPrivileges:["VIEW_USER"],children:a.jsx(Tp,{})})},{path:"/patients",element:a.jsx(Tt,{requiredPrivileges:["VIEW_USER"],children:a.jsx(np,{})})},{path:"/patients/:patientId/medical-records",element:a.jsx(Tt,{children:a.jsx(mp,{})})},{path:"/medical-records",element:a.jsx(Tt,{requiredPrivileges:["VIEW_USER"],children:a.jsx(wp,{})})},{path:"/test-orders",element:a.jsx(Tt,{requiredPrivileges:["REVIEW_TEST_ORDER"],children:a.jsx(vp,{})})},{path:"/test-orders/create",element:a.jsx(Tt,{requiredPrivileges:["CREATE_TEST_ORDER"],children:a.jsx(Np,{})}),errorElement:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Create Test Order Page"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Something went wrong. Please try again."}),a.jsx("button",{onClick:()=>window.location.href="/test-orders",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Back to Test Orders"})]})})}]);function F0(){return a.jsx(vh,{router:Cp})}const S0=(c,i)=>{const u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=i,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)},A0=(c="")=>{const u=new Date().toISOString().split("T")[0];return`Test Orders${c?`-${c.replace(/\s+/g,"_")}`:""}-${u}.xlsx`};function Rp({jobId:c,onClose:i,onComplete:u}){const[d,f]=j.useState(null),[b,v]=j.useState(!1),h=j.useRef(!1);j.useRef(!1);const w=async()=>{if(Ie.isJobDownloaded(c)){v(!0);return}if(!(h.current||b||!c)){h.current=!0,Ie.markJobAsDownloaded(c);try{v(!0);const $=await lo(c),P=d?.fileName||A0();S0($,P),setTimeout(()=>{u&&u()},5e3)}catch($){console.error("Error auto-downloading file:",$),h.current=!1,Ie.downloadedJobs.delete(c),v(!1)}}};j.useEffect(()=>{if(!c)return;let $=null;$=Ie.subscribe(c,H=>{H&&f(H)});const P=Ie.getJob(c);return P?(f(P),Ie.isJobDownloaded(c)&&v(!0),(P.status==="pending"||P.status==="processing")&&Ie.startPolling(c,so,2e3)):Ie.startPolling(c,so,2e3),()=>{$&&$()}},[c]),j.useEffect(()=>{if(d?.status==="completed"&&d?.downloadUrl&&!b&&!h.current&&!Ie.isJobDownloaded(c)&&c){const $=setTimeout(()=>{!h.current&&!Ie.isJobDownloaded(c)&&w()},100);return()=>clearTimeout($)}},[d?.status,d?.downloadUrl]);const C=async()=>{if(!(!c||!d?.downloadUrl))try{const $=await lo(c),P=d?.fileName||A0();S0($,P)}catch($){console.error("Error downloading file:",$)}},M=()=>{i&&i()},g=()=>{if(!d)return null;switch(d.status){case"completed":return a.jsx(qa,{className:"w-4 h-4 text-green-600"});case"failed":return a.jsx(U0,{className:"w-4 h-4 text-red-600"});default:return a.jsx(Vh,{className:"w-4 h-4 text-blue-600 animate-pulse"})}},E=()=>{if(!d)return"Initializing...";switch(d.status){case"pending":return"Initializing...";case"processing":return`Creating file... ${d.progress||0}%`;case"completed":return b?"Downloaded!":"Completed!";case"failed":return"An error occurred";default:return"Processing..."}},p=()=>{if(d?.exportRequest){const{testOrderIds:$}=d.exportRequest;if($&&$.length>0)return`Test Orders (${$.length} orders).xlsx`}return d?.fileName||"Test Orders.xlsx"},D=d?.status==="completed"&&d?.downloadUrl,z=d?.status==="pending"||d?.status==="processing",K=d?.status==="completed",J=d?.status==="failed";return d?a.jsxs("div",{className:"w-80 bg-white rounded-lg shadow-lg border border-gray-200 p-4",style:{borderRadius:"10px"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[g(),a.jsx("span",{className:"font-semibold text-sm text-gray-900",children:"Export Excel"}),d.status&&a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${K?"bg-green-100 text-green-800":J?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:d.status})]}),a.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(tl,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"mb-2",children:a.jsx("p",{className:"text-xs text-gray-600 truncate",title:p(),children:p()})}),a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${K?"bg-green-600":J?"bg-red-600":"bg-blue-600"}`,style:{width:`${d.progress||0}%`}})}),z&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[d.progress||0,"%"]})]}),a.jsx("div",{className:"mb-3",children:a.jsx("p",{className:"text-xs text-gray-700",children:E()})}),D&&!b&&a.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-green-600 text-white text-xs rounded hover:bg-green-700 transition-colors",children:[a.jsx(co,{className:"w-3 h-3"}),"Download File"]}),K&&b&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[a.jsx(qa,{className:"w-3 h-3"}),a.jsx("span",{children:"File has been automatically downloaded"})]}),J&&a.jsx("p",{className:"text-xs text-red-600",children:d.errorMessage||"Unknown error"})]}):null}const go="export_jobs",Dp=3e4,E0=c=>{try{const i=c.filter(u=>u.status==="pending"||u.status==="processing"||u.status==="completed").map(u=>({jobId:u.jobId,status:u.status,progress:u.progress,createdAt:u.createdAt,exportRequest:u.exportRequest,downloadUrl:u.downloadUrl,fileName:u.fileName,errorMessage:u.errorMessage}));localStorage.setItem(go,JSON.stringify(i))}catch(i){console.error("Error saving jobs to storage:",i)}},zp=()=>{try{const c=localStorage.getItem(go);if(c)return JSON.parse(c)}catch(c){console.error("Error loading jobs from storage:",c)}return[]},Mp=()=>{try{localStorage.removeItem(go)}catch(c){console.error("Error clearing jobs from storage:",c)}},Op=c=>{if(c.downloadUrl)return!0;if(!c.createdAt)return!1;const i=new Date(c.createdAt).getTime();return Date.now()-i<Dp},Bp=c=>!c||!c.jobId?!1:c.status==="pending"||c.status==="processing"?!0:c.status==="completed"?Op(c):!1,Up=c=>c.filter(Bp).map(i=>i.jobId).filter(Boolean);function kp(){const[c,i]=j.useState([]),u=j.useRef(new Set),d=j.useRef(null),f=j.useCallback(()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const w=Ie.getAllJobs(),M=Up(w).filter(E=>!u.current.has(E)),g=Array.from(new Set(M));i(E=>{const p=new Set(E),D=new Set(g);if(E.length!==g.length)return g;for(const z of g)if(!p.has(z))return g;for(const z of E)if(!D.has(z))return g;return E}),E0(w)},100)},[]);j.useEffect(()=>{let w=!0;(()=>{zp().forEach(z=>{z.jobId&&(Ie.getJob(z.jobId)||(Ie.registerJob(z.jobId,z),(z.status==="pending"||z.status==="processing")&&Ie.startPolling(z.jobId,async J=>{const{getExportJobStatus:$}=await Ws(async()=>{const{getExportJobStatus:P}=await Promise.resolve().then(()=>cp);return{getExportJobStatus:P}},void 0);return await $(J)},2e3)))})})();const M=new Map,g=D=>{if(M.has(D)||!w)return;const z=Ie.subscribe(D,()=>{w&&f()});M.set(D,z)};Ie.getAllJobs().forEach(D=>{D.jobId&&g(D.jobId)});const E=setInterval(()=>{if(!w)return;Ie.getAllJobs().forEach(z=>{z.jobId&&!M.has(z.jobId)&&g(z.jobId)}),w&&f()},2e3),p=D=>{if(!w)return;const{jobId:z}=D.detail;z&&!M.has(z)&&(g(z),f())};return window.addEventListener("exportJobRegistered",p),f(),()=>{w=!1,d.current&&clearTimeout(d.current),clearInterval(E),window.removeEventListener("exportJobRegistered",p),M.forEach(D=>D())}},[f]);const b=w=>{setTimeout(()=>{u.current.add(w),i(M=>M.filter(g=>g!==w)),Ie.removeJob(w);const C=Ie.getAllJobs();E0(C)},5e3)},v=w=>{u.current.add(w),i(C=>C.filter(M=>M!==w))};j.useEffect(()=>{const w=()=>{c.forEach(C=>{Ie.removeJob(C)}),Mp(),i([])};return window.addEventListener("logout",w),()=>{window.removeEventListener("logout",w)}},[c]);const h=Array.from(new Set(c.filter(w=>w&&typeof w=="string"&&!u.current.has(w))));return h.length===0?null:a.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-3",style:{maxWidth:"320px"},children:h.map(w=>!Ie.getJob(w)||u.current.has(w)?null:a.jsx("div",{style:{animation:"slideInRight 0.3s ease-out"},children:a.jsx(Rp,{jobId:w,onClose:()=>v(w),onComplete:()=>b(w)})},w))})}function Lp({children:c}){const{initializeAuth:i}=Ct(),u=j.useRef(null);return j.useEffect(()=>{i()},[i]),j.useEffect(()=>{const d=h=>{try{const w=h.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),C=w.padEnd(w.length+(4-w.length%4)%4,"="),M=JSON.parse(atob(C));return typeof M.exp=="number"?M.exp:null}catch{return null}},f=async()=>{const h=localStorage.getItem("refreshToken");if(h)try{const w=await fe.post("/Auth/refresh",{refreshToken:h});w.status===200&&w.data?.accessToken&&w.data?.refreshToken&&(localStorage.setItem("accessToken",w.data.accessToken),localStorage.setItem("refreshToken",w.data.refreshToken),b())}catch{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}},b=()=>{u.current&&clearTimeout(u.current);const h=localStorage.getItem("accessToken");if(!h)return;const w=d(h);if(!w)return;const C=Math.max(w*1e3-Date.now()-15e3,0);u.current=setTimeout(f,C)};b();const v=()=>b();return window.addEventListener("visibilitychange",v),window.addEventListener("focus",v),()=>{u.current&&clearTimeout(u.current),window.removeEventListener("visibilitychange",v),window.removeEventListener("focus",v)}},[]),j.useEffect(()=>{const d=()=>{Ie.clearAll()};return window.addEventListener("storage",f=>{f.key==="accessToken"&&!f.newValue&&d()}),()=>{window.removeEventListener("storage",d)}},[]),a.jsxs(a.Fragment,{children:[c||a.jsx(F0,{}),a.jsx(kp,{})]})}Ct.getState().initializeAuth();ex.createRoot(document.getElementById("root")).render(a.jsx(Nh.StrictMode,{children:a.jsx(Lp,{children:a.jsx(F0,{})})}));
